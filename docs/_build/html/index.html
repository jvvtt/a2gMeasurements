<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" />

    <!-- Generated with Sphinx 7.2.6 and Furo 2023.09.10 -->
        <title>Aerial 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="#"><div class="brand">Aerial 1.0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="#">
  
  
  <span class="sidebar-brand-text">Aerial 1.0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  
</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="a2gmeasurements">
<h1>A2GMeasurements<a class="headerlink" href="#a2gmeasurements" title="Link to this heading">#</a></h1>
<p>a2gMeasurements.py comprises multiple (drivers for gimbal and gps, among others)
GUI_A2G_MEAS.py has all the functionality related with the GUI</p>
<section id="quick-definitions-for-documentation">
<h2>Quick definitions for documentation<a class="headerlink" href="#quick-definitions-for-documentation" title="Link to this heading">#</a></h2>
<p>There are only two types of nodes in the system: the ground node or the drone node. A node is just an abstraction of a system (either the drone or the ground) having as one of its components a host computer.</p>
<p>Each node has multiple components (including as mentioned above a host computer). More information about the components is available in “Manual A2GMeasurements”.</p>
<p>When we refer to “this node” in the documentation, it means the node where the attribute/method/class is being executed (whether is set, get, call or create an instance).</p>
<p>Equivalently, the “other node” in the documentation, refers to the node where the attribute/method/class is NOT being executed.</p>
</section>
<section id="use">
<h2>Use<a class="headerlink" href="#use" title="Link to this heading">#</a></h2>
<p>To use this software, execute in a terminal of the host computer of the ground node:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="hll">$ python GUI_A2G_MEAS.py
</span></pre></div>
</div>
</section>
<section id="api">
<h2>API<a class="headerlink" href="#api" title="Link to this heading">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalRS2">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a2gmeasurements.</span></span><span class="sig-name descname"><span class="pre">GimbalRS2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">speed_yaw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">40</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">speed_pitch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">40</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">speed_roll</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">40</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DBG_LVL_1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DBG_LVL_0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalRS2" title="Link to this definition">#</a></dt>
<dd><p>Python Class that works as the driver for the gimbal DJI RS2.</p>
<p>The gimbal should be connected to the host computer through an USB-to-PCAN bridge (PCAN System).</p>
<p>It creates a thread (called here a gimbal thread) to handle the communication between the gimbal and this host computer.</p>
<p>More info on “Manual A2GMeasurements” (Chapter).</p>
<p>Gimbal control modified and extended from <a class="reference external" href="https://github.com/ceinem/dji_rs2_ros_controller">https://github.com/ceinem/dji_rs2_ros_controller</a>, based as well on DJI R SDK demo software</p>
<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalRS2.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">speed_yaw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">40</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">speed_pitch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">40</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">speed_roll</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">40</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DBG_LVL_1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DBG_LVL_0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalRS2.__init__" title="Link to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>speed_yaw</strong> (<em>int</em><em>, </em><em>optional</em>) – speed of yaw axis in deg/s, defaults to 40</p></li>
<li><p><strong>speed_pitch</strong> (<em>int</em><em>, </em><em>optional</em>) – speed of pitch axis in deg/s, defaults to 40</p></li>
<li><p><strong>speed_roll</strong> (<em>int</em><em>, </em><em>optional</em>) – speed of roll axis in deg/s, defaults to 40</p></li>
<li><p><strong>DBG_LVL_1</strong> (<em>bool</em><em>, </em><em>optional</em>) – level of verbose to show at the command line (beta). This shows less verbose than the 0 level.</p></li>
<li><p><strong>DBG_LVL_0</strong> (<em>bool</em><em>, </em><em>optional</em>) – level of verbose to show at the command line (beta), defaults to False</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalRS2.assemble_can_msg">
<span class="sig-name descname"><span class="pre">assemble_can_msg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_set</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalRS2.assemble_can_msg" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Builds a DJI RS2 message frame based on the command to be sent.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmd_type</strong> (<em>int</em>) – see DJI R SDK Protocol and User Interface document for a description</p></li>
<li><p><strong>cmd_set</strong> (<em>int</em>) – see DJI R SDK Protocol and User Interface document for a description</p></li>
<li><p><strong>cmd_id</strong> (<em>int</em>) – see DJI R SDK Protocol and User Interface document for a description</p></li>
<li><p><strong>data</strong> (<em>int</em>) – see DJI R SDK Protocol and User Interface document for a description</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>parsed can frame whose fields are separated by “:”.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalRS2.can_buffer_to_full_frame">
<span class="sig-name descname"><span class="pre">can_buffer_to_full_frame</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalRS2.can_buffer_to_full_frame" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Parse the full DJI R frame message from the can buffer.</p>
<p>Its fields are explained in the DJI R SDK Protocol and User Interface.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>full_msg_frames</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalRS2.can_callback">
<span class="sig-name descname"><span class="pre">can_callback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalRS2.can_callback" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Callback for the thread in charge of checking the USB-to-CAN input (receive).</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<em>list</em>) – DJI RS2 frame message</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalRS2.parse_position_response">
<span class="sig-name descname"><span class="pre">parse_position_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_frame</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalRS2.parse_position_response" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Retrieve the position from the full DJI frame message.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data_frame</strong> (<em>list</em>) – DJI RS2 frame message</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalRS2.receive">
<span class="sig-name descname"><span class="pre">receive</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bus</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_event</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalRS2.receive" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Threading callback function. Defined when the thread is created. This thread listens 
for coming (received) can messages on a USB port. Reads 1 entry of the rx bus buffer at a time.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bus</strong> (<em>can.Bus object</em>) – object pointing to the type of bus (from ‘can’ python package)</p></li>
<li><p><strong>stop_event</strong> (<em>threading.Event</em>) – works as a flag to stop receiving messages</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalRS2.request_current_position">
<span class="sig-name descname"><span class="pre">request_current_position</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalRS2.request_current_position" title="Link to this definition">#</a></dt>
<dd><p>Sends command to request the current position of the gimbal.</p>
<p>Blocks thread execution for the time given by attribute <code class="docutils literal notranslate"><span class="pre">TIME_POS_REQ</span></code> to allow the response to be received</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalRS2.send_cmd">
<span class="sig-name descname"><span class="pre">send_cmd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalRS2.send_cmd" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Wrapper to <code class="docutils literal notranslate"><span class="pre">send_data</span></code> method.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>cmd</strong> (<em>str</em>) – command fields separated by ‘:’</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalRS2.send_data">
<span class="sig-name descname"><span class="pre">send_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">can_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalRS2.send_data" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Sends a command through the can bus</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>can_id</strong> (<em>int</em>) – static can id.</p></li>
<li><p><strong>data</strong> (<em>list</em>) – fields of the frame</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalRS2.seq_num">
<span class="sig-name descname"><span class="pre">seq_num</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalRS2.seq_num" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Updates the sequence number of the gimbal data.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>number in hexadecimal</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalRS2.setPosControl">
<span class="sig-name descname"><span class="pre">setPosControl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">yaw</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roll</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pitch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ctrl_byte</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_for_action</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalRS2.setPosControl" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Set the gimbal position by providing the yaw, roll and pitch.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>yaw</strong> (<em>int</em>) – yaw angle. value should be between -1800 and 1800</p></li>
<li><p><strong>roll</strong> (<em>int</em>) – roll angle. value should be betweeen -1800 and 1800. However, gimbal might stop if it reachs its maximum/minimum (this) axis value.</p></li>
<li><p><strong>pitch</strong> (<em>int</em>) – value should be betweeen -1800 and 1800. However, gimbal might stop if it reachs its maximum/minimum (this)axis value.</p></li>
<li><p><strong>ctrl_byte</strong> (<em>int</em>) – Absolute or relative movement. For absolute use 0x01, while for relative use 0x00.</p></li>
<li><p><strong>time_for_action</strong> (<em>int</em><em>, </em><em>optional</em>) – Time it takes for the gimbal to move to desired position. Implicitly, this command controls the speed of gimbal. It is given in units of 0.1 s. For example: a value of 0x14 is 20, which means that the gimbal will take 2s (20*0.1) to reach its destination. Defaults to 0x14.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>always returns true</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalRS2.setSpeedControl">
<span class="sig-name descname"><span class="pre">setSpeedControl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">yaw</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roll</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pitch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ctrl_byte</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">128</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalRS2.setSpeedControl" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Sets speed for each axis of the gimbal.</p>
<p>Always after seting the speed the gimbal roll is moved (strange behaviour). 
Developer has to send a setPosControl to set again the position of the gimbal where it was previously.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>yaw</strong> (<em>int</em>) – yaw speed in units of 0.1 deg/s</p></li>
<li><p><strong>roll</strong> (<em>int</em>) – roll speed in units of 0.1 deg/s</p></li>
<li><p><strong>pitch</strong> (<em>int</em>) – pitch speed in units of 0.1 deg/s</p></li>
<li><p><strong>ctrl_byte</strong> (<em>int</em><em>, </em><em>optional</em>) – defaults to 0x80</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if provided arguments are within acceptable range. False otherwise.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalRS2.start_thread_gimbal">
<span class="sig-name descname"><span class="pre">start_thread_gimbal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bitrate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000000</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalRS2.start_thread_gimbal" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Starts the thread for listening the incoming data (if any) from the gimbal.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>bitrate</strong> (<em>int</em><em>, </em><em>optional</em>) – Bitrate for the usb-to-can interface. This is a parameter inherited from can.Bus. Defaults to 1000000</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalRS2.stop_thread_gimbal">
<span class="sig-name descname"><span class="pre">stop_thread_gimbal</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalRS2.stop_thread_gimbal" title="Link to this definition">#</a></dt>
<dd><p>Stops the gimbal thread by setting the threading.Event attribute created in “start_thread_gimbal”.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalRS2.validate_api_call">
<span class="sig-name descname"><span class="pre">validate_api_call</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_frame</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalRS2.validate_api_call" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>CRC error check.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data_frame</strong> (<em>list</em>) – DJI RS2 frame message</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>passed or not the crc check</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="a2gmeasurements.GpsSignaling">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a2gmeasurements.</span></span><span class="sig-name descname"><span class="pre">GpsSignaling</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">DBG_LVL_1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DBG_LVL_2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DBG_LVL_0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'GPS'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GpsSignaling" title="Link to this definition">#</a></dt>
<dd><p>Python class that works as “software” driver for the Septentrio’s GPS receiver (Mosaic-go).</p>
<p>It implements the commands described in Septentrio’s “mosaic-go Reference Guide”.</p>
<p>There are commands (sent to the GPS receiver) that control (mainly) what type of information (in the form of what is called in Septentrio’s documentation, NMEA or SBF sentences) is retrieved from the receiver.</p>
<p>It creates a thread (called here a gps thread) to handle the communication between the receiver and this host computer.</p>
<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GpsSignaling.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">DBG_LVL_1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DBG_LVL_2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DBG_LVL_0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'GPS'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GpsSignaling.__init__" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Contructor for the GpsSignaling class. Important attributes are:</p>
<p><code class="docutils literal notranslate"><span class="pre">register_sbf_sentences_by_id</span></code>: list of integers containing the expected SBF sentences that are going to be requested at the receiver. The integer is the ID of the sentence described in Septentrio’s manual.</p>
<p><code class="docutils literal notranslate"><span class="pre">SBF_frame_buffer</span></code>: list of dictionaries containing the SBF frames during the execution of the thread responsible for receiving SBF frames.</p>
<p><code class="docutils literal notranslate"><span class="pre">MAX_SBF_BUFF_LEN</span></code>: Maximum number of entries in the SBF frame buffer before saving, cleaning and starting again</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>DBG_LVL_1</strong> (<em>bool</em><em>, </em><em>optional</em>) – used to print less verbose than level 0, defaults to False</p></li>
<li><p><strong>DBG_LVL_2</strong> (<em>bool</em><em>, </em><em>optional</em>) – used to print less verbose than level 2, defaults to False</p></li>
<li><p><strong>DBG_LVL_0</strong> (<em>bool</em><em>, </em><em>optional</em>) – prints all the verbose available, defaults to False</p></li>
<li><p><strong>save_filename</strong> (<em>str</em><em>, </em><em>optional</em>) – name of the file where to save the record of GPS coordinates along an experiment, defaults to ‘GPS’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GpsSignaling.check_coord_closeness">
<span class="sig-name descname"><span class="pre">check_coord_closeness</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">coordinates2compare</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GpsSignaling.check_coord_closeness" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Checks how close is a coordinate with respect to the actual node position.</p>
<p>It is assumed that both pair of coordinates to be compared lay at the same height.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>coordinates2compare</strong> (<em>dictionary</em>) – keys of the dictionary are ‘LAT’ and ‘LON’, and each of them has ONLY ONE value.</p></li>
<li><p><strong>tol</strong> (<em>float</em><em>, </em><em>optional</em>) – margin in meters by which the coordinates in comparison are close or not, defaults to 5</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if close , False otherwise.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GpsSignaling.get_last_sbf_buffer_info">
<span class="sig-name descname"><span class="pre">get_last_sbf_buffer_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">what</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Coordinates'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GpsSignaling.get_last_sbf_buffer_info" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Retrieves the last gps coordinates, the last heading information of the receiver, or both things.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>what</strong> (<em>str</em><em>, </em><em>optional</em>) – defines which information wants to be retrieved from <code class="docutils literal notranslate"><span class="pre">SBF_frame_buffer</span></code>. Options are: ‘Coordinates’, ‘Heading’ or ‘Both’.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>either one or two dictionaries. The first dictionary (always) returned contains either the coordinates or the heading information. If ‘Both’ was specified the first dictionary contains the coordinates and the second dictionary contains the heading information.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dictionary/ies</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GpsSignaling.parse_septentrio_msg">
<span class="sig-name descname"><span class="pre">parse_septentrio_msg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rx_msg</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GpsSignaling.parse_septentrio_msg" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Parses the received message and process it depending if it is an SBF or NMEA message</p>
<p>Raises an exception if <em>any</em> problem is encountered when parsing the message.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>rx_msg</strong> (<em>bytes</em><em> or </em><em>str</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GpsSignaling.process_atteuler_sbf_data">
<span class="sig-name descname"><span class="pre">process_atteuler_sbf_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw_data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GpsSignaling.process_atteuler_sbf_data" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Parses an AttEuler SBF sentence. To be able to receive this block, the receiver should be configured to output SBF sentences.</p>
<p>The AttEuler SBF sentence provides heading information of the imaginary line formed by the first and second antennas, w.r.t the North. To do so, the heading, pitch, and roll axis are defined.</p>
<p>The coordinates are stored in <code class="docutils literal notranslate"><span class="pre">SBF_frame_buffer</span></code>. Each <code class="docutils literal notranslate"><span class="pre">MAX_SBF_BUFF_LEN</span></code> entries of <code class="docutils literal notranslate"><span class="pre">SBF_frame_buffer</span></code>, the buffer is flushed and its contents are saved on disk.</p>
<p><em>More about all axis definition, and heading information in “mosaic-go Reference Guide”</em>.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>raw_data</strong> (<em>bytes</em>) – received data corresponding to the AttEurler SBF sentence.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GpsSignaling.process_gps_nmea_data">
<span class="sig-name descname"><span class="pre">process_gps_nmea_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GpsSignaling.process_gps_nmea_data" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Parses a line of NMEA data retrieved from the gps and coming from the virtual serial port.</p>
<p>Used NMEA sentences are GGA and HDT.</p>
<p>The labels of the items of the returned dictionary are the following ones for the GGA sentence: ‘Timestamp’, ‘Latitude’, ‘Longitude’, ‘Latitude Direction’, ‘Longitude’, ‘Longitude Direction’, ‘GPS Quality Indicator’, ‘Number of Satellites in use’, ‘Horizontal Dilution of Precision’, ‘Antenna Alt above sea level (mean)’, ‘Units of altitude (meters)’, ‘Geoidal Separation’, ‘Units of Geoidal Separation (meters)’, ‘Age of Differential GPS Data (secs)’, ‘Differential Reference Station ID’.</p>
<p><em>The instances of this class created in the GUI and other classes, use SBF sentences as the default type of sentence</em>.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<em>str</em>) – line of read data following the structure of a NMEA frame.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GpsSignaling.process_pvtcart_sbf_data">
<span class="sig-name descname"><span class="pre">process_pvtcart_sbf_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw_data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GpsSignaling.process_pvtcart_sbf_data" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Parses an PVTCart SBF sentence. To be able to receive this block, the receiver should be configured to output SBF sentences.</p>
<p>The PVTCart SBF sentence provides geocentric coordinates X, Y, Z for the position of the receiver.</p>
<p>The coordinates are stored in <code class="docutils literal notranslate"><span class="pre">SBF_frame_buffer</span></code>. Each <code class="docutils literal notranslate"><span class="pre">MAX_SBF_BUFF_LEN</span></code> entries of <code class="docutils literal notranslate"><span class="pre">SBF_frame_buffer</span></code>, the buffer is flushed and its contents are saved on disk.</p>
<p><em>More about the information carried by this block in “mosaic-go Reference Guide”</em>.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>raw_data</strong> (<em>bytes</em>) – received data corresponding to the PVTCart SBF block</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GpsSignaling.process_pvtgeodetic_sbf_data">
<span class="sig-name descname"><span class="pre">process_pvtgeodetic_sbf_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw_data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GpsSignaling.process_pvtgeodetic_sbf_data" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Parses an PVTGeodetic SBF sentence. To be able to receive this block, the receiver should be configured to output SBF sentences.</p>
<p>The PVTGeodetic SBF sentence provides geodetic coordinates lat, lon, h for the position of the receiver.</p>
<p>The coordinates are stored in <code class="docutils literal notranslate"><span class="pre">SBF_frame_buffer</span></code>. Each <code class="docutils literal notranslate"><span class="pre">MAX_SBF_BUFF_LEN</span></code> entries of <code class="docutils literal notranslate"><span class="pre">SBF_frame_buffer</span></code>, the buffer is flushed and its contents are saved on disk.</p>
<p><em>More about the information carried by this block in “mosaic-go Reference Guide”</em>.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>raw_data</strong> (<em>bytes</em>) – received data corresponding to the PVTGeodetic SBF block</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GpsSignaling.sendCommandGps">
<span class="sig-name descname"><span class="pre">sendCommandGps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interface</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'USB'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GpsSignaling.sendCommandGps" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Sends a command to the Septentrio mosaic-go receiver.</p>
<p>Blocks this thread execution for 500 ms.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmd</strong> (<em>str</em>) – command to be sent to the Septentrio mosaic-go receiver. The available list of commands is defined in “mosaic-go Reference Guide”.</p></li>
<li><p><strong>interface</strong> (<em>str</em><em>, </em><em>optional</em>) – is one of the allowed Septentrio interfaces. Current implementation only uses ‘USB’ interface.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GpsSignaling.serial_connect">
<span class="sig-name descname"><span class="pre">serial_connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">serial_port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GpsSignaling.serial_connect" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Open a serial connection. The Septentrio mosaic-go provides 2 virtual serial ports.</p>
<p>In Windows the name of the virtual serial ports are typically: COM# (Virtual serial port 1), COM# (Virtual serial port 2).</p>
<p>In Linux the name of the virtual serial ports (controlled by the standard Linux CDC-ACM driver) are: /dev/ttyACM0 (Virtual serial port 1), /dev/ttyACM1 (Virtual serial port 2).</p>
<p>Septentrio has different interfaces to use with its receiver. Among other interfaces are: IP (using Ethernet-over-USB), USB.</p>
<p>For the virtual serial ports the interface name in Septentrio receiver is ‘USB’ as their
communication is made through the USB connection with the host computer.</p>
<p>Additionally there is an actual (not virtual) serial port in the mosaic-go device. Under Linux, the name of this port is ‘/dev/serial0’ which is the symbolic link to either ‘dev/ttyS#’ or ‘/dev/ttyAMA#’.</p>
<p>For information about all available interfaces check the Septentrio “mosaic-go Reference Guide”.</p>
<p><em>It is important to note that only the USB interface has been implemented in this class</em>.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>serial_port</strong> (<em>str</em><em>, </em><em>optional</em>) – serial port or virtual serial port name, defaults to None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GpsSignaling.serial_receive">
<span class="sig-name descname"><span class="pre">serial_receive</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">serial_instance_actual</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_event</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GpsSignaling.serial_receive" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Callback function invoked by the thread responsible for handling I/O communication between the host computer and the Septentrio mosaic-go receiver.</p>
<p>Most of all messages sent by Septentrio mosaic-go receiver start with an “$” character.</p>
<p>The next character depends if the message is an echo of a command sent by the host computer, or if the message is an answer to a command sent by the host computer.</p>
<p>Echoes of commands sent by the host computer, don’t follow the “$” character with any predefined character. This messages are discarded by the method <code class="docutils literal notranslate"><span class="pre">parse_septentrio_msg</span></code>.</p>
<p>Messages that answer a command sent by the host computer, DO start with a predefined character. The predefined character depends wheter the answer arises from a NMEA sentence or an SBF sentence. This messages are parsed by the method <code class="docutils literal notranslate"><span class="pre">parse_septentrio_msg</span></code>.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>serial_instance_actual</strong> (<em>Serial</em>) – serial connection instance.</p></li>
<li><p><strong>stop_event</strong> (<em>threading.Event</em>) – Event to be used to stop the reading of the serial port.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GpsSignaling.start_gps_data_retrieval">
<span class="sig-name descname"><span class="pre">start_gps_data_retrieval</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stream_number</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interface</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'USB'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'sec1'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">msg_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'SBF'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nmea_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'+GGA+HDT'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sbf_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'+PVTCartesian+AttEuler'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GpsSignaling.start_gps_data_retrieval" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Starts the streaming of the NMEA/SBF sentences.</p>
<p>Wrapper of <code class="docutils literal notranslate"><span class="pre">sendCommandGps</span></code>.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stream_number</strong> (<em>int</em><em>, </em><em>optional</em>) – each interface can have multiple data streams. This parameter defined which is the number of the stream for the given <code class="docutils literal notranslate"><span class="pre">interface</span></code>, defaults to 1</p></li>
<li><p><strong>interface</strong> (<em>str</em><em>, </em><em>optional</em>) – is one of the allowed Septentrio interfaces. Current implementation only uses ‘USB’ interface.</p></li>
<li><p><strong>interval</strong> (<em>str</em><em>, </em><em>optional</em>) – time regularity used by the Septentrio receiver to sense the given SBF/NMEA sentence. Can be any of the following self-explanatory names: ‘msec10’, ‘msec20’, ‘msec40’, ‘msec50’, ‘msec100’, ‘msec200’, ‘msec500’, ‘sec1’, ‘sec2’, ‘sec5’, ‘sec10’, ‘sec15’, ‘sec30’, ‘sec60’, ‘min2’, ‘min5’, ‘min10’, ‘min15’, ‘min30’, ‘min60’.</p></li>
<li><p><strong>msg_type</strong> (<em>str</em><em>, </em><em>optional</em>) – ‘NMEA’ or ‘SBF’, defaults to ‘SBF’</p></li>
<li><p><strong>nmea_type</strong> (<em>str</em><em>, </em><em>optional</em>) – name/s of the NMEA sentence/s to be retrieved. If multiple sentences, each sentence string identifier should be preceded by ‘+’, and all the string should be concatenated in one single string (i.e. ‘+HDT+GGA’) , defaults to ‘+GGA+HDT’</p></li>
<li><p><strong>sbf_type</strong> (<em>str</em><em>, </em><em>optional</em>) – name/s of the SBF sentence/s to be retrieved. If multiple sentences, each sentence string identifier should be preceded by ‘+’, and all the string should be concatenated in one single string (i.e. ‘+PVTCartesian+AttEuler’). Each sentence needs to have a parsing function that is called in <code class="docutils literal notranslate"><span class="pre">parse_septentrio_msg</span></code> in the part corresponding to the id of the sentence. defaults to ‘+PVTCartesian+AttEuler’.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GpsSignaling.start_thread_gps">
<span class="sig-name descname"><span class="pre">start_thread_gps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">interface</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'USB'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GpsSignaling.start_thread_gps" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Starts the GPS thread responsible for handling I/O communication between the host computer and the Septentrio mosaic-go receiver.</p>
<p>Creates the threading Event that is set when the I/O communication must be closed.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>interface</strong> (<em>str</em><em>, </em><em>optional</em>) – is one of the allowed Septentrio interfaces. Current implementation only uses ‘USB’ interface.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GpsSignaling.stop_gps_data_retrieval">
<span class="sig-name descname"><span class="pre">stop_gps_data_retrieval</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stream_number</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interface</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'USB'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">msg_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'+NMEA+SBF'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GpsSignaling.stop_gps_data_retrieval" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Stops the streaming of the NMEA/SBF sentences initiated by calling <code class="docutils literal notranslate"><span class="pre">start_gps_data_retrieval</span></code>.</p>
<p>Wrapper of <code class="docutils literal notranslate"><span class="pre">sendCommandGps</span></code>.</p>
<p><em>Unexpected behaviour to be noted by</em> <strong>developers</strong>: <em>it seems that if the stream is not stopped by the time the serial connection is closed, then, when the user opens a new serial connection, Septentrio will start sending all the SBF or NMEA messages that were produced between the last time the serial connection was closed and the time it is opened again</em>.</p>
</div></blockquote>
<dl class="simple">
<dt>Args:</dt><dd><p>stream_number (int, optional): _description_. Defaults to 1.
interface (str, optional): _description_. Defaults to ‘USB’.
msg_type (str, optional): _description_. Defaults to ‘NMEA’.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stream_number</strong> (<em>int</em><em>, </em><em>optional</em>) – number of the stream to be stopped, defaults to 1</p></li>
<li><p><strong>interface</strong> (<em>str</em><em>, </em><em>optional</em>) – is one of the allowed Septentrio interfaces. Current implementation only uses ‘USB’ interface.</p></li>
<li><p><strong>msg_type</strong> (<em>str</em><em>, </em><em>optional</em>) – the message type corresponding to the stream <code class="docutils literal notranslate"><span class="pre">stream_number</span></code>. Options: ‘SBF’, ‘NMEA’ or ‘+NMEA+SBF’ or ‘+SBF+NMEA’ (the last two are the same), defaults to ‘+NMEA+SBF’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GpsSignaling.stop_thread_gps">
<span class="sig-name descname"><span class="pre">stop_thread_gps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">interface</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'USB'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GpsSignaling.stop_thread_gps" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Stops the GPS thread.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>interface</strong> (<em>str</em><em>, </em><em>optional</em>) – is one of the allowed Septentrio interfaces. Current implementation only uses ‘USB’ interface.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="a2gmeasurements.myAnritsuSpectrumAnalyzer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a2gmeasurements.</span></span><span class="sig-name descname"><span class="pre">myAnritsuSpectrumAnalyzer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">is_debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.myAnritsuSpectrumAnalyzer" title="Link to this definition">#</a></dt>
<dd><p>Python class to interact with the MS2760A Anritsu spectrum analyzer.</p>
<p>Functionality implemented retrieves the peak (power and frequency) of the spectrum of the system under test.</p>
<p>The spectrum analyzer also outputs xml files. Developer has to implement a method/s to parse the output of such files if they are used. In the commit history of the github of this project a parser was partially implemented (if the developer wants to check that).</p>
<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.myAnritsuSpectrumAnalyzer.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">is_debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.myAnritsuSpectrumAnalyzer.__init__" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Defines attributes of the class.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>is_debug</strong> (<em>bool</em><em>, </em><em>optional</em>) – print debug messages, defaults to True</p></li>
<li><p><strong>is_config</strong> (<em>bool</em><em>, </em><em>optional</em>) – true if you want to configure the Spectrum Analyzer, defaults to True</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.myAnritsuSpectrumAnalyzer.retrieve_max_pow">
<span class="sig-name descname"><span class="pre">retrieve_max_pow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.myAnritsuSpectrumAnalyzer.retrieve_max_pow" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Retrieves the maximum power and its correspondent frequency of the spectrum of the system under test.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>method</strong> (<em>int</em><em>, </em><em>optional</em>) – how to get the maximum peak and corresponding frequency. This is for developer. It is indisctintive for user. Defaults to 2.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>Exception</strong> – when method is outside of available methods to compute the peak and corresponding frequency.</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>dictionary with self-explanatory keys ‘MAG’, ‘MAG_UNITS’, ‘FREQ’, ‘FREQ_UNITS’</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.myAnritsuSpectrumAnalyzer.spectrum_analyzer_close">
<span class="sig-name descname"><span class="pre">spectrum_analyzer_close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.myAnritsuSpectrumAnalyzer.spectrum_analyzer_close" title="Link to this definition">#</a></dt>
<dd><p>Closes the socket.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.myAnritsuSpectrumAnalyzer.spectrum_analyzer_connect">
<span class="sig-name descname"><span class="pre">spectrum_analyzer_connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">HOST</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'127.0.0.1'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">PORT</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">9001</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.myAnritsuSpectrumAnalyzer.spectrum_analyzer_connect" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Creates a socket to connect to the spectrum analyzer.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>HOST</strong> (<em>str</em><em>, </em><em>optional</em>) – ip address of the spectrum analyzer, defaults to ‘127.0.0.1’</p></li>
<li><p><strong>PORT</strong> (<em>int</em><em>, </em><em>optional</em>) – TCP/IP port, defaults to 9001</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="a2gmeasurements.HelperA2GMeasurements">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a2gmeasurements.</span></span><span class="sig-name descname"><span class="pre">HelperA2GMeasurements</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ID</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">SERVER_ADDRESS</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DBG_LVL_0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DBG_LVL_1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">IsGimbal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">IsGPS</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">IsSignalGenerator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">IsRFSoC</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rfsoc_static_ip_address</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">L0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">SPEED</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">GPS_Stream_Interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'msec500'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">AVG_CALLBACK_TIME_SOCKET_RECEIVE_FCN</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.001</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">operating_freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">57510000000.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.HelperA2GMeasurements" title="Link to this definition">#</a></dt>
<dd><p>Python class for handling the interaction between the multiple devices available in the system: gps, gimbal and rfsoc.</p>
<p>It creates instances of each class handling one of those devices (i.e. GimbalRS2, GpsSignaling).</p>
<p>It creates a wireless TCP connection between the host computers of both nodes (air and ground node) to control devices and retrieve information from them.</p>
<p>It creates a thread (called here communication thread) to handle the communication between the host computers of both nodes.</p>
<p><code class="docutils literal notranslate"><span class="pre">MAX_TIME_EMPTY_SOCKETS`</span></code>: the maximum allowed time to wait if no information was sent over a socket.</p>
<p><code class="docutils literal notranslate"><span class="pre">CONN_MUST_OVER_FLAG</span></code>: a (boolean) flag indicating whether to close or not the connection between the host computers.</p>
<p><code class="docutils literal notranslate"><span class="pre">drone_fm_flag</span></code>: a (boolean) flag set at the GUI indicating whether the air node’s gimbal should follow the ground node. In all our documentation, a gimbal is said to be in “follow mode” (don’t confuse with DJI’s RS2 camera-based follow mode) if it follows the other node.</p>
<p><code class="docutils literal notranslate"><span class="pre">PAP_TO_PLOT</span></code>: a numpy array (of size defined in the method <code class="docutils literal notranslate"><span class="pre">pipeline_operations_rfsoc_rx_ndarray``of</span> <span class="pre">the</span> <span class="pre">class</span> <span class="pre">``RFSoCRemoteControlFromHost</span></code>) used to plot the Power Angular Profile (PAP) of the wireless channel in GUI’s PAP Panel.</p>
<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.HelperA2GMeasurements.HelperA2GStopCom">
<span class="sig-name descname"><span class="pre">HelperA2GStopCom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">DISC_WHAT</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ALL'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.HelperA2GMeasurements.HelperA2GStopCom" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Stops connection with all the devices or the specified ones in the variable ‘DISC_WHAT.</p>
<p>When called, no matter which is the value of <code class="docutils literal notranslate"><span class="pre">DISC_WHAT</span></code>, always close the TCP socket.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>DISC_WHAT</strong> (<em>list</em><em> or </em><em>str</em><em>, </em><em>optional</em>) – specifies with which/s device/s the connection must be ended. Options are: ‘GIMBAL’, ‘GPS’, ‘RFSOC’, ‘SG’, ‘ALL’. Defaults to ‘ALL’.</p></li>
<li><p><strong>stream</strong> (<em>int</em><em>, </em><em>optional</em>) – gps stream to be closed, defaults to 1. Assuming there is only one gps stream created at <code class="docutils literal notranslate"><span class="pre">__init__</span></code> of this class (which is the default operation) when creating the instance of the <code class="docutils literal notranslate"><span class="pre">GpsSignaling</span></code> class, this will close all the gps streams.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.HelperA2GMeasurements.HelperStartA2GCom">
<span class="sig-name descname"><span class="pre">HelperStartA2GCom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">PORT</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10000</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.HelperA2GMeasurements.HelperStartA2GCom" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Starts the socket binding, listening and accepting for server side, or connecting for client side. The ground node works as the server while the drone as the client.</p>
<p>Creates and starts the thread handling the socket messages.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>PORT</strong> (<em>int</em><em>, </em><em>optional</em>) – TCP port, defaults to 10000</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.HelperA2GMeasurements.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ID</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">SERVER_ADDRESS</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DBG_LVL_0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DBG_LVL_1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">IsGimbal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">IsGPS</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">IsSignalGenerator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">IsRFSoC</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rfsoc_static_ip_address</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">L0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">SPEED</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">GPS_Stream_Interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'msec500'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">AVG_CALLBACK_TIME_SOCKET_RECEIVE_FCN</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.001</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">operating_freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">57510000000.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.HelperA2GMeasurements.__init__" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Creates instances of classes <code class="docutils literal notranslate"><span class="pre">GimbalRS2</span></code> (or <code class="docutils literal notranslate"><span class="pre">GimbalGremsyH16</span></code>), <code class="docutils literal notranslate"><span class="pre">GpsSignaling</span></code>, <code class="docutils literal notranslate"><span class="pre">RFSoCRemoteControlFromHost</span></code> to control these devices.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ID</strong> (<em>str</em>) – either ‘DRONE’ or ‘GND’.</p></li>
<li><p><strong>SERVER_ADDRESS</strong> (<em>str</em>) – the IP address of the ground station.</p></li>
<li><p><strong>DBG_LVL_0</strong> (<em>bool</em><em>, </em><em>optional</em>) – if set, prints some low-level messages usefull for debugging, defaults to False.</p></li>
<li><p><strong>DBG_LVL_1</strong> (<em>bool</em><em>, </em><em>optional</em>) – if set, prints some higher-level messages usefull for debugging, defaults to False.</p></li>
<li><p><strong>IsGimbal</strong> (<em>int</em><em> or </em><em>bool</em><em>, </em><em>optional</em>) – 0 or FALSE, when no gimbal is physically connected to this host computer; 1, when a Ronin RS2 is physically connected; 2, when a Gremsy H16 is physically connected. Defaults to False.</p></li>
<li><p><strong>IsGPS</strong> (<em>bool</em><em>, </em><em>optional</em>) – True if a gps is physically connected to this host computer. False otherwise, defaults to False.</p></li>
<li><p><strong>IsSignalGenerator</strong> (<em>bool</em><em>, </em><em>optional</em>) – True if a signal generator controlled by pyvisa commands is physically connected to this host computer. False otherwise, defaults to False.</p></li>
<li><p><strong>IsRFSoC</strong> (<em>bool</em><em>, </em><em>optional</em>) – True if an RFSoC is physically connected to this host computer. False otherwise, defaults to False.</p></li>
<li><p><strong>rfsoc_static_ip_address</strong> (<em>str</em><em>, </em><em>optional</em>) – IP address of the RFSoC connected to this host computer, defaults to None</p></li>
<li><p><strong>L0</strong> (<em>float</em><em>, </em><em>optional</em>) – parameter of the signal generator, defaults to None</p></li>
<li><p><strong>SPEED</strong> (<em>int</em><em>, </em><em>optional</em>) – the speed of the node in m/s. If this node is GROUND it should be 0 (gnd node does not move) as it is by default. This parameter ONLY incides in raising a warning debug print when the speed of the node is higher than the time difference between consecutive SBF sentences. NOT a crutial parameter at all.</p></li>
<li><p><strong>GPS_Stream_Interval</strong> (<em>str</em><em>, </em><em>optional</em>) – time interval used for the retrieving of the configured SBF sentences in Septentrio’s receiver connected to this host computer. A list of available options is shown in <code class="docutils literal notranslate"><span class="pre">start_gps_data_retrieval</span></code> of class <code class="docutils literal notranslate"><span class="pre">GpsSignaling</span></code>, defaults to ‘msec500’.</p></li>
<li><p><strong>AVG_CALLBACK_TIME_SOCKET_RECEIVE_FCN</strong> (<em>float</em><em>, </em><em>optional</em>) – approximated time between calls of the communication thread. This parameter is used in conjunction with <code class="docutils literal notranslate"><span class="pre">MAX_TIME_EMPTY_SOCKETS</span></code> to raise an exception when neither side of the communication link is sending any message. Unfortunately, this is a very simple estimate, since the actual time between calls depends on many factors and is does not remain constant between calls. Defaults to 0.001</p></li>
<li><p><strong>operating_freq</strong> (<em>int</em><em>, </em><em>optional</em>) – operating frequency of the Sivers RF-frontend. The range of defined frequencies is defined in the “User Manual EVK06002” of the Sivers EVK (57-71 GHz) , defaults to 57.51e9</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.HelperA2GMeasurements.decode_message">
<span class="sig-name descname"><span class="pre">decode_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.HelperA2GMeasurements.decode_message" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Parses an incoming TCP message and calls the appropriate function to handle it.</p>
<p>This function is called by <code class="docutils literal notranslate"><span class="pre">socket_receive</span></code> (the communication thread callback).</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<em>bytes</em>) – raw data to be decoded</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.HelperA2GMeasurements.do_closed_gui_action">
<span class="sig-name descname"><span class="pre">do_closed_gui_action</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.HelperA2GMeasurements.do_closed_gui_action" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Callback function when this node receives a <code class="docutils literal notranslate"><span class="pre">CLOSEDGUI</span></code> command.</p>
<p>This comand is unidirectional. It is always sent by the ground node to the drone node.</p>
</div></blockquote>
<p>Sets a flag indicating (the drone node) that it can end its main script, since the GUI was closed by the user at the ground node.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.HelperA2GMeasurements.do_finish_meas_drone_rfsoc">
<span class="sig-name descname"><span class="pre">do_finish_meas_drone_rfsoc</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.HelperA2GMeasurements.do_finish_meas_drone_rfsoc" title="Link to this definition">#</a></dt>
<dd><p>Callback function when this node receives a <code class="docutils literal notranslate"><span class="pre">FINISHDRONERFSOC</span></code> command.</p>
<p>This comand is unidirectional. It is always sent by the ground node to the drone node.</p>
<p>The purpose is to finish the experiment (as defined in “Manual A2GMeasurements”). When the experiment is finished the GUI allows the user to end (disconnect) the connection between both nodes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.HelperA2GMeasurements.do_follow_mode_gimbal">
<span class="sig-name descname"><span class="pre">do_follow_mode_gimbal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fmode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.HelperA2GMeasurements.do_follow_mode_gimbal" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Callback function when this node receives a <code class="docutils literal notranslate"><span class="pre">FOLLOWGIMBAL</span></code> command.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">FOLLOWGIMBAL</span></code> command is sent when the other node asks for this node’s GPS information to be able to follow this node’s movement.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fmode</strong> (<em>int</em><em> (</em><em>hexadecimal</em><em>)</em><em>, </em><em>optional</em>) – specifies whether the other node shall follow this node’s movement in: 0x00, Elevation and azimuth; 0x01, Only elevation; 0x02, Only azimuth, defaults to 0x00.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.HelperA2GMeasurements.do_getgps_action">
<span class="sig-name descname"><span class="pre">do_getgps_action</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">follow_mode_gimbal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.HelperA2GMeasurements.do_getgps_action" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Callback function when this node receives a <code class="docutils literal notranslate"><span class="pre">GETGPS</span></code> command.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">GETGPS</span></code> commmand differentiates from <code class="docutils literal notranslate"><span class="pre">FOLLOWGIMBAL</span></code> in that when the other node only request GPS information from this node (i.e. for display the coordinates on a panel of the GUI), the <code class="docutils literal notranslate"><span class="pre">follow_mode_gimbal</span></code> is False as well as the <code class="docutils literal notranslate"><span class="pre">FMODE</span></code> key of the sent dictionary.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>follow_mode_gimbal</strong> (<em>bool</em><em>, </em><em>optional</em>) – True if other node’s gimbal must follow this node’s movement, defaults to False</p></li>
<li><p><strong>fmode</strong> (<em>int</em><em> (</em><em>hex</em><em>)</em><em>, </em><em>optional</em>) – specifies whether the other node shall follow this node’s movement in: 0x00, Elevation and azimuth; 0x01, Only elevation; 0x02, Only azimuth, defaults to 0x00.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.HelperA2GMeasurements.do_set_irf_action">
<span class="sig-name descname"><span class="pre">do_set_irf_action</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg_data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.HelperA2GMeasurements.do_set_irf_action" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Callback function when this node receives a <code class="docutils literal notranslate"><span class="pre">SETIRF</span></code> command.</p>
<p>This comand is unidirectional. It is always sent by the drone node to the ground node.</p>
</div></blockquote>
<p>Receives from the drone a subsampled version of the Power Angular Profile for it to be used by the GUI to continuously plot it in its PAP panel.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>msg_data</strong> (<em>numpy array</em>) – attribute value <code class="docutils literal notranslate"><span class="pre">data_to_visualize</span></code> from <code class="docutils literal notranslate"><span class="pre">RFSoCRemoteControlFromHost</span></code> class.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.HelperA2GMeasurements.do_set_remote_fm_flag">
<span class="sig-name descname"><span class="pre">do_set_remote_fm_flag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.HelperA2GMeasurements.do_set_remote_fm_flag" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Callback function when this node receives a <code class="docutils literal notranslate"><span class="pre">SETFMFLAG</span></code> command.</p>
<p>This comand is unidirectional. It is always sent by the ground node to the drone node.</p>
<p>Sets the <code class="docutils literal notranslate"><span class="pre">drone_fm_flag</span></code>. When this flag is set, the drone node can start sending <code class="docutils literal notranslate"><span class="pre">FOLLOWGIMBALL</span></code> commands to the ground node to get ground node’s coordinates and be able to follow (drone node) it (ground node).</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<em>dictionary</em><em>, </em><em>optional</em>) – dictionary with keys ‘X’, ‘Y’, ‘Z’, ‘FMODE’, ‘MOBILITY’, corresponding to geocentric coordinates, fo</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.HelperA2GMeasurements.do_set_remote_stop_fm">
<span class="sig-name descname"><span class="pre">do_set_remote_stop_fm</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.HelperA2GMeasurements.do_set_remote_stop_fm" title="Link to this definition">#</a></dt>
<dd><p>Callback function when this node receives a <code class="docutils literal notranslate"><span class="pre">SETFMFLAG</span></code> command.</p>
<p>This comand is unidirectional. It is always sent by the ground node to the drone node.</p>
<p>Unsets the <code class="docutils literal notranslate"><span class="pre">drone_fm_flag</span></code> flag.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.HelperA2GMeasurements.do_setgimbal_action">
<span class="sig-name descname"><span class="pre">do_setgimbal_action</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg_data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.HelperA2GMeasurements.do_setgimbal_action" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Callback function when this node receives a <code class="docutils literal notranslate"><span class="pre">SETGIMBAL</span></code> command.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>msg_data</strong> (<em>dictionary</em>) – dictionary with keys ‘YAW’, ‘PITCH’ and ‘MODE’. The ‘YAW’ values range between [-1800, 1800]. The ‘PITCH’ values are restricted (by software) to the interval [-600, 600] to avoid hits between the case and the gimbal. The ‘MODE’ values are: 0x00, consider ‘YAW’ and/or ‘PITCH’ values as relative to the actual position of the gimbal; 0x01, consider ‘YAW’ and/or ‘PITCH’ values as relative to the absolute 0 (in both azimuth and elevation) position.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.HelperA2GMeasurements.do_start_meas_drone_rfsoc">
<span class="sig-name descname"><span class="pre">do_start_meas_drone_rfsoc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg_data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.HelperA2GMeasurements.do_start_meas_drone_rfsoc" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Callback function when this node receives a <code class="docutils literal notranslate"><span class="pre">STARTDRONERFSOC</span></code> command.</p>
<p>This comand is unidirectional. It is always sent by the ground node to the drone node.</p>
<p>The purpose is to start the RFSoC thread (created in <code class="docutils literal notranslate"><span class="pre">RFSoCRemoteControlFromHost</span></code> class) responsible for retrieving the measured Channel Impulse Response from the RFSoC.</p>
<p>It is assumed that prior to this callback, the ground rfsoc (tx) has started sending the its sounding signal and there were no issues.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>msg_data</strong> (<em>dictionary</em>) – dictionary with keys ‘carrier_freq’, ‘rx_gain_ctrl_bb1’, ‘rx_gain_ctrl_bb2’, ‘rx_gain_ctrl_bb3’, ‘rx_gain_ctrl_bfrf’. More information about these keys can be found in method <code class="docutils literal notranslate"><span class="pre">set_rx_rf</span></code> from <code class="docutils literal notranslate"><span class="pre">RFSoCRemoteControlFromHost</span></code> class.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.HelperA2GMeasurements.do_stop_meas_drone_rfsoc">
<span class="sig-name descname"><span class="pre">do_stop_meas_drone_rfsoc</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.HelperA2GMeasurements.do_stop_meas_drone_rfsoc" title="Link to this definition">#</a></dt>
<dd><p>Callback function when this node receives a <code class="docutils literal notranslate"><span class="pre">STOPDRONERFSOC</span></code> command.</p>
<p>This comand is unidirectional. It is always sent by the ground node to the drone node.</p>
<p>The purpose is to stop the RFSoC thread.</p>
<p>It is assumed that prior to this function, the ground rfsoc (tx) has started sending the its sounding signal and there were no issues.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.HelperA2GMeasurements.encode_message">
<span class="sig-name descname"><span class="pre">encode_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.HelperA2GMeasurements.encode_message" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Encodes a TCP message to be sent.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source_id</strong> (<em>int</em>) – identifies the sender node with a number (this parameter is provided for -potential- future improvements but does not have any functionality)</p></li>
<li><p><strong>destination_id</strong> (<em>int</em>) – identifies the receiver node with a numer (this parameter is provided for -potential- future improvements but does not have any functionality)</p></li>
<li><p><strong>message_type</strong> (<em>int</em>) – 0x01, for a short type of message; 0x02, for a long type of message; 0x03, to answer/acknowledge a received request. More information about this is in “Manual A2GMeasurements”.</p></li>
<li><p><strong>cmd</strong> (<em>int</em>) – one of the supported requests/commands for each <code class="docutils literal notranslate"><span class="pre">message_type</span></code>. The list of commands is provided in “Manual A2GMeasurements” (Communication Protocl chapter).</p></li>
<li><p><strong>data</strong> (<em>dictionary</em><em>, </em><em>optional</em>) – additional data required by the request/command. The particular data sent depends on the <code class="docutils literal notranslate"><span class="pre">message_type</span></code> and the <code class="docutils literal notranslate"><span class="pre">cmd</span></code>. More information on “Manual A2GMeasurements” (Communication Protocl chapter).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the bytes object representing the message to be sent.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bytes</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.HelperA2GMeasurements.gimbal_follows_drone">
<span class="sig-name descname"><span class="pre">gimbal_follows_drone</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">heading</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lat_ground</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lon_ground</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height_ground</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lat_drone</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lon_drone</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height_drone</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.HelperA2GMeasurements.gimbal_follows_drone" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Computes the yaw, pitch and roll angles required to move the gimbal in this node towards the other node.</p>
<p>The caller of this function must guarantee that if <code class="docutils literal notranslate"><span class="pre">self.ID</span> <span class="pre">==</span> <span class="pre">'GROUND'</span></code>, the arguments passed to this function are drone coords. The ground coords SHOULD NOT be passed as they will be obtained from this node Septentrio’s receiver.</p>
<p>The caller of this function must guarantee that if <code class="docutils literal notranslate"><span class="pre">self.ID</span> <span class="pre">==</span> <span class="pre">'DRONE'</span></code>, the arguments passed to this function are ground coords. The drone coords SHOULD NOT be passed as they will be obtained from this node Septentrio’s receiver.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">IsGPS</span></code> is False (no GPS connected), then <code class="docutils literal notranslate"><span class="pre">heading</span></code>, <code class="docutils literal notranslate"><span class="pre">lat_ground</span></code>, <code class="docutils literal notranslate"><span class="pre">lon_ground</span></code>, <code class="docutils literal notranslate"><span class="pre">height_ground</span></code>, <code class="docutils literal notranslate"><span class="pre">lat_drone</span></code>, <code class="docutils literal notranslate"><span class="pre">lon_drone</span></code>, <code class="docutils literal notranslate"><span class="pre">height_drone</span></code> must be provided.</p>
<p>In that case, all coordinates provided must be geodetic (lat, lon, alt).</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>heading</strong> (<em>float</em><em>, </em><em>optional</em>) – angle between [0, 2*pi] (rads) corresponding to the heading of the line between the two antennas connected to Septentrio’s receiver in this node, defaults to None</p></li>
<li><p><strong>lat_ground</strong> (<em>float</em><em>, </em><em>optional</em>) – latitude of the GPS antenna 1 connected to Septentrio’s receiver at the GROUND node, defaults to None</p></li>
<li><p><strong>lon_ground</strong> (<em>float</em><em>, </em><em>optional</em>) – longitude of the GPS antenna 1 connected to Septentrio’s receiver at the GROUND node, defaults to None</p></li>
<li><p><strong>height_ground</strong> (<em>float</em><em>, </em><em>optional</em>) – height of the GPS antenna 1 connected to Septentrio’s receiver at the GROUND node. Assuming both antennas are placed at the same height, is the altitude (in meters above sea level) of the either of the antennas, defaults to None</p></li>
<li><p><strong>lat_drone</strong> (<em>float</em><em>, </em><em>optional</em>) – latitude of the GPS antenna 1 connected to Septentrio’s receiver at the DRONE node, defaults to None</p></li>
<li><p><strong>lon_drone</strong> (<em>float</em><em>, </em><em>optional</em>) – longitude of the GPS antenna 1 connected to Septentrio’s receiver at the DRONE node, defaults to None</p></li>
<li><p><strong>height_drone</strong> (<em>float</em><em>, </em><em>optional</em>) – height of the GPS antenna 1 connected to Septentrio’s receiver at the DRONE node. Assuming both antennas are placed at the same height, is the altitude (in meters above sea level) of the either of the antennas, defaults to None</p></li>
<li><p><strong>fmode</strong> (<em>int</em><em>, </em><em>optional</em>) – defines if the gimbal will follow the other node in Azimuth, elevation or both of them. Options are: 0x00, for Azimuth and elevation; 0x01, for Elevation, 0x02, for Azimuth. Defaults to 0x00.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>returns either the yaw, pitch or both to be set at the gimbal of this node, to follow the other node. The actual value is the angle value in degrees multiplied by 10 and rounded to the closest integer (i.e. a yaw to set of 45.78 degrees is returned as the yaw value 458).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.HelperA2GMeasurements.process_answer_get_gps">
<span class="sig-name descname"><span class="pre">process_answer_get_gps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.HelperA2GMeasurements.process_answer_get_gps" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Callback function when this node receives an <code class="docutils literal notranslate"><span class="pre">ANS</span></code> type of message (the equivalent to an acknowledment) from the other node, after this node sent to the other node a <code class="docutils literal notranslate"><span class="pre">GETGPS</span></code> or a <code class="docutils literal notranslate"><span class="pre">FOLLOWGIMBAL</span></code> command.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<em>dictionary</em>) – dictionary with keys ‘X’, ‘Y’, ‘Z’, ‘FMODE’, ‘FOLLOW_GIMBAL’. The values of ‘X’, ‘Y’, ‘Z’ are the geocentric coordinates from the other node. ‘FMODE’ is either 0x00 (Elevation and Azimuth), 0x01 (Elevation) or 0x02 (Azimuth). ‘FOLLOW_GIMBAL’ is either True (when the sent command by this node was <code class="docutils literal notranslate"><span class="pre">FOLLOWGIMBAL</span></code>) or False (when the sent command by this node was <code class="docutils literal notranslate"><span class="pre">GETGPS</span></code>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.HelperA2GMeasurements.socket_receive">
<span class="sig-name descname"><span class="pre">socket_receive</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stop_event</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.HelperA2GMeasurements.socket_receive" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>The communication thread callback. Calls the parser to decode the most recent TCP message received.</p>
<p>The time between calls of this function is OS and hardware dependent.</p>
<p>As both nodes can send and receive messages, this thread</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>stop_event</strong> (<em>threading.Event</em>) – when this is set, this function has nothing to execute.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.HelperA2GMeasurements.socket_send_cmd">
<span class="sig-name descname"><span class="pre">socket_send_cmd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">type_cmd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.HelperA2GMeasurements.socket_send_cmd" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Creates a message by the name of the request/command. Wrapper to <code class="docutils literal notranslate"><span class="pre">encode_message</span></code>.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>type_cmd</strong> (<em>int</em><em>, </em><em>optional</em>) – refers to the <code class="docutils literal notranslate"><span class="pre">cmd</span></code> parameter in <code class="docutils literal notranslate"><span class="pre">encode_message</span></code> , defaults to None</p></li>
<li><p><strong>data</strong> (<em>int</em><em>, </em><em>optional</em>) – refers to the <code class="docutils literal notranslate"><span class="pre">data</span></code> parameter in <code class="docutils literal notranslate"><span class="pre">encode_message</span></code>, defaults to None</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalGremsyH16">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a2gmeasurements.</span></span><span class="sig-name descname"><span class="pre">GimbalGremsyH16</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">speed_time_azimuth_table</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">speed_time_elevation_table</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalGremsyH16" title="Link to this definition">#</a></dt>
<dd><p>Python Class that works as the driver for the gimbal Gremsy H16.</p>
<p>The gimbal should be connected to the host computer through an TTL2USB connection (check “Manual A2GMeasurements”).</p>
<p>It creates a thread (called here a gimbal thread) to handle the communication between the gimbal and this host computer.</p>
<p>Gimbal’s rotational speed (both in yaw -azimuth-, and pitch -elevation-) depends on a value between [-100, 100] as this is the natural range of values in most Remote Controllers (i.e. FrSky X8R).</p>
<p>Gmbal’s rotational speed dependence on the RC controlling interval is neither linear, nor symmetrical:
1. Non-linear:  a change from 10 to 20 is not equivalent to a change from 20 to 30
2. Non-symmetrical: a change from 10 to 20 is not equivalent to a change from -10 to -20. A change from 10 to 20 (or -10 to -20) in yaw is not equivalent to a change from 10 to 20 (or -10 to -20) in pitch.</p>
<p>Gimbal’s angle (either yaw or pitch) depends on: 1) the RC controlling interval and 2) the time the given RC control value is hold. This dependence is measured as described in “Manual A2GMeasurements”.</p>
<p>Gimbal’s angle can only be controlled by using the <em>RC control value</em> and the <em>time</em> the serial SBUS will hold that control value.</p>
<p>This class relies on heavily on the <code class="docutils literal notranslate"><span class="pre">SBUSEncoder</span></code> class, as that is the class decoding the sbus protocol from Gremsy.</p>
<p>This class is meant to be equivalent to <code class="docutils literal notranslate"><span class="pre">GimbalRS2</span></code>. Mainly by implementing the <code class="docutils literal notranslate"><span class="pre">setPosControl</span></code> for this gimbal.</p>
<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalGremsyH16.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">speed_time_azimuth_table</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">speed_time_elevation_table</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalGremsyH16.__init__" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Constructor for the class.</p>
<p>Loads the measured angle (yaw and pitch, each one separately) dependence on RC control value and time. Replace <code class="docutils literal notranslate"><span class="pre">load_measured_data_august_2023</span></code> or reimplement it if newer/better measurements of this dependence are available.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>speed_time_azimuth_table</strong> (<em>numpy.ndarray</em><em>, </em><em>optional</em>) – array with whose 3 columns are: 1. RC control value (equivalent to speed). 2. Time holding the RC value. 3. Measured azimuth (yaw), defaults to None</p></li>
<li><p><strong>speed_time_elevation_table</strong> (<em>numpy.ndarray</em><em>, </em><em>optional</em>) – array with whose 3 columns are: 1. RC control value (equivalent to speed). 2. Time holding the RC value. 3. Measured elevation (pitch), defaults to None</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalGremsyH16.change_gimbal_mode">
<span class="sig-name descname"><span class="pre">change_gimbal_mode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'LOCK'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalGremsyH16.change_gimbal_mode" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Changes Gremsy gimbal mode. Available modes are: ‘Lock’ and ‘Follow’ (and motors off). Brief description of the modes is on the manual of the gimbal provided by the manufacturer.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mode</strong> (<em>str</em><em>, </em><em>optional</em>) – either ‘LOCK’ or ‘FOLLOW’, defaults to ‘LOCK’.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalGremsyH16.control_power_motors">
<span class="sig-name descname"><span class="pre">control_power_motors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">power</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'on'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalGremsyH16.control_power_motors" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Turns gremsy gimbal motors on or off. This function is a wrapper of <code class="docutils literal notranslate"><span class="pre">turn_on_motors</span></code> an <code class="docutils literal notranslate"><span class="pre">turn_off_motors</span></code> of the <code class="docutils literal notranslate"><span class="pre">SBUSEncoder</span></code> class.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>power</strong> (<em>str</em><em>, </em><em>optional</em>) – _description_, defaults to ‘on’</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalGremsyH16.define_home_position">
<span class="sig-name descname"><span class="pre">define_home_position</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalGremsyH16.define_home_position" title="Link to this definition">#</a></dt>
<dd><p>Defines the center of the coordinated system (yaw, pitch). To do so, it checks if the gimbal is moving (in both azimuth and elevation) and if not, read the angles provided by the IMU and set them as the home position. Due to this operation, this function <strong>must</strong> be called in <code class="docutils literal notranslate"><span class="pre">__init__</span></code> or before any <code class="docutils literal notranslate"><span class="pre">setPosControl</span></code> call.</p>
<p>As the gimbal controller from the manufacturer can’t be accesed, imu readings are not available. An external IMU is required and any cheap raspberry pi pico is capable of providing decent IMU support. Potential magnetic interferences between the IMU readings of the raspberry pi pico and the motors of the gimbal have not been researched.</p>
<blockquote>
<div><p><strong>NOTE</strong>: this function <em>requires to be further tested</em>, if the Gremsy gimbal is to be used again as part of the channel sounder system. The reason is that when checking if the gimbal is moving, a good tolerated error (tol_err = abs(angle_now - angle_before)) must be set.</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalGremsyH16.fit_model_to_gimbal_angular_data">
<span class="sig-name descname"><span class="pre">fit_model_to_gimbal_angular_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'linear'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalGremsyH16.fit_model_to_gimbal_angular_data" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Fits a model to the measured angle (yaw, pitch) dependence on time and speed (RC control value). There are two models: a linear model and a gaussian regressor.</p>
<p>The linear model is suitable specific range of “speeds” and time, since the non-linear dependence can be linearized. However, this <em>range must be defined</em>.</p>
<p>For the gaussian regressor, <em>more training samples (RC control value, time, angle) over the full range are required</em> to avoid overfitting and bad predicting behaviour.</p>
<p>There is either a linear or gp model for the RC control positive values and another one for the RC control negative values.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>model</strong> (<em>str</em><em>, </em><em>optional</em>) – either “linear” or “gp”, defaults to ‘linear’</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalGremsyH16.gremsy_angle">
<span class="sig-name descname"><span class="pre">gremsy_angle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a_i</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">a_ip</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b_i</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalGremsyH16.gremsy_angle" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Computes the angle between the sides of the triangle given by a_i and  a_i+1. The opposite side to the angle computed is the one defined by b_i.</p>
<p>A definition of this distances can be found in “Manual A2GMeasurements”.</p>
<p>NOTE FOR DEVELOPERS: <em>the experiment described in * “Manual A2GMeasurements” *was done before acquiring the external IMU. With the use of the external IMU a much easier measurement of the yaw and pitch can be done using (and extending) the ``receive_imu_data`` function of this class</em>.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>distance_1</strong> (<em>float</em>) – defined in “Manual A2GMeasurements”</p></li>
<li><p><strong>distance_2</strong> (<em>float</em>) – defined in “Manual A2GMeasurements”</p></li>
<li><p><strong>distance_3</strong> (<em>float</em>) – defined in “Manual A2GMeasurements”</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>angle</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float (radians)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalGremsyH16.load_measured_data_august_2023">
<span class="sig-name descname"><span class="pre">load_measured_data_august_2023</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalGremsyH16.load_measured_data_august_2023" title="Link to this definition">#</a></dt>
<dd><p>Loads a second set of measured data extracted from the experiment described on “Manual A2GMeasurements”.</p>
<p>This table contains as columns the speed [-100, 100], time [s], and the angle (azimuth, elevation) computed from the 3 distances (a_{i}, a_{i+1}, b_{i}) described in “Manual A2GMeasurements”.</p>
<p>NOTE FOR DEVELOPERS: <em>the experiment described in</em> “Manual A2GMeasurements” <em>was done before acquiring the external IMU. With the use of the external IMU a much easier measurement of the yaw and pitch can be done using (and extending) the ``receive_imu_data`` function of this class</em>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalGremsyH16.load_measured_data_july_2023">
<span class="sig-name descname"><span class="pre">load_measured_data_july_2023</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalGremsyH16.load_measured_data_july_2023" title="Link to this definition">#</a></dt>
<dd><p>Loads a set of measured data extracted from the experiment described on “Manual A2GMeasurements”.</p>
<p>This table contains as columns the speed [-100, 100], time [s], and the azimuth angle computed from the 3 distances (a_{i}, a_{i+1}, b_{i}) described in “Manual A2GMeasurements”.</p>
<p>NOTE FOR DEVELOPERS: <em>the experiment described in</em> “Manual A2GMeasurements” <em>was done before acquiring the external IMU. With the use of the external IMU a much easier measurement of the yaw and pitch can be done using (and extending) the ``receive_imu_data`` function of this class</em>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalGremsyH16.load_measured_drifts">
<span class="sig-name descname"><span class="pre">load_measured_drifts</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalGremsyH16.load_measured_drifts" title="Link to this definition">#</a></dt>
<dd><p>Loads measured drift angles from the experiment described on “Manual A2GMeasurements”.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalGremsyH16.plot_linear_reg_on_near_domain">
<span class="sig-name descname"><span class="pre">plot_linear_reg_on_near_domain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">loaded</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'august'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalGremsyH16.plot_linear_reg_on_near_domain" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Generates a figure with 3 subplots with measured values (default measured values or new values measured for more (speed, time) tuples given as a parameter to the class) and with linear regression model applied to the measured values.</p>
<ol class="arabic simple">
<li><p>3D Scatter Plot of (speed, time, angle) for speed &gt; 0 and angle -&gt; azimuth</p></li>
<li><p>3D Scatter Plot of (speed, time, angle) for speed &lt; 0 and angle -&gt; azimuth</p></li>
<li><p>3D Scatter Plot of (speed, time, angle) for speed &lt; 0 and angle -&gt; elevation</p></li>
</ol>
<p>if ‘loaded’ is august then the figure has 4 subplots, with the 4th being
4. 3D Scatter Plot of (speed, time, angle) for speed &gt; 0 and angle -&gt; elevation</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>loaded</strong> (<em>str</em><em>, </em><em>optional</em>) – which table loaded: the one from <code class="docutils literal notranslate"><span class="pre">load_measured_data_july_2023</span></code> or the one from <code class="docutils literal notranslate"><span class="pre">load_measured_data_august_2023</span></code>, defaults to ‘august’.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalGremsyH16.receive_imu_data">
<span class="sig-name descname"><span class="pre">receive_imu_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stop_event</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalGremsyH16.receive_imu_data" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Callback function for the imu thread. Read the yaw, pitch, roll angles and stores them in the attribute <code class="docutils literal notranslate"><span class="pre">last_imu_reading</span></code> of this class.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>stop_event</strong> (<em>threading.Event</em>) – when this is set, this function won’t do anything</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalGremsyH16.setPosControl">
<span class="sig-name descname"><span class="pre">setPosControl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">yaw</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pitch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roll</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'linear'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalGremsyH16.setPosControl" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Moves Gremsy H16 gimbal by the input angle. This function works as the equivalent to the <code class="docutils literal notranslate"><span class="pre">setPosControl</span></code> function of the class <code class="docutils literal notranslate"><span class="pre">GimbalRS2</span></code>. If movement is desired in both yaw and pitch, the gimbal will move first in either axis (i.e. yaw) and after finishing the that movement, it will move in the other axis (i.e. pitch).</p>
<p>If the linear model is used: this function sets an RC control value (“speed”) and finds the corresponding time, given the angle desired to be set.</p>
<p>If the gp model is used: this function calls <code class="docutils literal notranslate"><span class="pre">setPosControlGPModel</span></code> to get the RC control value and time, corresponding to the input angle.</p>
<p>For a more accurate gimbal angle movement:</p>
<ol class="arabic simple">
<li><p>Provide a finer and equally sampled grid of RC control value, time with its corresponding measured angle.</p></li>
<li><p>Modify <code class="docutils literal notranslate"><span class="pre">fit_model_to_gimbal_angular_data</span></code> to tune parameters of the gp model (if gp model is chosen).</p></li>
<li><p>Modify  <code class="docutils literal notranslate"><span class="pre">setPosControlGPModel</span></code> (if gp model is chosen) if a better logic for getting RC control values and times from a given angle is available.</p></li>
</ol>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>yaw</strong> (<em>float</em>) – yaw angle (in degrees) to be set. Valid range between [-180, 180].</p></li>
<li><p><strong>pitch</strong> (<em>float</em>) – pitch angle (in degrees) to be set. Valid range between [-90, 90].</p></li>
<li><p><strong>roll</strong> (<em>float</em><em>, </em><em>optional</em>) – roll angle (in degrees) to be set. Roll angle is not used because desired movement of the gimbal only requires yaw and pitch angles.</p></li>
<li><p><strong>mode</strong> (<em>int</em><em> (</em><em>hex</em><em>)</em><em>, </em><em>optional</em>) – _description_, defaults to 0x00</p></li>
<li><p><strong>model</strong> (<em>str</em><em>, </em><em>optional</em>) – ‘linear’ or ‘gp’ model for the angle dependence on the RC control value and the time to hold it. defaults to ‘linear’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalGremsyH16.setPosControlGPModel">
<span class="sig-name descname"><span class="pre">setPosControlGPModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">yaw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pitch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalGremsyH16.setPosControlGPModel" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Finds the RC control value and time giving the desired yaw (or pitch, or both separately) for the gaussian regressor.</p>
<p>Uses an iterative approach to find the RC control value and time to hold it by smartly searching in the grid composed by the RC control values and the times to hold it. The initial value of for the “speed” (RC control value) influences the convergence of the iterative method.</p>
<p>NOTE FOR DEVELOPERS: <em>this function requires</em>:
1) a better grid of measured “speed”, time, angle. With the actual training samples, the prediction does not give physical consistent results (i.e. the time it takes to move 60 degrees at speed 20 is smaller than the one it takes to move 60 degrees at a lower speed). This is because the grid is coarse and not equally sampled.
2) this function should guarantee that the returned time is always positive. Negative times does not make physical sense. Furthermore, it should also guarantee that the time is above a certain threshold (i.e. 2 seconds), during which the gimbal will accelerate until reaching the desired speed. In a realistic gimbal, the acceleration of the gimbal is not infinite. On the contrary, gimbal’s speed vs time dependence follows usually a trapezoidal curve, which means that there is some time required (the threshold) for the gimbal to reach the plateau of the trapezoid (desired speed).
3) the caller of this function (<code class="docutils literal notranslate"><span class="pre">setPosControl</span></code>) to handle when an exeception is raised.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>yaw</strong> (<em>int</em><em>, </em><em>optional</em>) – desired yaw angle to set, defaults to 0</p></li>
<li><p><strong>pitch</strong> (<em>int</em><em>, </em><em>optional</em>) – desired pitch angle to set, defaults to 0</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>Exception</strong> – when the optimization local function <code class="docutils literal notranslate"><span class="pre">find_feature_values_for_angle</span></code> does not converge.</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>4 floats: required RC control value to set yaw, required time to set yaw, required RC control value to set pitch, required time to set pitch.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>float, float, float, float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalGremsyH16.start_imu_thread">
<span class="sig-name descname"><span class="pre">start_imu_thread</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">COM_PORT</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'COM21'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalGremsyH16.start_imu_thread" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Connects to the IMU and creates a new thread (the imu thread) to read the angle data from the IMU.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>COM_PORT</strong> (<em>str</em><em>, </em><em>optional</em>) – port where the IMU is connected. If this host computer’s OS is Windows it would be ‘COM#’, if it is Linux it would be “/dev/ttyUSB#”, defaults to ‘COM21’</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalGremsyH16.start_thread_gimbal">
<span class="sig-name descname"><span class="pre">start_thread_gimbal</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalGremsyH16.start_thread_gimbal" title="Link to this definition">#</a></dt>
<dd><p>Creates an instance of the <code class="docutils literal notranslate"><span class="pre">SBUSEncoder</span></code> class responsible for encoding the actual serial signal used by sbus protocol to set an RC control value.</p>
<p>By creating such instance, the gremsy gimbal thread is created and started.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalGremsyH16.stop_thread_gimbal">
<span class="sig-name descname"><span class="pre">stop_thread_gimbal</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalGremsyH16.stop_thread_gimbal" title="Link to this definition">#</a></dt>
<dd><p>Stops the imu thread and the <code class="docutils literal notranslate"><span class="pre">SBUSEncoder</span></code> gremsy gimbal thread.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.GimbalGremsyH16.stop_thread_imu">
<span class="sig-name descname"><span class="pre">stop_thread_imu</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.GimbalGremsyH16.stop_thread_imu" title="Link to this definition">#</a></dt>
<dd><p>Stops the imu thread and closed the serial port where the IMU is connected.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="a2gmeasurements.SBUSEncoder">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a2gmeasurements.</span></span><span class="sig-name descname"><span class="pre">SBUSEncoder</span></span><a class="headerlink" href="#a2gmeasurements.SBUSEncoder" title="Link to this definition">#</a></dt>
<dd><p>Python class that encodes the sbus protocol serial signal. The sbus protocol is an UART protocol that specifies the way to send a receive multiple channel information by using a conventional UART channel.</p>
<p>Each channel carries information about a control value. It is mainly used by RC receivers to control the angular movement of an object along its different axis.</p>
<p>Among the control values in an sbus protocol message are the known throttle, aileron, rudder and elevation.</p>
<p>Each manufacturer can have a slightly different implementation of the sbus protocol.</p>
<p>The sbus implementation for the Gremsy H16 requires that the idle, stop and parity bits are inverted w.r.t to their voltage value in a conventional UART communication. That is why a hardware inverter (i.e. 74HCN04) is used on the signal.</p>
<p>The following is the standard convention for the channels in Gremsy H16 (although it can be changed):</p>
<ol class="arabic simple">
<li><p>Channel 2 is assumed to be elevation (pitch)</p></li>
<li><p>Channel 4 is assumed to be pan (yaw)</p></li>
<li><p>Channel 5 is assumed to be mode (lock, follow, off)</p></li>
</ol>
<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.SBUSEncoder.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.SBUSEncoder.__init__" title="Link to this definition">#</a></dt>
<dd><p>Initializes the channels.</p>
<p>Establishes a linear mapping between the RC control value interval (-100, 100) and the actual values seen at the osciloscoppe of a given channel (i.e rudder).</p>
<p>Define some attributes of the class. The atributes related with drifting are defined in the section Gremsy H16 Gimbal of the “Manual A2GMeasurements”.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.SBUSEncoder.change_mode">
<span class="sig-name descname"><span class="pre">change_mode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'LOCK'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.SBUSEncoder.change_mode" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Changes the mode of all gimbal motors. According to manufacturers H16 manual the choices are: “FOLLOW” and “LOCK”.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mode</strong> (<em>str</em><em>, </em><em>optional</em>) – either “FOLLOW” or “LOCK”. A description of each mode is on the manufacturer H16 manual, defaults to ‘LOCK’</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.SBUSEncoder.move_gimbal">
<span class="sig-name descname"><span class="pre">move_gimbal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ele</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rud</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mov_time</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.SBUSEncoder.move_gimbal" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Moves the gimbal a certain angle. The angle to be moved is determined by the RC control value for yaw, the RC control value for pitch, and the time those values are hold before realeasing them.</p>
<p>The RC control values for yaw (<code class="docutils literal notranslate"><span class="pre">rud</span></code>) and pitch (<code class="docutils literal notranslate"><span class="pre">ele</span></code>) are values in the range (-100, 100) that behave as speed values: speed the gimbal will move in that particular axis (i.e. speed it will move in the yaw axis).</p>
<p>Angle = Angular Speed x time</p>
<p>Angular Speed = function of the RC control value</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ele</strong> (<em>int</em>) – RC control value for pitch. Can be thought as the pitch axis velocity. Between -100, 100.</p></li>
<li><p><strong>rud</strong> (<em>int</em>) – RC control value for yaw. Can be thought as the yaw axis velocity. Between -100, 100.</p></li>
<li><p><strong>mov_time</strong> (<em>int</em>) – time (seconds) to hold the velocity in a particular axis.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.SBUSEncoder.not_move_command">
<span class="sig-name descname"><span class="pre">not_move_command</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.SBUSEncoder.not_move_command" title="Link to this definition">#</a></dt>
<dd><p>Updates the channel so that it does not continue moving.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.SBUSEncoder.send_sbus_msg">
<span class="sig-name descname"><span class="pre">send_sbus_msg</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.SBUSEncoder.send_sbus_msg" title="Link to this definition">#</a></dt>
<dd><p>Calls the channels encoder to write the message on the serial port.</p>
<p>Since there is a known drifting in the yaw axis, this method sets a different 0 value (no movement) to counter the drifting behaviour. This is explained in “Manual A2GMeasurements” (Gremsy H16 Gimbal section), but a kind of equivalent way to understand this, is that we try to counter drift by changing the effective duty cycle of the yaw channel value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.SBUSEncoder.set_channel">
<span class="sig-name descname"><span class="pre">set_channel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">channel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.SBUSEncoder.set_channel" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Sets a value on a channel. This a “setter function”.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>channel</strong> (<em>int</em>) – channel to be set</p></li>
<li><p><strong>data</strong> (<em>int</em>) – value to be set at the channel</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.SBUSEncoder.start_sbus">
<span class="sig-name descname"><span class="pre">start_sbus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">serial_interface</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/dev/ttyUSB'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period_packet</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.009</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.SBUSEncoder.start_sbus" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Creates the serial connection between the host computer and the gimbal.</p>
<p>Starts the repeating thread (RepeatTimer class instance) to send data each <code class="docutils literal notranslate"><span class="pre">period_packet</span></code> seconds. This mimics the behaviour between the RC transmitter and receiver.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>serial_interface</strong> (<em>str</em><em>, </em><em>optional</em>) – serial port, defaults to ‘/dev/ttyUSB’</p></li>
<li><p><strong>period_packet</strong> (<em>float</em><em>, </em><em>optional</em>) – time between calls of <code class="docutils literal notranslate"><span class="pre">self.send_sbus_msg</span></code>. It was found that the communication is decoded when this value is lower than 20 ms. The actual value observed in the oscilloscope of the interval between sbus signal is 10-13ms (More in “Manual A2GMeasurements”, section Gremsy H16 Gimbal), defaults to 0.009</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.SBUSEncoder.stop_updating">
<span class="sig-name descname"><span class="pre">stop_updating</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.SBUSEncoder.stop_updating" title="Link to this definition">#</a></dt>
<dd><p>Stops the thread to repeatedly call <code class="docutils literal notranslate"><span class="pre">self.send_sbus_msg</span></code>. Closes the opened serial port for this communication.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.SBUSEncoder.update_rest_state_channel">
<span class="sig-name descname"><span class="pre">update_rest_state_channel</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.SBUSEncoder.update_rest_state_channel" title="Link to this definition">#</a></dt>
<dd><p>Sets the no movement value (0) of the yaw channel (i.e. channel 4) to the experimentally found value that counters the drift.</p>
<p>Change <code class="docutils literal notranslate"><span class="pre">parameter</span></code> to change the “effective duty cycle” of the yaw channel value. More explanation is found in “Manual A2GMeasurements” (Gremsy H16 Gimbal section)</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="a2gmeasurements.RFSoCRemoteControlFromHost">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a2gmeasurements.</span></span><span class="sig-name descname"><span class="pre">RFSoCRemoteControlFromHost</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">radio_control_port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8080</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radio_data_port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8081</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rfsoc_static_ip_address</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'10.1.1.40'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'PDAPs'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">operating_freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">57510000000.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.RFSoCRemoteControlFromHost" title="Link to this definition">#</a></dt>
<dd><p>Python class that implements all functionality for the communication between a host computer (client) and the RFSoC (server) connected through Ethernet to it.</p>
<p>Configures the antenna front end (Sivers EVK) parameters. The antenna front end is responsible for upconverting the frequency, beamforming and providing the physical interface with the air.</p>
<p>Implements the client side (host computer) functionality of the TCP connection.</p>
<p>Most of the methods of this class were developed by Panagiotis Skrimponis. They were integrated in a class and extended by Julian D. Villegas G.</p>
<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.RFSoCRemoteControlFromHost.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">radio_control_port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8080</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radio_data_port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8081</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rfsoc_static_ip_address</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'10.1.1.40'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'PDAPs'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">operating_freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">57510000000.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.RFSoCRemoteControlFromHost.__init__" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Creates two sockets: one for control commands and another for transfer data.</p>
<p>Establish the connection between the client and the RFSoC.</p>
<p>Some important attributes of this class are:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">beam_idx_for_vis</span></code>: this attribute sets the index of the beams of the measured Channel Impulse Response (CIR) that are sent from the drone node to the ground node to be displayed in the GUI.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TIME_SNAPS_TO_SAVE</span></code>: number of CIR snapshots to collect before save them on disk.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TIME_SNAPS_TO_VIS</span></code>: number of CIR snapshots to be displayed. This value is set depending on the max bytes that can be send through Ethernet in a single message (i.e. 22 time snaps * 16 beams * 4 bytes-per-PAP-entry = 1408 bytes)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nbeams</span></code>: number of beams of the CIR to be retrieved from the server.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nread</span></code>: number of delay taps of the CIR to be retrieved from the server.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nbytes</span></code>: number of bytes of a full CIR (1 time snapshot, 64 beams, 1024 delay taps)</p></li>
</ol>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>radio_control_port</strong> (<em>int</em><em>, </em><em>optional</em>) – port for “control socket”, defaults to 8080</p></li>
<li><p><strong>radio_data_port</strong> (<em>int</em><em>, </em><em>optional</em>) – port for “data socket”, defaults to 8081</p></li>
<li><p><strong>rfsoc_static_ip_address</strong> (<em>str</em><em>, </em><em>optional</em>) – static IP address of the rfsoc ethernet interface, defaults to ‘10.1.1.40’</p></li>
<li><p><strong>filename</strong> (<em>str</em><em>, </em><em>optional</em>) – name to be used when saving the CIRs, defaults to ‘PDAPs’.</p></li>
<li><p><strong>operating_freq</strong> (<em>int</em><em>, </em><em>optional</em>) – operating frequency for the antenna array front end, defaults to 57.51e9.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.RFSoCRemoteControlFromHost.finish_measurement">
<span class="sig-name descname"><span class="pre">finish_measurement</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.RFSoCRemoteControlFromHost.finish_measurement" title="Link to this definition">#</a></dt>
<dd><p>Kills the rfsoc if it is still alive and saves the remaining CIRs.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.RFSoCRemoteControlFromHost.pipeline_operations_rfsoc_rx_ndarray">
<span class="sig-name descname"><span class="pre">pipeline_operations_rfsoc_rx_ndarray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">each_n_beams</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.RFSoCRemoteControlFromHost.pipeline_operations_rfsoc_rx_ndarray" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Computes the PAP for a single snapshot CIR (64 beams * 1024 delay taps) or the PAPs of multiple snapshots CIR (snaps * 64 beams * 1024 delay taps).</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array</strong> (<em>numpy.ndarray</em>) – CIRs. If it has 2 dimensions the CIR correspond to a single snapshot, if it has 3 dimensions, the CIR correspond to multiple snapshots.</p></li>
<li><p><strong>axis</strong> (<em>either 0</em><em>, </em><em>1</em><em> or </em><em>2</em>) – delay tap axis</p></li>
<li><p><strong>each_n_beams</strong> (<em>int</em><em>, </em><em>optional</em>) – subsample the 64 beams by this value, defaults to 4</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>computed PAP “subsampled” version.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.RFSoCRemoteControlFromHost.receive_signal_async">
<span class="sig-name descname"><span class="pre">receive_signal_async</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stop_event</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.RFSoCRemoteControlFromHost.receive_signal_async" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Callback for the thread responsible for retrieving CIRs from RFSoC server (rfsoc thread).</p>
<p>When enough (<code class="docutils literal notranslate"><span class="pre">self.TIME_SNAPS_TO_VIS</span></code>) CIR time snapshots are available, computes the Power Angular Profile to be sent to the ground node for displaying it in the GUI.</p>
<p>When enough (<code class="docutils literal notranslate"><span class="pre">self.TIME_SNAPS_TO_SAVE</span></code>) CIR time snapshots are available, saves the CIRs on disk.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>stop_event</strong> (<em>threading.Event</em>) – when set, this function does nothing (the thread can be alived but does nothing)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.RFSoCRemoteControlFromHost.save_hest_buffer">
<span class="sig-name descname"><span class="pre">save_hest_buffer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">register_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.RFSoCRemoteControlFromHost.save_hest_buffer" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Saves the raw (time-snaps, n_beams, n_delay_taps) CIR array</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>register_time</strong> (<em>bool</em><em>, </em><em>optional</em>) – parameter used for debugging purposes, defaults to True</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.RFSoCRemoteControlFromHost.send_cmd">
<span class="sig-name descname"><span class="pre">send_cmd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_arg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.RFSoCRemoteControlFromHost.send_cmd" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Sends a command to the RFSoC server.</p>
<p>These commands control the Sivers EVK mode, carrier frequncy, tx gain and rx gain.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmd</strong> (<em>str</em>) – available commands are: ‘setModeSivers’, ‘setCarrierFrequencySivers’, ‘setGainTxSivers’, ‘setGainRxSivers</p></li>
<li><p><strong>cmd_arg</strong> (<em>str</em><em> or </em><em>float</em><em> or </em><em>dict</em><em>, </em><em>optional</em>) – supported parameters for ‘setModeSivers’ are ‘RXen_0_TXen1’, ‘RXen1_TXen0’, ‘RXen0_TXen0’; supported parameters for ‘setCarrierFrequencySivers’ are float number, i.e.: 57.51e9; supported parameters for ‘setGainTxSivers’ are dict with this structure {‘tx_bb_gain’: 0x00, ‘tx_bb_phase’: 0x00, ‘tx_bb_iq_gain’: 0x00, ‘tx_bfrf_gain’: 0x00}; supported parameters for ‘setGainRxSivers’ are dict with this structure {‘rx_gain_ctrl_bb1’:0x00, ‘rx_gain_ctrl_bb2’:0x00, ‘rx_gain_ctrl_bb3’:0x00, ‘rx_gain_ctrl_bfrf’:0x00}.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.RFSoCRemoteControlFromHost.set_rx_rf">
<span class="sig-name descname"><span class="pre">set_rx_rf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rx_gain_ctrl_bb1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">119</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rx_gain_ctrl_bb2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rx_gain_ctrl_bb3</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">153</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rx_gain_ctrl_bfrf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">255</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">carrier_freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">57510000000.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.RFSoCRemoteControlFromHost.set_rx_rf" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Sets rx gains and frequency of operation. Wrapper function of <code class="docutils literal notranslate"><span class="pre">send_cmd</span></code>.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rx_gain_ctrl_bb1</strong> (<em>int</em><em> (</em><em>hexadecimal</em><em>)</em><em>, </em><em>optional</em>) – sets the first rx gain for the I,Q according to: I[0:3]:[0,1,3,7,F]:-6:0 dB, 4 steps; Q[0:3]:[0,1,3,7,F]:-6:0 dB, 4 steps, defaults to 0x77</p></li>
<li><p><strong>rx_gain_ctrl_bb2</strong> (<em>int</em><em> (</em><em>hexadecimal</em><em>)</em><em>, </em><em>optional</em>) – sets the second rx gain for the I,Q according to: I[0:3]:[0,1,3,7,F]:-6:0 dB, 4 steps; Q[0:3]:[0,1,3,7,F]:-6:0 dB, 4 steps, defaults to 0x00</p></li>
<li><p><strong>rx_gain_ctrl_bb3</strong> (<em>int</em><em> (</em><em>hexadecimal</em><em>)</em><em>, </em><em>optional</em>) – sets the third rx gain for the I,Q according to: I[0:3]:[0,1,3,7,F]:-6:0 dB, 4 steps; Q[0:3]:[0,1,3,7,F]:-6:0 dB, 4 steps, defaults to 0x99</p></li>
<li><p><strong>rx_gain_ctrl_bfrf</strong> (<em>int</em><em> (</em><em>hex</em><em>)</em><em>, </em><em>optional</em>) – sets gain after the mixer according to; [0:3,RF gain]: 0-15 dB, 16 steps; [4:7, BF gain]: 0-15 dB, 16 steps, defaults to 0xFF</p></li>
<li><p><strong>carrier_freq</strong> (<em>int</em><em> , </em><em>optional</em>) – carrier frequency from the available frequency range for the Sivers EVK 06002/3 (in this case: 57-71 GHz), defaults to 57.51e9</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.RFSoCRemoteControlFromHost.start_thread_receive_meas_data">
<span class="sig-name descname"><span class="pre">start_thread_receive_meas_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg_data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.RFSoCRemoteControlFromHost.start_thread_receive_meas_data" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Creates and starts the rfsoc thread.</p>
<p>A thread -instead of a subprocess- is good enough since the computational expense of the task is not donde in the host computer but in the RFSoC. The host just reads the data through Ethernet.</p>
<p>A new thread is started each time this function is called. It is required for the developer to call ‘stop_thread_receive_meas_data’ before calling again this function in order to close the actual thread before creating a new one.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>msg_data</strong> (<em>dict</em>) – dictionary containing the parameters required by <code class="docutils literal notranslate"><span class="pre">set_rx_rf</span></code> to set a Sivers EVK configuration.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.RFSoCRemoteControlFromHost.stop_thread_receive_meas_data">
<span class="sig-name descname"><span class="pre">stop_thread_receive_meas_data</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.RFSoCRemoteControlFromHost.stop_thread_receive_meas_data" title="Link to this definition">#</a></dt>
<dd><p>Stops the rfsoc thread and saves remaining CIRs.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a2gmeasurements.RFSoCRemoteControlFromHost.transmit_signal">
<span class="sig-name descname"><span class="pre">transmit_signal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tx_bb_gain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tx_bb_phase</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tx_bb_iq_gain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">119</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tx_bfrf_gain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">64</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">carrier_freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">57510000000.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a2gmeasurements.RFSoCRemoteControlFromHost.transmit_signal" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Sets Tx gains and frequency of operation. Wrapper function of <code class="docutils literal notranslate"><span class="pre">send_cmd</span></code>.</p>
<p>More about TX gains is found in the Sivers EVK manual/reference guides.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tx_bb_gain</strong> (<em>int</em><em> (</em><em>hexadecimal</em><em>)</em><em>, </em><em>optional</em>) – sets baseband gain according to: 0x00  = 0 dB, 0x01  = 3.5 dB, 0x02  = 3.5 dB, 0x03  = 6 dB (when sivers register tx_ctrl bit 3 (BB Ibias set) = 1), defaults to 0x3</p></li>
<li><p><strong>tx_bb_phase</strong> (<em>int</em><em>, </em><em>optional</em>) – _description_, defaults to 0</p></li>
<li><p><strong>tx_bb_iq_gain</strong> (<em>int</em><em> (</em><em>hexadecimal</em><em>)</em><em>, </em><em>optional</em>) – sets baseband I, Q gain according to: [0:3, I gain]: 0-6 dB, 16 steps; [4:7, Q gain]: 0-6 dB, 16 steps, defaults to 0x77</p></li>
<li><p><strong>tx_bfrf_gain</strong> (<em>int</em><em> (</em><em>hexadecimal</em><em>)</em><em>, </em><em>optional</em>) – sets gain after RF mixer according to: [0:3, RF gain]: 0-15 dB, 16 steps; [4:7, BF gain]: 0-15 dB, 16 steps, defaults to 0x40</p></li>
<li><p><strong>carrier_freq</strong> (<em>int</em><em>, </em><em>optional</em>) – carrier frequency from the available frequency range for the Sivers EVK 06002/3 (in this case: 57-71 GHz), defaults to 57.51e9</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Julian D. Villegas G.
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">A2GMeasurements</a><ul>
<li><a class="reference internal" href="#quick-definitions-for-documentation">Quick definitions for documentation</a></li>
<li><a class="reference internal" href="#use">Use</a></li>
<li><a class="reference internal" href="#api">API</a><ul>
<li><a class="reference internal" href="#a2gmeasurements.GimbalRS2"><code class="docutils literal notranslate"><span class="pre">GimbalRS2</span></code></a><ul>
<li><a class="reference internal" href="#a2gmeasurements.GimbalRS2.__init__"><code class="docutils literal notranslate"><span class="pre">GimbalRS2.__init__()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalRS2.assemble_can_msg"><code class="docutils literal notranslate"><span class="pre">GimbalRS2.assemble_can_msg()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalRS2.can_buffer_to_full_frame"><code class="docutils literal notranslate"><span class="pre">GimbalRS2.can_buffer_to_full_frame()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalRS2.can_callback"><code class="docutils literal notranslate"><span class="pre">GimbalRS2.can_callback()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalRS2.parse_position_response"><code class="docutils literal notranslate"><span class="pre">GimbalRS2.parse_position_response()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalRS2.receive"><code class="docutils literal notranslate"><span class="pre">GimbalRS2.receive()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalRS2.request_current_position"><code class="docutils literal notranslate"><span class="pre">GimbalRS2.request_current_position()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalRS2.send_cmd"><code class="docutils literal notranslate"><span class="pre">GimbalRS2.send_cmd()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalRS2.send_data"><code class="docutils literal notranslate"><span class="pre">GimbalRS2.send_data()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalRS2.seq_num"><code class="docutils literal notranslate"><span class="pre">GimbalRS2.seq_num()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalRS2.setPosControl"><code class="docutils literal notranslate"><span class="pre">GimbalRS2.setPosControl()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalRS2.setSpeedControl"><code class="docutils literal notranslate"><span class="pre">GimbalRS2.setSpeedControl()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalRS2.start_thread_gimbal"><code class="docutils literal notranslate"><span class="pre">GimbalRS2.start_thread_gimbal()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalRS2.stop_thread_gimbal"><code class="docutils literal notranslate"><span class="pre">GimbalRS2.stop_thread_gimbal()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalRS2.validate_api_call"><code class="docutils literal notranslate"><span class="pre">GimbalRS2.validate_api_call()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2gmeasurements.GpsSignaling"><code class="docutils literal notranslate"><span class="pre">GpsSignaling</span></code></a><ul>
<li><a class="reference internal" href="#a2gmeasurements.GpsSignaling.__init__"><code class="docutils literal notranslate"><span class="pre">GpsSignaling.__init__()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GpsSignaling.check_coord_closeness"><code class="docutils literal notranslate"><span class="pre">GpsSignaling.check_coord_closeness()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GpsSignaling.get_last_sbf_buffer_info"><code class="docutils literal notranslate"><span class="pre">GpsSignaling.get_last_sbf_buffer_info()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GpsSignaling.parse_septentrio_msg"><code class="docutils literal notranslate"><span class="pre">GpsSignaling.parse_septentrio_msg()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GpsSignaling.process_atteuler_sbf_data"><code class="docutils literal notranslate"><span class="pre">GpsSignaling.process_atteuler_sbf_data()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GpsSignaling.process_gps_nmea_data"><code class="docutils literal notranslate"><span class="pre">GpsSignaling.process_gps_nmea_data()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GpsSignaling.process_pvtcart_sbf_data"><code class="docutils literal notranslate"><span class="pre">GpsSignaling.process_pvtcart_sbf_data()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GpsSignaling.process_pvtgeodetic_sbf_data"><code class="docutils literal notranslate"><span class="pre">GpsSignaling.process_pvtgeodetic_sbf_data()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GpsSignaling.sendCommandGps"><code class="docutils literal notranslate"><span class="pre">GpsSignaling.sendCommandGps()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GpsSignaling.serial_connect"><code class="docutils literal notranslate"><span class="pre">GpsSignaling.serial_connect()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GpsSignaling.serial_receive"><code class="docutils literal notranslate"><span class="pre">GpsSignaling.serial_receive()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GpsSignaling.start_gps_data_retrieval"><code class="docutils literal notranslate"><span class="pre">GpsSignaling.start_gps_data_retrieval()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GpsSignaling.start_thread_gps"><code class="docutils literal notranslate"><span class="pre">GpsSignaling.start_thread_gps()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GpsSignaling.stop_gps_data_retrieval"><code class="docutils literal notranslate"><span class="pre">GpsSignaling.stop_gps_data_retrieval()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GpsSignaling.stop_thread_gps"><code class="docutils literal notranslate"><span class="pre">GpsSignaling.stop_thread_gps()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2gmeasurements.myAnritsuSpectrumAnalyzer"><code class="docutils literal notranslate"><span class="pre">myAnritsuSpectrumAnalyzer</span></code></a><ul>
<li><a class="reference internal" href="#a2gmeasurements.myAnritsuSpectrumAnalyzer.__init__"><code class="docutils literal notranslate"><span class="pre">myAnritsuSpectrumAnalyzer.__init__()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.myAnritsuSpectrumAnalyzer.retrieve_max_pow"><code class="docutils literal notranslate"><span class="pre">myAnritsuSpectrumAnalyzer.retrieve_max_pow()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.myAnritsuSpectrumAnalyzer.spectrum_analyzer_close"><code class="docutils literal notranslate"><span class="pre">myAnritsuSpectrumAnalyzer.spectrum_analyzer_close()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.myAnritsuSpectrumAnalyzer.spectrum_analyzer_connect"><code class="docutils literal notranslate"><span class="pre">myAnritsuSpectrumAnalyzer.spectrum_analyzer_connect()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2gmeasurements.HelperA2GMeasurements"><code class="docutils literal notranslate"><span class="pre">HelperA2GMeasurements</span></code></a><ul>
<li><a class="reference internal" href="#a2gmeasurements.HelperA2GMeasurements.HelperA2GStopCom"><code class="docutils literal notranslate"><span class="pre">HelperA2GMeasurements.HelperA2GStopCom()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.HelperA2GMeasurements.HelperStartA2GCom"><code class="docutils literal notranslate"><span class="pre">HelperA2GMeasurements.HelperStartA2GCom()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.HelperA2GMeasurements.__init__"><code class="docutils literal notranslate"><span class="pre">HelperA2GMeasurements.__init__()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.HelperA2GMeasurements.decode_message"><code class="docutils literal notranslate"><span class="pre">HelperA2GMeasurements.decode_message()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.HelperA2GMeasurements.do_closed_gui_action"><code class="docutils literal notranslate"><span class="pre">HelperA2GMeasurements.do_closed_gui_action()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.HelperA2GMeasurements.do_finish_meas_drone_rfsoc"><code class="docutils literal notranslate"><span class="pre">HelperA2GMeasurements.do_finish_meas_drone_rfsoc()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.HelperA2GMeasurements.do_follow_mode_gimbal"><code class="docutils literal notranslate"><span class="pre">HelperA2GMeasurements.do_follow_mode_gimbal()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.HelperA2GMeasurements.do_getgps_action"><code class="docutils literal notranslate"><span class="pre">HelperA2GMeasurements.do_getgps_action()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.HelperA2GMeasurements.do_set_irf_action"><code class="docutils literal notranslate"><span class="pre">HelperA2GMeasurements.do_set_irf_action()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.HelperA2GMeasurements.do_set_remote_fm_flag"><code class="docutils literal notranslate"><span class="pre">HelperA2GMeasurements.do_set_remote_fm_flag()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.HelperA2GMeasurements.do_set_remote_stop_fm"><code class="docutils literal notranslate"><span class="pre">HelperA2GMeasurements.do_set_remote_stop_fm()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.HelperA2GMeasurements.do_setgimbal_action"><code class="docutils literal notranslate"><span class="pre">HelperA2GMeasurements.do_setgimbal_action()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.HelperA2GMeasurements.do_start_meas_drone_rfsoc"><code class="docutils literal notranslate"><span class="pre">HelperA2GMeasurements.do_start_meas_drone_rfsoc()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.HelperA2GMeasurements.do_stop_meas_drone_rfsoc"><code class="docutils literal notranslate"><span class="pre">HelperA2GMeasurements.do_stop_meas_drone_rfsoc()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.HelperA2GMeasurements.encode_message"><code class="docutils literal notranslate"><span class="pre">HelperA2GMeasurements.encode_message()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.HelperA2GMeasurements.gimbal_follows_drone"><code class="docutils literal notranslate"><span class="pre">HelperA2GMeasurements.gimbal_follows_drone()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.HelperA2GMeasurements.process_answer_get_gps"><code class="docutils literal notranslate"><span class="pre">HelperA2GMeasurements.process_answer_get_gps()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.HelperA2GMeasurements.socket_receive"><code class="docutils literal notranslate"><span class="pre">HelperA2GMeasurements.socket_receive()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.HelperA2GMeasurements.socket_send_cmd"><code class="docutils literal notranslate"><span class="pre">HelperA2GMeasurements.socket_send_cmd()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalGremsyH16"><code class="docutils literal notranslate"><span class="pre">GimbalGremsyH16</span></code></a><ul>
<li><a class="reference internal" href="#a2gmeasurements.GimbalGremsyH16.__init__"><code class="docutils literal notranslate"><span class="pre">GimbalGremsyH16.__init__()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalGremsyH16.change_gimbal_mode"><code class="docutils literal notranslate"><span class="pre">GimbalGremsyH16.change_gimbal_mode()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalGremsyH16.control_power_motors"><code class="docutils literal notranslate"><span class="pre">GimbalGremsyH16.control_power_motors()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalGremsyH16.define_home_position"><code class="docutils literal notranslate"><span class="pre">GimbalGremsyH16.define_home_position()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalGremsyH16.fit_model_to_gimbal_angular_data"><code class="docutils literal notranslate"><span class="pre">GimbalGremsyH16.fit_model_to_gimbal_angular_data()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalGremsyH16.gremsy_angle"><code class="docutils literal notranslate"><span class="pre">GimbalGremsyH16.gremsy_angle()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalGremsyH16.load_measured_data_august_2023"><code class="docutils literal notranslate"><span class="pre">GimbalGremsyH16.load_measured_data_august_2023()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalGremsyH16.load_measured_data_july_2023"><code class="docutils literal notranslate"><span class="pre">GimbalGremsyH16.load_measured_data_july_2023()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalGremsyH16.load_measured_drifts"><code class="docutils literal notranslate"><span class="pre">GimbalGremsyH16.load_measured_drifts()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalGremsyH16.plot_linear_reg_on_near_domain"><code class="docutils literal notranslate"><span class="pre">GimbalGremsyH16.plot_linear_reg_on_near_domain()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalGremsyH16.receive_imu_data"><code class="docutils literal notranslate"><span class="pre">GimbalGremsyH16.receive_imu_data()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalGremsyH16.setPosControl"><code class="docutils literal notranslate"><span class="pre">GimbalGremsyH16.setPosControl()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalGremsyH16.setPosControlGPModel"><code class="docutils literal notranslate"><span class="pre">GimbalGremsyH16.setPosControlGPModel()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalGremsyH16.start_imu_thread"><code class="docutils literal notranslate"><span class="pre">GimbalGremsyH16.start_imu_thread()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalGremsyH16.start_thread_gimbal"><code class="docutils literal notranslate"><span class="pre">GimbalGremsyH16.start_thread_gimbal()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalGremsyH16.stop_thread_gimbal"><code class="docutils literal notranslate"><span class="pre">GimbalGremsyH16.stop_thread_gimbal()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.GimbalGremsyH16.stop_thread_imu"><code class="docutils literal notranslate"><span class="pre">GimbalGremsyH16.stop_thread_imu()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2gmeasurements.SBUSEncoder"><code class="docutils literal notranslate"><span class="pre">SBUSEncoder</span></code></a><ul>
<li><a class="reference internal" href="#a2gmeasurements.SBUSEncoder.__init__"><code class="docutils literal notranslate"><span class="pre">SBUSEncoder.__init__()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.SBUSEncoder.change_mode"><code class="docutils literal notranslate"><span class="pre">SBUSEncoder.change_mode()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.SBUSEncoder.move_gimbal"><code class="docutils literal notranslate"><span class="pre">SBUSEncoder.move_gimbal()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.SBUSEncoder.not_move_command"><code class="docutils literal notranslate"><span class="pre">SBUSEncoder.not_move_command()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.SBUSEncoder.send_sbus_msg"><code class="docutils literal notranslate"><span class="pre">SBUSEncoder.send_sbus_msg()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.SBUSEncoder.set_channel"><code class="docutils literal notranslate"><span class="pre">SBUSEncoder.set_channel()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.SBUSEncoder.start_sbus"><code class="docutils literal notranslate"><span class="pre">SBUSEncoder.start_sbus()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.SBUSEncoder.stop_updating"><code class="docutils literal notranslate"><span class="pre">SBUSEncoder.stop_updating()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.SBUSEncoder.update_rest_state_channel"><code class="docutils literal notranslate"><span class="pre">SBUSEncoder.update_rest_state_channel()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#a2gmeasurements.RFSoCRemoteControlFromHost"><code class="docutils literal notranslate"><span class="pre">RFSoCRemoteControlFromHost</span></code></a><ul>
<li><a class="reference internal" href="#a2gmeasurements.RFSoCRemoteControlFromHost.__init__"><code class="docutils literal notranslate"><span class="pre">RFSoCRemoteControlFromHost.__init__()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.RFSoCRemoteControlFromHost.finish_measurement"><code class="docutils literal notranslate"><span class="pre">RFSoCRemoteControlFromHost.finish_measurement()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.RFSoCRemoteControlFromHost.pipeline_operations_rfsoc_rx_ndarray"><code class="docutils literal notranslate"><span class="pre">RFSoCRemoteControlFromHost.pipeline_operations_rfsoc_rx_ndarray()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.RFSoCRemoteControlFromHost.receive_signal_async"><code class="docutils literal notranslate"><span class="pre">RFSoCRemoteControlFromHost.receive_signal_async()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.RFSoCRemoteControlFromHost.save_hest_buffer"><code class="docutils literal notranslate"><span class="pre">RFSoCRemoteControlFromHost.save_hest_buffer()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.RFSoCRemoteControlFromHost.send_cmd"><code class="docutils literal notranslate"><span class="pre">RFSoCRemoteControlFromHost.send_cmd()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.RFSoCRemoteControlFromHost.set_rx_rf"><code class="docutils literal notranslate"><span class="pre">RFSoCRemoteControlFromHost.set_rx_rf()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.RFSoCRemoteControlFromHost.start_thread_receive_meas_data"><code class="docutils literal notranslate"><span class="pre">RFSoCRemoteControlFromHost.start_thread_receive_meas_data()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.RFSoCRemoteControlFromHost.stop_thread_receive_meas_data"><code class="docutils literal notranslate"><span class="pre">RFSoCRemoteControlFromHost.stop_thread_receive_meas_data()</span></code></a></li>
<li><a class="reference internal" href="#a2gmeasurements.RFSoCRemoteControlFromHost.transmit_signal"><code class="docutils literal notranslate"><span class="pre">RFSoCRemoteControlFromHost.transmit_signal()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=f2a433a1"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=32e29ea5"></script>
    </body>
</html>