
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../SBUSEncoder/">
      
      
        <link rel="next" href="../GUIsetupWin/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.10">
    
    
      
        <title>RFSoC communication - A2G Measurements Software</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e359304.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      
  
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
  
  <style>:root{--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.23 12.004a2.236 2.236 0 0 1-2.235 2.236 2.236 2.236 0 0 1-2.236-2.236 2.236 2.236 0 0 1 2.235-2.236 2.236 2.236 0 0 1 2.236 2.236zm2.648-10.69c-1.346 0-3.107.96-4.888 2.622-1.78-1.653-3.542-2.602-4.887-2.602-.41 0-.783.093-1.106.278-1.375.793-1.683 3.264-.973 6.365C1.98 8.917 0 10.42 0 12.004c0 1.59 1.99 3.097 5.043 4.03-.704 3.113-.39 5.588.988 6.38.32.187.69.275 1.102.275 1.345 0 3.107-.96 4.888-2.624 1.78 1.654 3.542 2.603 4.887 2.603.41 0 .783-.09 1.106-.275 1.374-.792 1.683-3.263.973-6.365C22.02 15.096 24 13.59 24 12.004c0-1.59-1.99-3.097-5.043-4.032.704-3.11.39-5.587-.988-6.38a2.167 2.167 0 0 0-1.092-.278zm-.005 1.09v.006c.225 0 .406.044.558.127.666.382.955 1.835.73 3.704-.054.46-.142.945-.25 1.44a23.476 23.476 0 0 0-3.107-.534A23.892 23.892 0 0 0 12.769 4.7c1.592-1.48 3.087-2.292 4.105-2.295zm-9.77.02c1.012 0 2.514.808 4.11 2.28-.686.72-1.37 1.537-2.02 2.442a22.73 22.73 0 0 0-3.113.538 15.02 15.02 0 0 1-.254-1.42c-.23-1.868.054-3.32.714-3.707.19-.09.4-.127.563-.132zm4.882 3.05c.455.468.91.992 1.36 1.564-.44-.02-.89-.034-1.345-.034-.46 0-.915.01-1.36.034.44-.572.895-1.096 1.345-1.565zM12 8.1c.74 0 1.477.034 2.202.093.406.582.802 1.203 1.183 1.86.372.64.71 1.29 1.018 1.946-.308.655-.646 1.31-1.013 1.95-.38.66-.773 1.288-1.18 1.87a25.64 25.64 0 0 1-4.412.005 26.64 26.64 0 0 1-1.183-1.86c-.372-.64-.71-1.29-1.018-1.946a25.17 25.17 0 0 1 1.013-1.954c.38-.66.773-1.286 1.18-1.868A25.245 25.245 0 0 1 12 8.098zm-3.635.254c-.24.377-.48.763-.704 1.16-.225.39-.435.782-.635 1.174-.265-.656-.49-1.31-.676-1.947.64-.15 1.315-.283 2.015-.386zm7.26 0c.695.103 1.365.23 2.006.387-.18.632-.405 1.282-.66 1.933a25.952 25.952 0 0 0-1.345-2.32zm3.063.675c.484.15.944.317 1.375.498 1.732.74 2.852 1.708 2.852 2.476-.005.768-1.125 1.74-2.857 2.475-.42.18-.88.342-1.355.493a23.966 23.966 0 0 0-1.1-2.98c.45-1.017.81-2.01 1.085-2.964zm-13.395.004c.278.96.645 1.957 1.1 2.98a23.142 23.142 0 0 0-1.086 2.964c-.484-.15-.944-.318-1.37-.5-1.732-.737-2.852-1.706-2.852-2.474 0-.768 1.12-1.742 2.852-2.476.42-.18.88-.342 1.356-.494zm11.678 4.28c.265.657.49 1.312.676 1.948-.64.157-1.316.29-2.016.39a25.819 25.819 0 0 0 1.341-2.338zm-9.945.02c.2.392.41.783.64 1.175.23.39.465.772.705 1.143a22.005 22.005 0 0 1-2.006-.386c.18-.63.406-1.282.66-1.933zM17.92 16.32c.112.493.2.968.254 1.423.23 1.868-.054 3.32-.714 3.708-.147.09-.338.128-.563.128-1.012 0-2.514-.807-4.11-2.28.686-.72 1.37-1.536 2.02-2.44 1.107-.118 2.154-.3 3.113-.54zm-11.83.01c.96.234 2.006.415 3.107.532.66.905 1.345 1.727 2.035 2.446-1.595 1.483-3.092 2.295-4.11 2.295a1.185 1.185 0 0 1-.553-.132c-.666-.38-.955-1.834-.73-3.703.054-.46.142-.944.25-1.438zm4.56.64c.44.02.89.034 1.345.034.46 0 .915-.01 1.36-.034-.44.572-.895 1.095-1.345 1.565-.455-.47-.91-.993-1.36-1.565z"/></svg>');--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.25.18.9.2.73.26.59.3.45.32.34.34.25.34.16.33.1.3.04.26.02.2-.01.13V8.5l-.05.63-.13.55-.21.46-.26.38-.3.31-.33.25-.35.19-.35.14-.33.1-.3.07-.26.04-.21.02H8.77l-.69.05-.59.14-.5.22-.41.27-.33.32-.27.35-.2.36-.15.37-.1.35-.07.32-.04.27-.02.21v3.06H3.17l-.21-.03-.28-.07-.32-.12-.35-.18-.36-.26-.36-.36-.35-.46-.32-.59-.28-.73-.21-.88-.14-1.05-.05-1.23.06-1.22.16-1.04.24-.87.32-.71.36-.57.4-.44.42-.33.42-.24.4-.16.36-.1.32-.05.24-.01h.16l.06.01h8.16v-.83H6.18l-.01-2.75-.02-.37.05-.34.11-.31.17-.28.25-.26.31-.23.38-.2.44-.18.51-.15.58-.12.64-.1.71-.06.77-.04.84-.02 1.27.05zm-6.3 1.98-.23.33-.08.41.08.41.23.34.33.22.41.09.41-.09.33-.22.23-.34.08-.41-.08-.41-.23-.33-.33-.22-.41-.09-.41.09zm13.09 3.95.28.06.32.12.35.18.36.27.36.35.35.47.32.59.28.73.21.88.14 1.04.05 1.23-.06 1.23-.16 1.04-.24.86-.32.71-.36.57-.4.45-.42.33-.42.24-.4.16-.36.09-.32.05-.24.02-.16-.01h-8.22v.82h5.84l.01 2.76.02.36-.05.34-.11.31-.17.29-.25.25-.31.24-.38.2-.44.17-.51.15-.58.13-.64.09-.71.07-.77.04-.84.01-1.27-.04-1.07-.14-.9-.2-.73-.25-.59-.3-.45-.33-.34-.34-.25-.34-.16-.33-.1-.3-.04-.25-.02-.2.01-.13v-5.34l.05-.64.13-.54.21-.46.26-.38.3-.32.33-.24.35-.2.35-.14.33-.1.3-.06.26-.04.21-.02.13-.01h5.84l.69-.05.59-.14.5-.21.41-.28.33-.32.27-.35.2-.36.15-.36.1-.35.07-.32.04-.28.02-.21V6.07h2.09l.14.01zm-6.47 14.25-.23.33-.08.41.08.41.23.33.33.23.41.08.41-.08.33-.23.23-.33.08-.41-.08-.41-.23-.33-.33-.23-.41-.08-.41.08z"/></svg>');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M1.5 0h21l-1.91 21.563L11.977 24l-8.564-2.438L1.5 0zm7.031 9.75-.232-2.718 10.059.003.23-2.622L5.412 4.41l.698 8.01h9.126l-.326 3.426-2.91.804-2.955-.81-.188-2.11H6.248l.33 4.171L12 19.351l5.379-1.443.744-8.157H8.531z"/></svg>');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M1.5 0h21l-1.91 21.563L11.977 24l-8.565-2.438L1.5 0zm17.09 4.413L5.41 4.41l.213 2.622 10.125.002-.255 2.716h-6.64l.24 2.573h6.182l-.366 3.523-2.91.804-2.956-.81-.188-2.11h-2.61l.29 3.855L12 19.288l5.373-1.53L18.59 4.414z"/></svg>');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0V0zm22.034 18.276c-.175-1.095-.888-2.015-3.003-2.873-.736-.345-1.554-.585-1.797-1.14-.091-.33-.105-.51-.046-.705.15-.646.915-.84 1.515-.66.39.12.75.42.976.9 1.034-.676 1.034-.676 1.755-1.125-.27-.42-.404-.601-.586-.78-.63-.705-1.469-1.065-2.834-1.034l-.705.089c-.676.165-1.32.525-1.71 1.005-1.14 1.291-.811 3.541.569 4.471 1.365 1.02 3.361 1.244 3.616 2.205.24 1.17-.87 1.545-1.966 1.41-.811-.18-1.26-.586-1.755-1.336l-1.83 1.051c.21.48.45.689.81 1.109 1.74 1.756 6.09 1.666 6.871-1.004.029-.09.24-.705.074-1.65l.046.067zm-8.983-7.245h-2.248c0 1.938-.009 3.864-.009 5.805 0 1.232.063 2.363-.138 2.711-.33.689-1.18.601-1.566.48-.396-.196-.597-.466-.83-.855-.063-.105-.11-.196-.127-.196l-1.825 1.125c.305.63.75 1.172 1.324 1.517.855.51 2.004.675 3.207.405.783-.226 1.458-.691 1.811-1.411.51-.93.402-2.07.397-3.346.012-2.054 0-4.109 0-6.179l.004-.056z"/></svg>');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.546 10.93 13.067.452a1.55 1.55 0 0 0-2.188 0L8.708 2.627l2.76 2.76a1.838 1.838 0 0 1 2.327 2.341l2.658 2.66a1.838 1.838 0 0 1 1.9 3.039 1.837 1.837 0 0 1-2.6 0 1.846 1.846 0 0 1-.404-1.996L12.86 8.955v6.525c.176.086.342.203.488.348a1.848 1.848 0 0 1 0 2.6 1.844 1.844 0 0 1-2.609 0 1.834 1.834 0 0 1 0-2.598c.182-.18.387-.316.605-.406V8.835a1.834 1.834 0 0 1-.996-2.41L7.636 3.7.45 10.881c-.6.605-.6 1.584 0 2.189l10.48 10.477a1.545 1.545 0 0 0 2.186 0l10.43-10.43a1.544 1.544 0 0 0 0-2.187"/></svg>');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.181 2.974c.568 0 .923.463.792 1.035l-3.659 15.982c-.13.572-.697 1.035-1.265 1.035H.819c-.568 0-.923-.463-.792-1.035L3.686 4.009c.13-.572.697-1.035 1.265-1.035zm-8.375 9.346c.251-.394.227-.905-.09-1.243L9.122 5.125c-.38-.404-1.037-.407-1.466-.003-.429.402-.468 1.056-.088 1.46l4.662 4.96v.11l-7.42 5.374c-.45.327-.533.977-.187 1.453.346.476.991.597 1.44.27l8.229-5.91c.28-.196.438-.365.514-.52zm-2.796 4.399a.928.928 0 0 0-.934.923c0 .51.418.923.934.923h4.433a.928.928 0 0 0 .934-.923.928.928 0 0 0-.934-.923z"/></svg>');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.25.18.9.2.73.26.59.3.45.32.34.34.25.34.16.33.1.3.04.26.02.2-.01.13V8.5l-.05.63-.13.55-.21.46-.26.38-.3.31-.33.25-.35.19-.35.14-.33.1-.3.07-.26.04-.21.02H8.77l-.69.05-.59.14-.5.22-.41.27-.33.32-.27.35-.2.36-.15.37-.1.35-.07.32-.04.27-.02.21v3.06H3.17l-.21-.03-.28-.07-.32-.12-.35-.18-.36-.26-.36-.36-.35-.46-.32-.59-.28-.73-.21-.88-.14-1.05-.05-1.23.06-1.22.16-1.04.24-.87.32-.71.36-.57.4-.44.42-.33.42-.24.4-.16.36-.1.32-.05.24-.01h.16l.06.01h8.16v-.83H6.18l-.01-2.75-.02-.37.05-.34.11-.31.17-.28.25-.26.31-.23.38-.2.44-.18.51-.15.58-.12.64-.1.71-.06.77-.04.84-.02 1.27.05zm-6.3 1.98-.23.33-.08.41.08.41.23.34.33.22.41.09.41-.09.33-.22.23-.34.08-.41-.08-.41-.23-.33-.33-.22-.41-.09-.41.09zm13.09 3.95.28.06.32.12.35.18.36.27.36.35.35.47.32.59.28.73.21.88.14 1.04.05 1.23-.06 1.23-.16 1.04-.24.86-.32.71-.36.57-.4.45-.42.33-.42.24-.4.16-.36.09-.32.05-.24.02-.16-.01h-8.22v.82h5.84l.01 2.76.02.36-.05.34-.11.31-.17.29-.25.25-.31.24-.38.2-.44.17-.51.15-.58.13-.64.09-.71.07-.77.04-.84.01-1.27-.04-1.07-.14-.9-.2-.73-.25-.59-.3-.45-.33-.34-.34-.25-.34-.16-.33-.1-.3-.04-.25-.02-.2.01-.13v-5.34l.05-.64.13-.54.21-.46.26-.38.3-.32.33-.24.35-.2.35-.14.33-.1.3-.06.26-.04.21-.02.13-.01h5.84l.69-.05.59-.14.5-.21.41-.28.33-.32.27-.35.2-.36.15-.36.1-.35.07-.32.04-.28.02-.21V6.07h2.09l.14.01zm-6.47 14.25-.23.33-.08.41.08.41.23.33.33.23.41.08.41-.08.33-.23.23-.33.08-.41-.08-.41-.23-.33-.33-.23-.41-.08-.41.08z"/></svg>');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#communication-with-the-rfsoc" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="A2G Measurements Software" class="md-header__button md-logo" aria-label="A2G Measurements Software" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            A2G Measurements Software
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              RFSoC communication
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="lime" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../GettingStarted/" class="md-tabs__link">
        
  
    
  
  Installation

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../MeasurementSystem/" class="md-tabs__link">
          
  
  Measurement system

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../GuideForGUI/" class="md-tabs__link">
          
  
  Guide for using the GUI

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../Troubleshooting/" class="md-tabs__link">
        
  
    
  
  Troubleshooting

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../InfoDevelopers/" class="md-tabs__link">
        
  
    
  
  For developers

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../GimbalRS2/" class="md-tabs__link">
          
  
  API reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="A2G Measurements Software" class="md-nav__button md-logo" aria-label="A2G Measurements Software" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    A2G Measurements Software
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../GettingStarted/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Measurement system
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Measurement system
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../MeasurementSystem/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Devices and connections
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CommunicationProtocol/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Communication between nodes
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Guide for using the GUI
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Guide for using the GUI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../GuideForGUI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Operation of GUI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PanelsGUI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Panels in GUI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../GUIparameters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Parameters of GUI
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../InfoDevelopers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    For developers
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  <span class="md-ellipsis">
    API reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            API reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../GimbalRS2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DJI Ronin RS2 gimbal
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../GpsSignaling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Septentrio GPS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AnritsuSA/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Anritsu Spectrum Analyzer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../NodesCommunication/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Nodes communication
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../GimbalGremsyH16/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gremsy H16 gimbal
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SBUSEncoder/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SBUS encoder
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    RFSoC communication
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    RFSoC communication
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#a2gmeasurements.RFSoCRemoteControlFromHost" class="md-nav__link">
    <span class="md-ellipsis">
      RFSoCRemoteControlFromHost
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a2gmeasurements.RFSoCRemoteControlFromHost.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a2gmeasurements.RFSoCRemoteControlFromHost.finish_measurement" class="md-nav__link">
    <span class="md-ellipsis">
      finish_measurement
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a2gmeasurements.RFSoCRemoteControlFromHost.maximum_power_direction" class="md-nav__link">
    <span class="md-ellipsis">
      maximum_power_direction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a2gmeasurements.RFSoCRemoteControlFromHost.pipeline_operations_rfsoc_rx_ndarray" class="md-nav__link">
    <span class="md-ellipsis">
      pipeline_operations_rfsoc_rx_ndarray
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a2gmeasurements.RFSoCRemoteControlFromHost.receive_signal_async" class="md-nav__link">
    <span class="md-ellipsis">
      receive_signal_async
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a2gmeasurements.RFSoCRemoteControlFromHost.save_hest_buffer" class="md-nav__link">
    <span class="md-ellipsis">
      save_hest_buffer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a2gmeasurements.RFSoCRemoteControlFromHost.send_cmd" class="md-nav__link">
    <span class="md-ellipsis">
      send_cmd
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a2gmeasurements.RFSoCRemoteControlFromHost.set_rx_rf" class="md-nav__link">
    <span class="md-ellipsis">
      set_rx_rf
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a2gmeasurements.RFSoCRemoteControlFromHost.start_thread_receive_meas_data" class="md-nav__link">
    <span class="md-ellipsis">
      start_thread_receive_meas_data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a2gmeasurements.RFSoCRemoteControlFromHost.stop_thread_receive_meas_data" class="md-nav__link">
    <span class="md-ellipsis">
      stop_thread_receive_meas_data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a2gmeasurements.RFSoCRemoteControlFromHost.transmit_signal" class="md-nav__link">
    <span class="md-ellipsis">
      transmit_signal
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../GUIsetupWin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Graphical User Interface - Setup window
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../GUIwidgetGallery/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Graphical User Interface - Main window
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Utility functions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#a2gmeasurements.RFSoCRemoteControlFromHost" class="md-nav__link">
    <span class="md-ellipsis">
      RFSoCRemoteControlFromHost
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a2gmeasurements.RFSoCRemoteControlFromHost.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a2gmeasurements.RFSoCRemoteControlFromHost.finish_measurement" class="md-nav__link">
    <span class="md-ellipsis">
      finish_measurement
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a2gmeasurements.RFSoCRemoteControlFromHost.maximum_power_direction" class="md-nav__link">
    <span class="md-ellipsis">
      maximum_power_direction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a2gmeasurements.RFSoCRemoteControlFromHost.pipeline_operations_rfsoc_rx_ndarray" class="md-nav__link">
    <span class="md-ellipsis">
      pipeline_operations_rfsoc_rx_ndarray
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a2gmeasurements.RFSoCRemoteControlFromHost.receive_signal_async" class="md-nav__link">
    <span class="md-ellipsis">
      receive_signal_async
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a2gmeasurements.RFSoCRemoteControlFromHost.save_hest_buffer" class="md-nav__link">
    <span class="md-ellipsis">
      save_hest_buffer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a2gmeasurements.RFSoCRemoteControlFromHost.send_cmd" class="md-nav__link">
    <span class="md-ellipsis">
      send_cmd
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a2gmeasurements.RFSoCRemoteControlFromHost.set_rx_rf" class="md-nav__link">
    <span class="md-ellipsis">
      set_rx_rf
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a2gmeasurements.RFSoCRemoteControlFromHost.start_thread_receive_meas_data" class="md-nav__link">
    <span class="md-ellipsis">
      start_thread_receive_meas_data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a2gmeasurements.RFSoCRemoteControlFromHost.stop_thread_receive_meas_data" class="md-nav__link">
    <span class="md-ellipsis">
      stop_thread_receive_meas_data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a2gmeasurements.RFSoCRemoteControlFromHost.transmit_signal" class="md-nav__link">
    <span class="md-ellipsis">
      transmit_signal
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="communication-with-the-rfsoc">Communication with the RFSoC</h1>


<div class="doc doc-object doc-class">



<a id="a2gmeasurements.RFSoCRemoteControlFromHost"></a>
  <div class="doc doc-contents first">

  
      <p>Python class that implements all functionality for the communication between a host computer (client) and the RFSoC (server) connected through Ethernet to it. </p>
<p>Configures the antenna front end (Sivers EVK) parameters. The antenna front end is responsible for upconverting the frequency, beamforming and providing the physical interface with the air.</p>
<p>Implements the client side (host computer) functionality of the TCP connection. </p>
<p>Most of the methods of this class were developed by Panagiotis Skrimponis. They were integrated in a class and extended by Julian D. Villegas G.</p>

            <details class="quote">
              <summary>Source code in <code>a2gmeasurements.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3472">3472</a></span>
<span class="normal"><a href="#__codelineno-0-3473">3473</a></span>
<span class="normal"><a href="#__codelineno-0-3474">3474</a></span>
<span class="normal"><a href="#__codelineno-0-3475">3475</a></span>
<span class="normal"><a href="#__codelineno-0-3476">3476</a></span>
<span class="normal"><a href="#__codelineno-0-3477">3477</a></span>
<span class="normal"><a href="#__codelineno-0-3478">3478</a></span>
<span class="normal"><a href="#__codelineno-0-3479">3479</a></span>
<span class="normal"><a href="#__codelineno-0-3480">3480</a></span>
<span class="normal"><a href="#__codelineno-0-3481">3481</a></span>
<span class="normal"><a href="#__codelineno-0-3482">3482</a></span>
<span class="normal"><a href="#__codelineno-0-3483">3483</a></span>
<span class="normal"><a href="#__codelineno-0-3484">3484</a></span>
<span class="normal"><a href="#__codelineno-0-3485">3485</a></span>
<span class="normal"><a href="#__codelineno-0-3486">3486</a></span>
<span class="normal"><a href="#__codelineno-0-3487">3487</a></span>
<span class="normal"><a href="#__codelineno-0-3488">3488</a></span>
<span class="normal"><a href="#__codelineno-0-3489">3489</a></span>
<span class="normal"><a href="#__codelineno-0-3490">3490</a></span>
<span class="normal"><a href="#__codelineno-0-3491">3491</a></span>
<span class="normal"><a href="#__codelineno-0-3492">3492</a></span>
<span class="normal"><a href="#__codelineno-0-3493">3493</a></span>
<span class="normal"><a href="#__codelineno-0-3494">3494</a></span>
<span class="normal"><a href="#__codelineno-0-3495">3495</a></span>
<span class="normal"><a href="#__codelineno-0-3496">3496</a></span>
<span class="normal"><a href="#__codelineno-0-3497">3497</a></span>
<span class="normal"><a href="#__codelineno-0-3498">3498</a></span>
<span class="normal"><a href="#__codelineno-0-3499">3499</a></span>
<span class="normal"><a href="#__codelineno-0-3500">3500</a></span>
<span class="normal"><a href="#__codelineno-0-3501">3501</a></span>
<span class="normal"><a href="#__codelineno-0-3502">3502</a></span>
<span class="normal"><a href="#__codelineno-0-3503">3503</a></span>
<span class="normal"><a href="#__codelineno-0-3504">3504</a></span>
<span class="normal"><a href="#__codelineno-0-3505">3505</a></span>
<span class="normal"><a href="#__codelineno-0-3506">3506</a></span>
<span class="normal"><a href="#__codelineno-0-3507">3507</a></span>
<span class="normal"><a href="#__codelineno-0-3508">3508</a></span>
<span class="normal"><a href="#__codelineno-0-3509">3509</a></span>
<span class="normal"><a href="#__codelineno-0-3510">3510</a></span>
<span class="normal"><a href="#__codelineno-0-3511">3511</a></span>
<span class="normal"><a href="#__codelineno-0-3512">3512</a></span>
<span class="normal"><a href="#__codelineno-0-3513">3513</a></span>
<span class="normal"><a href="#__codelineno-0-3514">3514</a></span>
<span class="normal"><a href="#__codelineno-0-3515">3515</a></span>
<span class="normal"><a href="#__codelineno-0-3516">3516</a></span>
<span class="normal"><a href="#__codelineno-0-3517">3517</a></span>
<span class="normal"><a href="#__codelineno-0-3518">3518</a></span>
<span class="normal"><a href="#__codelineno-0-3519">3519</a></span>
<span class="normal"><a href="#__codelineno-0-3520">3520</a></span>
<span class="normal"><a href="#__codelineno-0-3521">3521</a></span>
<span class="normal"><a href="#__codelineno-0-3522">3522</a></span>
<span class="normal"><a href="#__codelineno-0-3523">3523</a></span>
<span class="normal"><a href="#__codelineno-0-3524">3524</a></span>
<span class="normal"><a href="#__codelineno-0-3525">3525</a></span>
<span class="normal"><a href="#__codelineno-0-3526">3526</a></span>
<span class="normal"><a href="#__codelineno-0-3527">3527</a></span>
<span class="normal"><a href="#__codelineno-0-3528">3528</a></span>
<span class="normal"><a href="#__codelineno-0-3529">3529</a></span>
<span class="normal"><a href="#__codelineno-0-3530">3530</a></span>
<span class="normal"><a href="#__codelineno-0-3531">3531</a></span>
<span class="normal"><a href="#__codelineno-0-3532">3532</a></span>
<span class="normal"><a href="#__codelineno-0-3533">3533</a></span>
<span class="normal"><a href="#__codelineno-0-3534">3534</a></span>
<span class="normal"><a href="#__codelineno-0-3535">3535</a></span>
<span class="normal"><a href="#__codelineno-0-3536">3536</a></span>
<span class="normal"><a href="#__codelineno-0-3537">3537</a></span>
<span class="normal"><a href="#__codelineno-0-3538">3538</a></span>
<span class="normal"><a href="#__codelineno-0-3539">3539</a></span>
<span class="normal"><a href="#__codelineno-0-3540">3540</a></span>
<span class="normal"><a href="#__codelineno-0-3541">3541</a></span>
<span class="normal"><a href="#__codelineno-0-3542">3542</a></span>
<span class="normal"><a href="#__codelineno-0-3543">3543</a></span>
<span class="normal"><a href="#__codelineno-0-3544">3544</a></span>
<span class="normal"><a href="#__codelineno-0-3545">3545</a></span>
<span class="normal"><a href="#__codelineno-0-3546">3546</a></span>
<span class="normal"><a href="#__codelineno-0-3547">3547</a></span>
<span class="normal"><a href="#__codelineno-0-3548">3548</a></span>
<span class="normal"><a href="#__codelineno-0-3549">3549</a></span>
<span class="normal"><a href="#__codelineno-0-3550">3550</a></span>
<span class="normal"><a href="#__codelineno-0-3551">3551</a></span>
<span class="normal"><a href="#__codelineno-0-3552">3552</a></span>
<span class="normal"><a href="#__codelineno-0-3553">3553</a></span>
<span class="normal"><a href="#__codelineno-0-3554">3554</a></span>
<span class="normal"><a href="#__codelineno-0-3555">3555</a></span>
<span class="normal"><a href="#__codelineno-0-3556">3556</a></span>
<span class="normal"><a href="#__codelineno-0-3557">3557</a></span>
<span class="normal"><a href="#__codelineno-0-3558">3558</a></span>
<span class="normal"><a href="#__codelineno-0-3559">3559</a></span>
<span class="normal"><a href="#__codelineno-0-3560">3560</a></span>
<span class="normal"><a href="#__codelineno-0-3561">3561</a></span>
<span class="normal"><a href="#__codelineno-0-3562">3562</a></span>
<span class="normal"><a href="#__codelineno-0-3563">3563</a></span>
<span class="normal"><a href="#__codelineno-0-3564">3564</a></span>
<span class="normal"><a href="#__codelineno-0-3565">3565</a></span>
<span class="normal"><a href="#__codelineno-0-3566">3566</a></span>
<span class="normal"><a href="#__codelineno-0-3567">3567</a></span>
<span class="normal"><a href="#__codelineno-0-3568">3568</a></span>
<span class="normal"><a href="#__codelineno-0-3569">3569</a></span>
<span class="normal"><a href="#__codelineno-0-3570">3570</a></span>
<span class="normal"><a href="#__codelineno-0-3571">3571</a></span>
<span class="normal"><a href="#__codelineno-0-3572">3572</a></span>
<span class="normal"><a href="#__codelineno-0-3573">3573</a></span>
<span class="normal"><a href="#__codelineno-0-3574">3574</a></span>
<span class="normal"><a href="#__codelineno-0-3575">3575</a></span>
<span class="normal"><a href="#__codelineno-0-3576">3576</a></span>
<span class="normal"><a href="#__codelineno-0-3577">3577</a></span>
<span class="normal"><a href="#__codelineno-0-3578">3578</a></span>
<span class="normal"><a href="#__codelineno-0-3579">3579</a></span>
<span class="normal"><a href="#__codelineno-0-3580">3580</a></span>
<span class="normal"><a href="#__codelineno-0-3581">3581</a></span>
<span class="normal"><a href="#__codelineno-0-3582">3582</a></span>
<span class="normal"><a href="#__codelineno-0-3583">3583</a></span>
<span class="normal"><a href="#__codelineno-0-3584">3584</a></span>
<span class="normal"><a href="#__codelineno-0-3585">3585</a></span>
<span class="normal"><a href="#__codelineno-0-3586">3586</a></span>
<span class="normal"><a href="#__codelineno-0-3587">3587</a></span>
<span class="normal"><a href="#__codelineno-0-3588">3588</a></span>
<span class="normal"><a href="#__codelineno-0-3589">3589</a></span>
<span class="normal"><a href="#__codelineno-0-3590">3590</a></span>
<span class="normal"><a href="#__codelineno-0-3591">3591</a></span>
<span class="normal"><a href="#__codelineno-0-3592">3592</a></span>
<span class="normal"><a href="#__codelineno-0-3593">3593</a></span>
<span class="normal"><a href="#__codelineno-0-3594">3594</a></span>
<span class="normal"><a href="#__codelineno-0-3595">3595</a></span>
<span class="normal"><a href="#__codelineno-0-3596">3596</a></span>
<span class="normal"><a href="#__codelineno-0-3597">3597</a></span>
<span class="normal"><a href="#__codelineno-0-3598">3598</a></span>
<span class="normal"><a href="#__codelineno-0-3599">3599</a></span>
<span class="normal"><a href="#__codelineno-0-3600">3600</a></span>
<span class="normal"><a href="#__codelineno-0-3601">3601</a></span>
<span class="normal"><a href="#__codelineno-0-3602">3602</a></span>
<span class="normal"><a href="#__codelineno-0-3603">3603</a></span>
<span class="normal"><a href="#__codelineno-0-3604">3604</a></span>
<span class="normal"><a href="#__codelineno-0-3605">3605</a></span>
<span class="normal"><a href="#__codelineno-0-3606">3606</a></span>
<span class="normal"><a href="#__codelineno-0-3607">3607</a></span>
<span class="normal"><a href="#__codelineno-0-3608">3608</a></span>
<span class="normal"><a href="#__codelineno-0-3609">3609</a></span>
<span class="normal"><a href="#__codelineno-0-3610">3610</a></span>
<span class="normal"><a href="#__codelineno-0-3611">3611</a></span>
<span class="normal"><a href="#__codelineno-0-3612">3612</a></span>
<span class="normal"><a href="#__codelineno-0-3613">3613</a></span>
<span class="normal"><a href="#__codelineno-0-3614">3614</a></span>
<span class="normal"><a href="#__codelineno-0-3615">3615</a></span>
<span class="normal"><a href="#__codelineno-0-3616">3616</a></span>
<span class="normal"><a href="#__codelineno-0-3617">3617</a></span>
<span class="normal"><a href="#__codelineno-0-3618">3618</a></span>
<span class="normal"><a href="#__codelineno-0-3619">3619</a></span>
<span class="normal"><a href="#__codelineno-0-3620">3620</a></span>
<span class="normal"><a href="#__codelineno-0-3621">3621</a></span>
<span class="normal"><a href="#__codelineno-0-3622">3622</a></span>
<span class="normal"><a href="#__codelineno-0-3623">3623</a></span>
<span class="normal"><a href="#__codelineno-0-3624">3624</a></span>
<span class="normal"><a href="#__codelineno-0-3625">3625</a></span>
<span class="normal"><a href="#__codelineno-0-3626">3626</a></span>
<span class="normal"><a href="#__codelineno-0-3627">3627</a></span>
<span class="normal"><a href="#__codelineno-0-3628">3628</a></span>
<span class="normal"><a href="#__codelineno-0-3629">3629</a></span>
<span class="normal"><a href="#__codelineno-0-3630">3630</a></span>
<span class="normal"><a href="#__codelineno-0-3631">3631</a></span>
<span class="normal"><a href="#__codelineno-0-3632">3632</a></span>
<span class="normal"><a href="#__codelineno-0-3633">3633</a></span>
<span class="normal"><a href="#__codelineno-0-3634">3634</a></span>
<span class="normal"><a href="#__codelineno-0-3635">3635</a></span>
<span class="normal"><a href="#__codelineno-0-3636">3636</a></span>
<span class="normal"><a href="#__codelineno-0-3637">3637</a></span>
<span class="normal"><a href="#__codelineno-0-3638">3638</a></span>
<span class="normal"><a href="#__codelineno-0-3639">3639</a></span>
<span class="normal"><a href="#__codelineno-0-3640">3640</a></span>
<span class="normal"><a href="#__codelineno-0-3641">3641</a></span>
<span class="normal"><a href="#__codelineno-0-3642">3642</a></span>
<span class="normal"><a href="#__codelineno-0-3643">3643</a></span>
<span class="normal"><a href="#__codelineno-0-3644">3644</a></span>
<span class="normal"><a href="#__codelineno-0-3645">3645</a></span>
<span class="normal"><a href="#__codelineno-0-3646">3646</a></span>
<span class="normal"><a href="#__codelineno-0-3647">3647</a></span>
<span class="normal"><a href="#__codelineno-0-3648">3648</a></span>
<span class="normal"><a href="#__codelineno-0-3649">3649</a></span>
<span class="normal"><a href="#__codelineno-0-3650">3650</a></span>
<span class="normal"><a href="#__codelineno-0-3651">3651</a></span>
<span class="normal"><a href="#__codelineno-0-3652">3652</a></span>
<span class="normal"><a href="#__codelineno-0-3653">3653</a></span>
<span class="normal"><a href="#__codelineno-0-3654">3654</a></span>
<span class="normal"><a href="#__codelineno-0-3655">3655</a></span>
<span class="normal"><a href="#__codelineno-0-3656">3656</a></span>
<span class="normal"><a href="#__codelineno-0-3657">3657</a></span>
<span class="normal"><a href="#__codelineno-0-3658">3658</a></span>
<span class="normal"><a href="#__codelineno-0-3659">3659</a></span>
<span class="normal"><a href="#__codelineno-0-3660">3660</a></span>
<span class="normal"><a href="#__codelineno-0-3661">3661</a></span>
<span class="normal"><a href="#__codelineno-0-3662">3662</a></span>
<span class="normal"><a href="#__codelineno-0-3663">3663</a></span>
<span class="normal"><a href="#__codelineno-0-3664">3664</a></span>
<span class="normal"><a href="#__codelineno-0-3665">3665</a></span>
<span class="normal"><a href="#__codelineno-0-3666">3666</a></span>
<span class="normal"><a href="#__codelineno-0-3667">3667</a></span>
<span class="normal"><a href="#__codelineno-0-3668">3668</a></span>
<span class="normal"><a href="#__codelineno-0-3669">3669</a></span>
<span class="normal"><a href="#__codelineno-0-3670">3670</a></span>
<span class="normal"><a href="#__codelineno-0-3671">3671</a></span>
<span class="normal"><a href="#__codelineno-0-3672">3672</a></span>
<span class="normal"><a href="#__codelineno-0-3673">3673</a></span>
<span class="normal"><a href="#__codelineno-0-3674">3674</a></span>
<span class="normal"><a href="#__codelineno-0-3675">3675</a></span>
<span class="normal"><a href="#__codelineno-0-3676">3676</a></span>
<span class="normal"><a href="#__codelineno-0-3677">3677</a></span>
<span class="normal"><a href="#__codelineno-0-3678">3678</a></span>
<span class="normal"><a href="#__codelineno-0-3679">3679</a></span>
<span class="normal"><a href="#__codelineno-0-3680">3680</a></span>
<span class="normal"><a href="#__codelineno-0-3681">3681</a></span>
<span class="normal"><a href="#__codelineno-0-3682">3682</a></span>
<span class="normal"><a href="#__codelineno-0-3683">3683</a></span>
<span class="normal"><a href="#__codelineno-0-3684">3684</a></span>
<span class="normal"><a href="#__codelineno-0-3685">3685</a></span>
<span class="normal"><a href="#__codelineno-0-3686">3686</a></span>
<span class="normal"><a href="#__codelineno-0-3687">3687</a></span>
<span class="normal"><a href="#__codelineno-0-3688">3688</a></span>
<span class="normal"><a href="#__codelineno-0-3689">3689</a></span>
<span class="normal"><a href="#__codelineno-0-3690">3690</a></span>
<span class="normal"><a href="#__codelineno-0-3691">3691</a></span>
<span class="normal"><a href="#__codelineno-0-3692">3692</a></span>
<span class="normal"><a href="#__codelineno-0-3693">3693</a></span>
<span class="normal"><a href="#__codelineno-0-3694">3694</a></span>
<span class="normal"><a href="#__codelineno-0-3695">3695</a></span>
<span class="normal"><a href="#__codelineno-0-3696">3696</a></span>
<span class="normal"><a href="#__codelineno-0-3697">3697</a></span>
<span class="normal"><a href="#__codelineno-0-3698">3698</a></span>
<span class="normal"><a href="#__codelineno-0-3699">3699</a></span>
<span class="normal"><a href="#__codelineno-0-3700">3700</a></span>
<span class="normal"><a href="#__codelineno-0-3701">3701</a></span>
<span class="normal"><a href="#__codelineno-0-3702">3702</a></span>
<span class="normal"><a href="#__codelineno-0-3703">3703</a></span>
<span class="normal"><a href="#__codelineno-0-3704">3704</a></span>
<span class="normal"><a href="#__codelineno-0-3705">3705</a></span>
<span class="normal"><a href="#__codelineno-0-3706">3706</a></span>
<span class="normal"><a href="#__codelineno-0-3707">3707</a></span>
<span class="normal"><a href="#__codelineno-0-3708">3708</a></span>
<span class="normal"><a href="#__codelineno-0-3709">3709</a></span>
<span class="normal"><a href="#__codelineno-0-3710">3710</a></span>
<span class="normal"><a href="#__codelineno-0-3711">3711</a></span>
<span class="normal"><a href="#__codelineno-0-3712">3712</a></span>
<span class="normal"><a href="#__codelineno-0-3713">3713</a></span>
<span class="normal"><a href="#__codelineno-0-3714">3714</a></span>
<span class="normal"><a href="#__codelineno-0-3715">3715</a></span>
<span class="normal"><a href="#__codelineno-0-3716">3716</a></span>
<span class="normal"><a href="#__codelineno-0-3717">3717</a></span>
<span class="normal"><a href="#__codelineno-0-3718">3718</a></span>
<span class="normal"><a href="#__codelineno-0-3719">3719</a></span>
<span class="normal"><a href="#__codelineno-0-3720">3720</a></span>
<span class="normal"><a href="#__codelineno-0-3721">3721</a></span>
<span class="normal"><a href="#__codelineno-0-3722">3722</a></span>
<span class="normal"><a href="#__codelineno-0-3723">3723</a></span>
<span class="normal"><a href="#__codelineno-0-3724">3724</a></span>
<span class="normal"><a href="#__codelineno-0-3725">3725</a></span>
<span class="normal"><a href="#__codelineno-0-3726">3726</a></span>
<span class="normal"><a href="#__codelineno-0-3727">3727</a></span>
<span class="normal"><a href="#__codelineno-0-3728">3728</a></span>
<span class="normal"><a href="#__codelineno-0-3729">3729</a></span>
<span class="normal"><a href="#__codelineno-0-3730">3730</a></span>
<span class="normal"><a href="#__codelineno-0-3731">3731</a></span>
<span class="normal"><a href="#__codelineno-0-3732">3732</a></span>
<span class="normal"><a href="#__codelineno-0-3733">3733</a></span>
<span class="normal"><a href="#__codelineno-0-3734">3734</a></span>
<span class="normal"><a href="#__codelineno-0-3735">3735</a></span>
<span class="normal"><a href="#__codelineno-0-3736">3736</a></span>
<span class="normal"><a href="#__codelineno-0-3737">3737</a></span>
<span class="normal"><a href="#__codelineno-0-3738">3738</a></span>
<span class="normal"><a href="#__codelineno-0-3739">3739</a></span>
<span class="normal"><a href="#__codelineno-0-3740">3740</a></span>
<span class="normal"><a href="#__codelineno-0-3741">3741</a></span>
<span class="normal"><a href="#__codelineno-0-3742">3742</a></span>
<span class="normal"><a href="#__codelineno-0-3743">3743</a></span>
<span class="normal"><a href="#__codelineno-0-3744">3744</a></span>
<span class="normal"><a href="#__codelineno-0-3745">3745</a></span>
<span class="normal"><a href="#__codelineno-0-3746">3746</a></span>
<span class="normal"><a href="#__codelineno-0-3747">3747</a></span>
<span class="normal"><a href="#__codelineno-0-3748">3748</a></span>
<span class="normal"><a href="#__codelineno-0-3749">3749</a></span>
<span class="normal"><a href="#__codelineno-0-3750">3750</a></span>
<span class="normal"><a href="#__codelineno-0-3751">3751</a></span>
<span class="normal"><a href="#__codelineno-0-3752">3752</a></span>
<span class="normal"><a href="#__codelineno-0-3753">3753</a></span>
<span class="normal"><a href="#__codelineno-0-3754">3754</a></span>
<span class="normal"><a href="#__codelineno-0-3755">3755</a></span>
<span class="normal"><a href="#__codelineno-0-3756">3756</a></span>
<span class="normal"><a href="#__codelineno-0-3757">3757</a></span>
<span class="normal"><a href="#__codelineno-0-3758">3758</a></span>
<span class="normal"><a href="#__codelineno-0-3759">3759</a></span>
<span class="normal"><a href="#__codelineno-0-3760">3760</a></span>
<span class="normal"><a href="#__codelineno-0-3761">3761</a></span>
<span class="normal"><a href="#__codelineno-0-3762">3762</a></span>
<span class="normal"><a href="#__codelineno-0-3763">3763</a></span>
<span class="normal"><a href="#__codelineno-0-3764">3764</a></span>
<span class="normal"><a href="#__codelineno-0-3765">3765</a></span>
<span class="normal"><a href="#__codelineno-0-3766">3766</a></span>
<span class="normal"><a href="#__codelineno-0-3767">3767</a></span>
<span class="normal"><a href="#__codelineno-0-3768">3768</a></span>
<span class="normal"><a href="#__codelineno-0-3769">3769</a></span>
<span class="normal"><a href="#__codelineno-0-3770">3770</a></span>
<span class="normal"><a href="#__codelineno-0-3771">3771</a></span>
<span class="normal"><a href="#__codelineno-0-3772">3772</a></span>
<span class="normal"><a href="#__codelineno-0-3773">3773</a></span>
<span class="normal"><a href="#__codelineno-0-3774">3774</a></span>
<span class="normal"><a href="#__codelineno-0-3775">3775</a></span>
<span class="normal"><a href="#__codelineno-0-3776">3776</a></span>
<span class="normal"><a href="#__codelineno-0-3777">3777</a></span>
<span class="normal"><a href="#__codelineno-0-3778">3778</a></span>
<span class="normal"><a href="#__codelineno-0-3779">3779</a></span>
<span class="normal"><a href="#__codelineno-0-3780">3780</a></span>
<span class="normal"><a href="#__codelineno-0-3781">3781</a></span>
<span class="normal"><a href="#__codelineno-0-3782">3782</a></span>
<span class="normal"><a href="#__codelineno-0-3783">3783</a></span>
<span class="normal"><a href="#__codelineno-0-3784">3784</a></span>
<span class="normal"><a href="#__codelineno-0-3785">3785</a></span>
<span class="normal"><a href="#__codelineno-0-3786">3786</a></span>
<span class="normal"><a href="#__codelineno-0-3787">3787</a></span>
<span class="normal"><a href="#__codelineno-0-3788">3788</a></span>
<span class="normal"><a href="#__codelineno-0-3789">3789</a></span>
<span class="normal"><a href="#__codelineno-0-3790">3790</a></span>
<span class="normal"><a href="#__codelineno-0-3791">3791</a></span>
<span class="normal"><a href="#__codelineno-0-3792">3792</a></span>
<span class="normal"><a href="#__codelineno-0-3793">3793</a></span>
<span class="normal"><a href="#__codelineno-0-3794">3794</a></span>
<span class="normal"><a href="#__codelineno-0-3795">3795</a></span>
<span class="normal"><a href="#__codelineno-0-3796">3796</a></span>
<span class="normal"><a href="#__codelineno-0-3797">3797</a></span>
<span class="normal"><a href="#__codelineno-0-3798">3798</a></span>
<span class="normal"><a href="#__codelineno-0-3799">3799</a></span>
<span class="normal"><a href="#__codelineno-0-3800">3800</a></span>
<span class="normal"><a href="#__codelineno-0-3801">3801</a></span>
<span class="normal"><a href="#__codelineno-0-3802">3802</a></span>
<span class="normal"><a href="#__codelineno-0-3803">3803</a></span>
<span class="normal"><a href="#__codelineno-0-3804">3804</a></span>
<span class="normal"><a href="#__codelineno-0-3805">3805</a></span>
<span class="normal"><a href="#__codelineno-0-3806">3806</a></span>
<span class="normal"><a href="#__codelineno-0-3807">3807</a></span>
<span class="normal"><a href="#__codelineno-0-3808">3808</a></span>
<span class="normal"><a href="#__codelineno-0-3809">3809</a></span>
<span class="normal"><a href="#__codelineno-0-3810">3810</a></span>
<span class="normal"><a href="#__codelineno-0-3811">3811</a></span>
<span class="normal"><a href="#__codelineno-0-3812">3812</a></span>
<span class="normal"><a href="#__codelineno-0-3813">3813</a></span>
<span class="normal"><a href="#__codelineno-0-3814">3814</a></span>
<span class="normal"><a href="#__codelineno-0-3815">3815</a></span>
<span class="normal"><a href="#__codelineno-0-3816">3816</a></span>
<span class="normal"><a href="#__codelineno-0-3817">3817</a></span>
<span class="normal"><a href="#__codelineno-0-3818">3818</a></span>
<span class="normal"><a href="#__codelineno-0-3819">3819</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-3472"><a id="__codelineno-0-3472" name="__codelineno-0-3472"></a><span class="k">class</span> <span class="nc">RFSoCRemoteControlFromHost</span><span class="p">():</span>
</span><span id="__span-0-3473"><a id="__codelineno-0-3473" name="__codelineno-0-3473"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-3474"><a id="__codelineno-0-3474" name="__codelineno-0-3474"></a><span class="sd">    Python class that implements all functionality for the communication between a host computer (client) and the RFSoC (server) connected through Ethernet to it. </span>
</span><span id="__span-0-3475"><a id="__codelineno-0-3475" name="__codelineno-0-3475"></a>
</span><span id="__span-0-3476"><a id="__codelineno-0-3476" name="__codelineno-0-3476"></a><span class="sd">    Configures the antenna front end (Sivers EVK) parameters. The antenna front end is responsible for upconverting the frequency, beamforming and providing the physical interface with the air.</span>
</span><span id="__span-0-3477"><a id="__codelineno-0-3477" name="__codelineno-0-3477"></a>
</span><span id="__span-0-3478"><a id="__codelineno-0-3478" name="__codelineno-0-3478"></a><span class="sd">    Implements the client side (host computer) functionality of the TCP connection. </span>
</span><span id="__span-0-3479"><a id="__codelineno-0-3479" name="__codelineno-0-3479"></a>
</span><span id="__span-0-3480"><a id="__codelineno-0-3480" name="__codelineno-0-3480"></a><span class="sd">    Most of the methods of this class were developed by Panagiotis Skrimponis. They were integrated in a class and extended by Julian D. Villegas G.</span>
</span><span id="__span-0-3481"><a id="__codelineno-0-3481" name="__codelineno-0-3481"></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-3482"><a id="__codelineno-0-3482" name="__codelineno-0-3482"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">radio_control_port</span><span class="o">=</span><span class="mi">8080</span><span class="p">,</span> <span class="n">radio_data_port</span><span class="o">=</span><span class="mi">8081</span><span class="p">,</span> <span class="n">rfsoc_static_ip_address</span><span class="o">=</span><span class="s1">&#39;10.1.1.40&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;PDAPs&#39;</span><span class="p">,</span> <span class="n">operating_freq</span><span class="o">=</span><span class="mf">57.51e9</span><span class="p">):</span>
</span><span id="__span-0-3483"><a id="__codelineno-0-3483" name="__codelineno-0-3483"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-3484"><a id="__codelineno-0-3484" name="__codelineno-0-3484"></a><span class="sd">        Creates two sockets: one for control commands and another for transfer data.</span>
</span><span id="__span-0-3485"><a id="__codelineno-0-3485" name="__codelineno-0-3485"></a>
</span><span id="__span-0-3486"><a id="__codelineno-0-3486" name="__codelineno-0-3486"></a><span class="sd">        Establish the connection between the client and the RFSoC.</span>
</span><span id="__span-0-3487"><a id="__codelineno-0-3487" name="__codelineno-0-3487"></a>
</span><span id="__span-0-3488"><a id="__codelineno-0-3488" name="__codelineno-0-3488"></a><span class="sd">        Some important attributes of this class are:</span>
</span><span id="__span-0-3489"><a id="__codelineno-0-3489" name="__codelineno-0-3489"></a>
</span><span id="__span-0-3490"><a id="__codelineno-0-3490" name="__codelineno-0-3490"></a><span class="sd">         1. ``beam_idx_for_vis``: this attribute sets the index of the beams of the measured Channel Impulse Response (CIR) that are sent from the drone node to the ground node to be displayed in the GUI.</span>
</span><span id="__span-0-3491"><a id="__codelineno-0-3491" name="__codelineno-0-3491"></a>
</span><span id="__span-0-3492"><a id="__codelineno-0-3492" name="__codelineno-0-3492"></a><span class="sd">         2. ``TIME_SNAPS_TO_SAVE``: number of CIR snapshots to collect before save them on disk.</span>
</span><span id="__span-0-3493"><a id="__codelineno-0-3493" name="__codelineno-0-3493"></a>
</span><span id="__span-0-3494"><a id="__codelineno-0-3494" name="__codelineno-0-3494"></a><span class="sd">         3. ``TIME_SNAPS_TO_VIS``: number of CIR snapshots to be displayed. This value is set depending on the max bytes that can be send through Ethernet in a single message (i.e. 22 time snaps * 16 beams * 4 bytes-per-PAP-entry = 1408 bytes)</span>
</span><span id="__span-0-3495"><a id="__codelineno-0-3495" name="__codelineno-0-3495"></a>
</span><span id="__span-0-3496"><a id="__codelineno-0-3496" name="__codelineno-0-3496"></a><span class="sd">         4. ``nbeams``: number of beams of the CIR to be retrieved from the server.</span>
</span><span id="__span-0-3497"><a id="__codelineno-0-3497" name="__codelineno-0-3497"></a>
</span><span id="__span-0-3498"><a id="__codelineno-0-3498" name="__codelineno-0-3498"></a><span class="sd">         5. ``nread``: number of delay taps of the CIR to be retrieved from the server.</span>
</span><span id="__span-0-3499"><a id="__codelineno-0-3499" name="__codelineno-0-3499"></a>
</span><span id="__span-0-3500"><a id="__codelineno-0-3500" name="__codelineno-0-3500"></a><span class="sd">         6. ``nbytes``: number of bytes of a full CIR (1 time snapshot, 64 beams, 1024 delay taps)</span>
</span><span id="__span-0-3501"><a id="__codelineno-0-3501" name="__codelineno-0-3501"></a>
</span><span id="__span-0-3502"><a id="__codelineno-0-3502" name="__codelineno-0-3502"></a><span class="sd">         7. ``beam_angles``: list of beam angles used in beamforming. Beam angle at index 0 corresponds to the omnidirectional case.</span>
</span><span id="__span-0-3503"><a id="__codelineno-0-3503" name="__codelineno-0-3503"></a>
</span><span id="__span-0-3504"><a id="__codelineno-0-3504" name="__codelineno-0-3504"></a><span class="sd">        Args:</span>
</span><span id="__span-0-3505"><a id="__codelineno-0-3505" name="__codelineno-0-3505"></a><span class="sd">            radio_control_port (int, optional): port for &quot;control socket&quot;. Defaults to 8080.</span>
</span><span id="__span-0-3506"><a id="__codelineno-0-3506" name="__codelineno-0-3506"></a><span class="sd">            radio_data_port (int, optional): port for &quot;data socket&quot;. Defaults to 8081.</span>
</span><span id="__span-0-3507"><a id="__codelineno-0-3507" name="__codelineno-0-3507"></a><span class="sd">            rfsoc_static_ip_address (str, optional): static IP address of the rfsoc ethernet interface. Defaults to &#39;10.1.1.40&#39;.</span>
</span><span id="__span-0-3508"><a id="__codelineno-0-3508" name="__codelineno-0-3508"></a><span class="sd">            filename (str, optional): name to be used when saving the CIRs. Defaults to &#39;PDAPs&#39;.</span>
</span><span id="__span-0-3509"><a id="__codelineno-0-3509" name="__codelineno-0-3509"></a><span class="sd">            operating_freq (_type_, optional): operating frequency for the antenna array front end. Defaults to 57.51e9.</span>
</span><span id="__span-0-3510"><a id="__codelineno-0-3510" name="__codelineno-0-3510"></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-0-3511"><a id="__codelineno-0-3511" name="__codelineno-0-3511"></a>
</span><span id="__span-0-3512"><a id="__codelineno-0-3512" name="__codelineno-0-3512"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">operating_freq</span> <span class="o">=</span> <span class="n">operating_freq</span>
</span><span id="__span-0-3513"><a id="__codelineno-0-3513" name="__codelineno-0-3513"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">radio_control_port</span> <span class="o">=</span> <span class="n">radio_control_port</span>
</span><span id="__span-0-3514"><a id="__codelineno-0-3514" name="__codelineno-0-3514"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">radio_data_port</span> <span class="o">=</span> <span class="n">radio_data_port</span>
</span><span id="__span-0-3515"><a id="__codelineno-0-3515" name="__codelineno-0-3515"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">filename_to_save</span> <span class="o">=</span> <span class="n">filename</span>
</span><span id="__span-0-3516"><a id="__codelineno-0-3516" name="__codelineno-0-3516"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hest</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-0-3517"><a id="__codelineno-0-3517" name="__codelineno-0-3517"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">meas_time_tag</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-0-3518"><a id="__codelineno-0-3518" name="__codelineno-0-3518"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">RFSoCSuccessExecutionAns</span> <span class="o">=</span> <span class="s2">&quot;Successully executed&quot;</span>
</span><span id="__span-0-3519"><a id="__codelineno-0-3519" name="__codelineno-0-3519"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">RFSoCSuccessAns</span> <span class="o">=</span> <span class="s2">&quot;Success&quot;</span>
</span><span id="__span-0-3520"><a id="__codelineno-0-3520" name="__codelineno-0-3520"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">n_receive_calls</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-0-3521"><a id="__codelineno-0-3521" name="__codelineno-0-3521"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">time_begin_receive_call</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-0-3522"><a id="__codelineno-0-3522" name="__codelineno-0-3522"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">time_finish_receive_call</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-0-3523"><a id="__codelineno-0-3523" name="__codelineno-0-3523"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">time_begin_receive_thread</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-0-3524"><a id="__codelineno-0-3524" name="__codelineno-0-3524"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">time_finish_receive_thread</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-0-3525"><a id="__codelineno-0-3525" name="__codelineno-0-3525"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">beam_idx_for_vis</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="mi">4</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">16</span><span class="p">)]</span>
</span><span id="__span-0-3526"><a id="__codelineno-0-3526" name="__codelineno-0-3526"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">bytes_per_irf</span> <span class="o">=</span> <span class="mi">64</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">16</span> <span class="c1"># Exactly 1 MB</span>
</span><span id="__span-0-3527"><a id="__codelineno-0-3527" name="__codelineno-0-3527"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">irfs_per_second</span> <span class="o">=</span> <span class="mi">7</span> <span class="c1"># THIS MUST BE FOUND IN BETTER A WAY</span>
</span><span id="__span-0-3528"><a id="__codelineno-0-3528" name="__codelineno-0-3528"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">TIME_SNAPS_TO_SAVE</span> <span class="o">=</span> <span class="mi">220</span>  
</span><span id="__span-0-3529"><a id="__codelineno-0-3529" name="__codelineno-0-3529"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">MAX_PAP_BUF_SIZE_BYTES</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">TIME_SNAPS_TO_SAVE</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">bytes_per_irf</span>
</span><span id="__span-0-3530"><a id="__codelineno-0-3530" name="__codelineno-0-3530"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">TIME_SNAPS_TO_VIS</span> <span class="o">=</span> <span class="mi">22</span>
</span><span id="__span-0-3531"><a id="__codelineno-0-3531" name="__codelineno-0-3531"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">TIME_GET_IRF</span> <span class="o">=</span> <span class="mf">0.14</span>
</span><span id="__span-0-3532"><a id="__codelineno-0-3532" name="__codelineno-0-3532"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nbeams</span> <span class="o">=</span> <span class="mi">64</span>
</span><span id="__span-0-3533"><a id="__codelineno-0-3533" name="__codelineno-0-3533"></a>        <span class="n">nbytes_per_item</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="__span-0-3534"><a id="__codelineno-0-3534" name="__codelineno-0-3534"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nread</span> <span class="o">=</span> <span class="mi">1024</span>
</span><span id="__span-0-3535"><a id="__codelineno-0-3535" name="__codelineno-0-3535"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nbytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nbeams</span> <span class="o">*</span> <span class="n">nbytes_per_item</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">nread</span> <span class="o">*</span> <span class="mi">2</span> <span class="c1"># Beams x SubCarriers(delay taps) x 2Bytes from  INT16 x 2 frpm Real and Imaginary</span>
</span><span id="__span-0-3536"><a id="__codelineno-0-3536" name="__codelineno-0-3536"></a>
</span><span id="__span-0-3537"><a id="__codelineno-0-3537" name="__codelineno-0-3537"></a>        <span class="n">beamforming_angles_file</span> <span class="o">=</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">Users</span><span class="se">\\</span><span class="s2">jvjulian</span><span class="se">\\</span><span class="s2">OneDrive - Teknologian Tutkimuskeskus VTT</span><span class="se">\\</span><span class="s2">Documents</span><span class="se">\\</span><span class="s2">Aerial</span><span class="se">\\</span><span class="s2">Repos</span><span class="se">\\</span><span class="s2">a2gMeasurements</span><span class="se">\\</span><span class="s2">data</span><span class="se">\\</span><span class="s2">rx_sivers_beam_index_mapping.csv&quot;</span>
</span><span id="__span-0-3538"><a id="__codelineno-0-3538" name="__codelineno-0-3538"></a>
</span><span id="__span-0-3539"><a id="__codelineno-0-3539" name="__codelineno-0-3539"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">beam_angles</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">64</span>
</span><span id="__span-0-3540"><a id="__codelineno-0-3540" name="__codelineno-0-3540"></a>
</span><span id="__span-0-3541"><a id="__codelineno-0-3541" name="__codelineno-0-3541"></a>        <span class="c1"># Get the beamforming angles</span>
</span><span id="__span-0-3542"><a id="__codelineno-0-3542" name="__codelineno-0-3542"></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">beamforming_angles_file</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="__span-0-3543"><a id="__codelineno-0-3543" name="__codelineno-0-3543"></a>            <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
</span><span id="__span-0-3544"><a id="__codelineno-0-3544" name="__codelineno-0-3544"></a>            <span class="k">for</span> <span class="n">cnt</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">reader</span><span class="p">):</span>
</span><span id="__span-0-3545"><a id="__codelineno-0-3545" name="__codelineno-0-3545"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">beam_angles</span><span class="p">[</span><span class="n">cnt</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="__span-0-3546"><a id="__codelineno-0-3546" name="__codelineno-0-3546"></a>
</span><span id="__span-0-3547"><a id="__codelineno-0-3547" name="__codelineno-0-3547"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">radio_control</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">family</span><span class="o">=</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
</span><span id="__span-0-3548"><a id="__codelineno-0-3548" name="__codelineno-0-3548"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">radio_control</span><span class="o">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">SOL_SOCKET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SO_REUSEADDR</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-0-3549"><a id="__codelineno-0-3549" name="__codelineno-0-3549"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">radio_data</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">family</span><span class="o">=</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
</span><span id="__span-0-3550"><a id="__codelineno-0-3550" name="__codelineno-0-3550"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">radio_data</span><span class="o">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">SOL_SOCKET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SO_REUSEADDR</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-0-3551"><a id="__codelineno-0-3551" name="__codelineno-0-3551"></a>
</span><span id="__span-0-3552"><a id="__codelineno-0-3552" name="__codelineno-0-3552"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-0-3553"><a id="__codelineno-0-3553" name="__codelineno-0-3553"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">radio_control</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="n">rfsoc_static_ip_address</span><span class="p">,</span> <span class="n">radio_control_port</span><span class="p">))</span>
</span><span id="__span-0-3554"><a id="__codelineno-0-3554" name="__codelineno-0-3554"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">radio_data</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="n">rfsoc_static_ip_address</span><span class="p">,</span> <span class="n">radio_data_port</span><span class="p">))</span>
</span><span id="__span-0-3555"><a id="__codelineno-0-3555" name="__codelineno-0-3555"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-0-3556"><a id="__codelineno-0-3556" name="__codelineno-0-3556"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG]: Error in rfsoc socket connection: &quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span><span id="__span-0-3557"><a id="__codelineno-0-3557" name="__codelineno-0-3557"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG]: Check RFSoC ETH, and Power it Off and On&quot;</span><span class="p">)</span>
</span><span id="__span-0-3558"><a id="__codelineno-0-3558" name="__codelineno-0-3558"></a>
</span><span id="__span-0-3559"><a id="__codelineno-0-3559" name="__codelineno-0-3559"></a>    <span class="k">def</span> <span class="nf">send_cmd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmd</span><span class="p">,</span> <span class="n">cmd_arg</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="__span-0-3560"><a id="__codelineno-0-3560" name="__codelineno-0-3560"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-3561"><a id="__codelineno-0-3561" name="__codelineno-0-3561"></a><span class="sd">        Sends a command to the RFSoC server. </span>
</span><span id="__span-0-3562"><a id="__codelineno-0-3562" name="__codelineno-0-3562"></a>
</span><span id="__span-0-3563"><a id="__codelineno-0-3563" name="__codelineno-0-3563"></a><span class="sd">        These commands control the Sivers EVK mode, carrier frequncy, tx gain and rx gain.</span>
</span><span id="__span-0-3564"><a id="__codelineno-0-3564" name="__codelineno-0-3564"></a>
</span><span id="__span-0-3565"><a id="__codelineno-0-3565" name="__codelineno-0-3565"></a><span class="sd">        Args:</span>
</span><span id="__span-0-3566"><a id="__codelineno-0-3566" name="__codelineno-0-3566"></a><span class="sd">            cmd (str): available commands are: ``setModeSivers``, ``setCarrierFrequencySivers``, ``setGainTxSivers``, ``setGainRxSivers``.</span>
</span><span id="__span-0-3567"><a id="__codelineno-0-3567" name="__codelineno-0-3567"></a><span class="sd">            cmd_arg (str | float | dict, optional): supported parameters for &#39;setModeSivers&#39; are &#39;RXen_0_TXen1&#39;, &#39;RXen1_TXen0&#39;, &#39;RXen0_TXen0&#39;; supported parameters for &#39;setCarrierFrequencySivers&#39; are float number, i.e.: 57.51e9; supported parameters for &#39;setGainTxSivers&#39; are dict with this structure {&#39;tx_bb_gain&#39;: 0x00, &#39;tx_bb_phase&#39;: 0x00, &#39;tx_bb_iq_gain&#39;: 0x00, &#39;tx_bfrf_gain&#39;: 0x00}; supported parameters for &#39;setGainRxSivers&#39; are dict with this structure {&#39;rx_gain_ctrl_bb1&#39;:0x00, &#39;rx_gain_ctrl_bb2&#39;:0x00, &#39;rx_gain_ctrl_bb3&#39;:0x00, &#39;rx_gain_ctrl_bfrf&#39;:0x00}. Defaults to None.</span>
</span><span id="__span-0-3568"><a id="__codelineno-0-3568" name="__codelineno-0-3568"></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-0-3569"><a id="__codelineno-0-3569" name="__codelineno-0-3569"></a>
</span><span id="__span-0-3570"><a id="__codelineno-0-3570" name="__codelineno-0-3570"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-0-3571"><a id="__codelineno-0-3571" name="__codelineno-0-3571"></a>            <span class="k">if</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s1">&#39;setModeSivers&#39;</span><span class="p">:</span>
</span><span id="__span-0-3572"><a id="__codelineno-0-3572" name="__codelineno-0-3572"></a>                <span class="k">if</span> <span class="n">cmd_arg</span> <span class="o">==</span> <span class="s1">&#39;RXen0_TXen1&#39;</span> <span class="ow">or</span> <span class="n">cmd_arg</span> <span class="o">==</span> <span class="s1">&#39;RXen1_TXen0&#39;</span> <span class="ow">or</span> <span class="n">cmd_arg</span> <span class="o">==</span> <span class="s1">&#39;RXen0_TXen0&#39;</span><span class="p">:</span>
</span><span id="__span-0-3573"><a id="__codelineno-0-3573" name="__codelineno-0-3573"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">radio_control</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;setModeSiver &quot;</span><span class="o">+</span><span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">cmd_arg</span><span class="p">)))</span>
</span><span id="__span-0-3574"><a id="__codelineno-0-3574" name="__codelineno-0-3574"></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-3575"><a id="__codelineno-0-3575" name="__codelineno-0-3575"></a>                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG]: Unknown Sivers mode&quot;</span><span class="p">)</span>
</span><span id="__span-0-3576"><a id="__codelineno-0-3576" name="__codelineno-0-3576"></a>            <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s1">&#39;setCarrierFrequencySivers&#39;</span><span class="p">:</span>
</span><span id="__span-0-3577"><a id="__codelineno-0-3577" name="__codelineno-0-3577"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">radio_control</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;setCarrierFrequency &quot;</span><span class="o">+</span><span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">cmd_arg</span><span class="p">)))</span>
</span><span id="__span-0-3578"><a id="__codelineno-0-3578" name="__codelineno-0-3578"></a>            <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s1">&#39;setGainTxSivers&#39;</span><span class="p">:</span>
</span><span id="__span-0-3579"><a id="__codelineno-0-3579" name="__codelineno-0-3579"></a>                <span class="n">tx_bb_gain</span> <span class="o">=</span> <span class="n">cmd_arg</span><span class="p">[</span><span class="s1">&#39;tx_bb_gain&#39;</span><span class="p">]</span>
</span><span id="__span-0-3580"><a id="__codelineno-0-3580" name="__codelineno-0-3580"></a>                <span class="n">tx_bb_phase</span> <span class="o">=</span> <span class="n">cmd_arg</span><span class="p">[</span><span class="s1">&#39;tx_bb_phase&#39;</span><span class="p">]</span>
</span><span id="__span-0-3581"><a id="__codelineno-0-3581" name="__codelineno-0-3581"></a>                <span class="n">tx_bb_iq_gain</span> <span class="o">=</span> <span class="n">cmd_arg</span><span class="p">[</span><span class="s1">&#39;tx_bb_iq_gain&#39;</span><span class="p">]</span>
</span><span id="__span-0-3582"><a id="__codelineno-0-3582" name="__codelineno-0-3582"></a>                <span class="n">tx_bfrf_gain</span> <span class="o">=</span> <span class="n">cmd_arg</span><span class="p">[</span><span class="s1">&#39;tx_bfrf_gain&#39;</span><span class="p">]</span>
</span><span id="__span-0-3583"><a id="__codelineno-0-3583" name="__codelineno-0-3583"></a>
</span><span id="__span-0-3584"><a id="__codelineno-0-3584" name="__codelineno-0-3584"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">radio_control</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;setGainTX &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">tx_bb_gain</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">)</span> \
</span><span id="__span-0-3585"><a id="__codelineno-0-3585" name="__codelineno-0-3585"></a>                                                            <span class="o">+</span> <span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">tx_bb_phase</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">)</span> \
</span><span id="__span-0-3586"><a id="__codelineno-0-3586" name="__codelineno-0-3586"></a>                                                            <span class="o">+</span> <span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">tx_bb_iq_gain</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">)</span> \
</span><span id="__span-0-3587"><a id="__codelineno-0-3587" name="__codelineno-0-3587"></a>                                                            <span class="o">+</span> <span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">tx_bfrf_gain</span><span class="p">))))</span>
</span><span id="__span-0-3588"><a id="__codelineno-0-3588" name="__codelineno-0-3588"></a>            <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s1">&#39;setGainRxSivers&#39;</span><span class="p">:</span>
</span><span id="__span-0-3589"><a id="__codelineno-0-3589" name="__codelineno-0-3589"></a>                <span class="n">rx_gain_ctrl_bb1</span> <span class="o">=</span> <span class="n">cmd_arg</span><span class="p">[</span><span class="s1">&#39;rx_gain_ctrl_bb1&#39;</span><span class="p">]</span>
</span><span id="__span-0-3590"><a id="__codelineno-0-3590" name="__codelineno-0-3590"></a>                <span class="n">rx_gain_ctrl_bb2</span> <span class="o">=</span> <span class="n">cmd_arg</span><span class="p">[</span><span class="s1">&#39;rx_gain_ctrl_bb2&#39;</span><span class="p">]</span>
</span><span id="__span-0-3591"><a id="__codelineno-0-3591" name="__codelineno-0-3591"></a>                <span class="n">rx_gain_ctrl_bb3</span> <span class="o">=</span> <span class="n">cmd_arg</span><span class="p">[</span><span class="s1">&#39;rx_gain_ctrl_bb3&#39;</span><span class="p">]</span>
</span><span id="__span-0-3592"><a id="__codelineno-0-3592" name="__codelineno-0-3592"></a>                <span class="n">rx_gain_ctrl_bfrf</span> <span class="o">=</span> <span class="n">cmd_arg</span><span class="p">[</span><span class="s1">&#39;rx_gain_ctrl_bfrf&#39;</span><span class="p">]</span>
</span><span id="__span-0-3593"><a id="__codelineno-0-3593" name="__codelineno-0-3593"></a>
</span><span id="__span-0-3594"><a id="__codelineno-0-3594" name="__codelineno-0-3594"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">radio_control</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;setGainRX &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">rx_gain_ctrl_bb1</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">)</span> \
</span><span id="__span-0-3595"><a id="__codelineno-0-3595" name="__codelineno-0-3595"></a>                                                            <span class="o">+</span> <span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">rx_gain_ctrl_bb2</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">)</span> \
</span><span id="__span-0-3596"><a id="__codelineno-0-3596" name="__codelineno-0-3596"></a>                                                            <span class="o">+</span> <span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">rx_gain_ctrl_bb3</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">)</span> \
</span><span id="__span-0-3597"><a id="__codelineno-0-3597" name="__codelineno-0-3597"></a>                                                            <span class="o">+</span> <span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">rx_gain_ctrl_bfrf</span><span class="p">))))</span>
</span><span id="__span-0-3598"><a id="__codelineno-0-3598" name="__codelineno-0-3598"></a>            <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s1">&#39;transmitSamples&#39;</span><span class="p">:</span>
</span><span id="__span-0-3599"><a id="__codelineno-0-3599" name="__codelineno-0-3599"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">radio_control</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;transmitSamples&quot;</span><span class="p">)</span>
</span><span id="__span-0-3600"><a id="__codelineno-0-3600" name="__codelineno-0-3600"></a>            <span class="k">else</span><span class="p">:</span> 
</span><span id="__span-0-3601"><a id="__codelineno-0-3601" name="__codelineno-0-3601"></a>                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG]: Unknown command to send to RFSoC&quot;</span><span class="p">)</span>
</span><span id="__span-0-3602"><a id="__codelineno-0-3602" name="__codelineno-0-3602"></a>                <span class="k">return</span>
</span><span id="__span-0-3603"><a id="__codelineno-0-3603" name="__codelineno-0-3603"></a>        <span class="k">except</span> <span class="ne">IOError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-0-3604"><a id="__codelineno-0-3604" name="__codelineno-0-3604"></a>            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">errno</span> <span class="o">==</span> <span class="n">errno</span><span class="o">.</span><span class="n">EPIPE</span><span class="p">:</span>
</span><span id="__span-0-3605"><a id="__codelineno-0-3605" name="__codelineno-0-3605"></a>                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[ERROR]: RFSoC to Host connection has problems: &quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span><span id="__span-0-3606"><a id="__codelineno-0-3606" name="__codelineno-0-3606"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-3607"><a id="__codelineno-0-3607" name="__codelineno-0-3607"></a>            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">radio_control</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
</span><span id="__span-0-3608"><a id="__codelineno-0-3608" name="__codelineno-0-3608"></a>            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
</span><span id="__span-0-3609"><a id="__codelineno-0-3609" name="__codelineno-0-3609"></a>
</span><span id="__span-0-3610"><a id="__codelineno-0-3610" name="__codelineno-0-3610"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">RFSoCSuccessExecutionAns</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">RFSoCSuccessAns</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
</span><span id="__span-0-3611"><a id="__codelineno-0-3611" name="__codelineno-0-3611"></a>                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG]: Command &quot;</span><span class="p">,</span> <span class="n">cmd</span><span class="p">,</span> <span class="s2">&quot; executed succesfully on Sivers or RFSoC&quot;</span><span class="p">)</span>
</span><span id="__span-0-3612"><a id="__codelineno-0-3612" name="__codelineno-0-3612"></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-3613"><a id="__codelineno-0-3613" name="__codelineno-0-3613"></a>                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG]: Command &quot;</span><span class="p">,</span> <span class="n">cmd</span><span class="p">,</span> <span class="s2">&quot; was not successfully executed on Sivers or RFSoC. The following error appears: &quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</span><span id="__span-0-3614"><a id="__codelineno-0-3614" name="__codelineno-0-3614"></a>
</span><span id="__span-0-3615"><a id="__codelineno-0-3615" name="__codelineno-0-3615"></a>    <span class="k">def</span> <span class="nf">transmit_signal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tx_bb_gain</span><span class="o">=</span><span class="mh">0x3</span><span class="p">,</span> <span class="n">tx_bb_phase</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">tx_bb_iq_gain</span><span class="o">=</span><span class="mh">0x77</span><span class="p">,</span> <span class="n">tx_bfrf_gain</span><span class="o">=</span><span class="mh">0x40</span><span class="p">,</span> <span class="n">carrier_freq</span><span class="o">=</span><span class="mf">57.51e9</span><span class="p">):</span>
</span><span id="__span-0-3616"><a id="__codelineno-0-3616" name="__codelineno-0-3616"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-3617"><a id="__codelineno-0-3617" name="__codelineno-0-3617"></a><span class="sd">        Sets Tx gains and frequency of operation. Wrapper function of ``send_cmd``.</span>
</span><span id="__span-0-3618"><a id="__codelineno-0-3618" name="__codelineno-0-3618"></a>
</span><span id="__span-0-3619"><a id="__codelineno-0-3619" name="__codelineno-0-3619"></a><span class="sd">        More about TX gains is found in the Sivers EVK manual/reference guides.</span>
</span><span id="__span-0-3620"><a id="__codelineno-0-3620" name="__codelineno-0-3620"></a>
</span><span id="__span-0-3621"><a id="__codelineno-0-3621" name="__codelineno-0-3621"></a><span class="sd">        Args:</span>
</span><span id="__span-0-3622"><a id="__codelineno-0-3622" name="__codelineno-0-3622"></a><span class="sd">            tx_bb_gain (hexadecimal, optional): sets baseband gain according to: 0x00  = 0 dB, 0x01  = 3.5 dB, 0x02  = 3.5 dB, 0x03  = 6 dB (when sivers register tx_ctrl bit 3 (BB Ibias set) = 1). Defaults to 0x3.</span>
</span><span id="__span-0-3623"><a id="__codelineno-0-3623" name="__codelineno-0-3623"></a><span class="sd">            tx_bb_phase (int, optional): _description_. Defaults to 0.</span>
</span><span id="__span-0-3624"><a id="__codelineno-0-3624" name="__codelineno-0-3624"></a><span class="sd">            tx_bb_iq_gain (hexadecimal, optional): sets baseband I, Q gain according to: [0:3, I gain]: 0-6 dB, 16 steps; [4:7, Q gain]: 0-6 dB, 16 steps. Defaults to 0x77.</span>
</span><span id="__span-0-3625"><a id="__codelineno-0-3625" name="__codelineno-0-3625"></a><span class="sd">            tx_bfrf_gain (hexadecimal, optional): sets gain after RF mixer according to: [0:3, RF gain]: 0-15 dB, 16 steps; [4:7, BF gain]: 0-15 dB, 16 steps. Defaults to 0x40.</span>
</span><span id="__span-0-3626"><a id="__codelineno-0-3626" name="__codelineno-0-3626"></a><span class="sd">            carrier_freq (_type_, optional): carrier frequency from the available frequency range for the Sivers EVK 06002/3 (in this case: 57-71 GHz). Defaults to 57.51e9.</span>
</span><span id="__span-0-3627"><a id="__codelineno-0-3627" name="__codelineno-0-3627"></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-0-3628"><a id="__codelineno-0-3628" name="__codelineno-0-3628"></a>
</span><span id="__span-0-3629"><a id="__codelineno-0-3629" name="__codelineno-0-3629"></a>        <span class="n">dict_tx_gains</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;tx_bb_gain&#39;</span><span class="p">:</span> <span class="n">tx_bb_gain</span><span class="p">,</span> <span class="s1">&#39;tx_bb_phase&#39;</span><span class="p">:</span> <span class="n">tx_bb_phase</span><span class="p">,</span> <span class="s1">&#39;tx_bb_iq_gain&#39;</span><span class="p">:</span> <span class="n">tx_bb_iq_gain</span><span class="p">,</span> <span class="s1">&#39;tx_bfrf_gain&#39;</span><span class="p">:</span> <span class="n">tx_bfrf_gain</span><span class="p">}</span>
</span><span id="__span-0-3630"><a id="__codelineno-0-3630" name="__codelineno-0-3630"></a>
</span><span id="__span-0-3631"><a id="__codelineno-0-3631" name="__codelineno-0-3631"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_cmd</span><span class="p">(</span><span class="s1">&#39;transmitSamples&#39;</span><span class="p">)</span>
</span><span id="__span-0-3632"><a id="__codelineno-0-3632" name="__codelineno-0-3632"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_cmd</span><span class="p">(</span><span class="s1">&#39;setModeSivers&#39;</span><span class="p">,</span> <span class="n">cmd_arg</span><span class="o">=</span><span class="s1">&#39;RXen0_TXen1&#39;</span><span class="p">)</span>
</span><span id="__span-0-3633"><a id="__codelineno-0-3633" name="__codelineno-0-3633"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_cmd</span><span class="p">(</span><span class="s1">&#39;setCarrierFrequencySivers&#39;</span><span class="p">,</span> <span class="n">cmd_arg</span><span class="o">=</span><span class="n">carrier_freq</span><span class="p">)</span>
</span><span id="__span-0-3634"><a id="__codelineno-0-3634" name="__codelineno-0-3634"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_cmd</span><span class="p">(</span><span class="s1">&#39;setGainTxSivers&#39;</span><span class="p">,</span> <span class="n">cmd_arg</span><span class="o">=</span><span class="n">dict_tx_gains</span><span class="p">)</span>
</span><span id="__span-0-3635"><a id="__codelineno-0-3635" name="__codelineno-0-3635"></a>
</span><span id="__span-0-3636"><a id="__codelineno-0-3636" name="__codelineno-0-3636"></a>    <span class="k">def</span> <span class="nf">set_rx_rf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rx_gain_ctrl_bb1</span><span class="o">=</span><span class="mh">0x77</span><span class="p">,</span> <span class="n">rx_gain_ctrl_bb2</span><span class="o">=</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">rx_gain_ctrl_bb3</span><span class="o">=</span><span class="mh">0x99</span><span class="p">,</span> <span class="n">rx_gain_ctrl_bfrf</span><span class="o">=</span><span class="mh">0xFF</span><span class="p">,</span> <span class="n">carrier_freq</span><span class="o">=</span><span class="mf">57.51e9</span><span class="p">):</span>
</span><span id="__span-0-3637"><a id="__codelineno-0-3637" name="__codelineno-0-3637"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-3638"><a id="__codelineno-0-3638" name="__codelineno-0-3638"></a><span class="sd">        Sets rx gains and frequency of operation. Wrapper function of ``send_cmd``.</span>
</span><span id="__span-0-3639"><a id="__codelineno-0-3639" name="__codelineno-0-3639"></a>
</span><span id="__span-0-3640"><a id="__codelineno-0-3640" name="__codelineno-0-3640"></a><span class="sd">        Args:</span>
</span><span id="__span-0-3641"><a id="__codelineno-0-3641" name="__codelineno-0-3641"></a><span class="sd">            rx_gain_ctrl_bb1 (hexadecimal, optional): sets the first rx gain for the I,Q according to: I[0:3]:[0,1,3,7,F]:-6:0 dB, 4 steps; Q[0:3]:[0,1,3,7,F]:-6:0 dB, 4 steps. Defaults to 0x77.</span>
</span><span id="__span-0-3642"><a id="__codelineno-0-3642" name="__codelineno-0-3642"></a><span class="sd">            rx_gain_ctrl_bb2 (hexadecimal, optional): sets the second rx gain for the I,Q according to: I[0:3]:[0,1,3,7,F]:-6:0 dB, 4 steps; Q[0:3]:[0,1,3,7,F]:-6:0 dB, 4 steps. Defaults to 0x00.</span>
</span><span id="__span-0-3643"><a id="__codelineno-0-3643" name="__codelineno-0-3643"></a><span class="sd">            rx_gain_ctrl_bb3 (hexadecimal, optional): sets the third rx gain for the I,Q according to: I[0:3]:[0,1,3,7,F]:-6:0 dB, 4 steps; Q[0:3]:[0,1,3,7,F]:-6:0 dB, 4 steps. Defaults to 0x99.</span>
</span><span id="__span-0-3644"><a id="__codelineno-0-3644" name="__codelineno-0-3644"></a><span class="sd">            rx_gain_ctrl_bfrf (_type_, optional): sets gain after the mixer according to; [0:3,RF gain]: 0-15 dB, 16 steps; [4:7, BF gain]: 0-15 dB, 16 steps. Defaults to 0xFF.</span>
</span><span id="__span-0-3645"><a id="__codelineno-0-3645" name="__codelineno-0-3645"></a><span class="sd">            carrier_freq (_type_, optional): carrier frequency from the available frequency range for the Sivers EVK 06002/3 (in this case: 57-71 GHz). Defaults to 57.51e9.</span>
</span><span id="__span-0-3646"><a id="__codelineno-0-3646" name="__codelineno-0-3646"></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-0-3647"><a id="__codelineno-0-3647" name="__codelineno-0-3647"></a>
</span><span id="__span-0-3648"><a id="__codelineno-0-3648" name="__codelineno-0-3648"></a>        <span class="n">dict_rx_gains</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;rx_gain_ctrl_bb1&#39;</span><span class="p">:</span><span class="n">rx_gain_ctrl_bb1</span><span class="p">,</span> <span class="s1">&#39;rx_gain_ctrl_bb2&#39;</span><span class="p">:</span><span class="n">rx_gain_ctrl_bb2</span><span class="p">,</span> <span class="s1">&#39;rx_gain_ctrl_bb3&#39;</span><span class="p">:</span><span class="n">rx_gain_ctrl_bb3</span><span class="p">,</span> <span class="s1">&#39;rx_gain_ctrl_bfrf&#39;</span><span class="p">:</span><span class="n">rx_gain_ctrl_bfrf</span><span class="p">}</span>
</span><span id="__span-0-3649"><a id="__codelineno-0-3649" name="__codelineno-0-3649"></a>
</span><span id="__span-0-3650"><a id="__codelineno-0-3650" name="__codelineno-0-3650"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_cmd</span><span class="p">(</span><span class="s1">&#39;setModeSivers&#39;</span><span class="p">,</span> <span class="n">cmd_arg</span><span class="o">=</span><span class="s1">&#39;RXen1_TXen0&#39;</span><span class="p">)</span>
</span><span id="__span-0-3651"><a id="__codelineno-0-3651" name="__codelineno-0-3651"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_cmd</span><span class="p">(</span><span class="s1">&#39;setCarrierFrequencySivers&#39;</span><span class="p">,</span> <span class="n">cmd_arg</span><span class="o">=</span><span class="n">carrier_freq</span><span class="p">)</span>
</span><span id="__span-0-3652"><a id="__codelineno-0-3652" name="__codelineno-0-3652"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_cmd</span><span class="p">(</span><span class="s1">&#39;setGainRxSivers&#39;</span><span class="p">,</span> <span class="n">cmd_arg</span><span class="o">=</span><span class="n">dict_rx_gains</span><span class="p">)</span>
</span><span id="__span-0-3653"><a id="__codelineno-0-3653" name="__codelineno-0-3653"></a>
</span><span id="__span-0-3654"><a id="__codelineno-0-3654" name="__codelineno-0-3654"></a>    <span class="k">def</span> <span class="nf">receive_signal_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stop_event</span><span class="p">):</span>
</span><span id="__span-0-3655"><a id="__codelineno-0-3655" name="__codelineno-0-3655"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-3656"><a id="__codelineno-0-3656" name="__codelineno-0-3656"></a><span class="sd">        Callback for the thread responsible for retrieving CIRs from RFSoC server (rfsoc thread).</span>
</span><span id="__span-0-3657"><a id="__codelineno-0-3657" name="__codelineno-0-3657"></a>
</span><span id="__span-0-3658"><a id="__codelineno-0-3658" name="__codelineno-0-3658"></a><span class="sd">        When enough (``self.TIME_SNAPS_TO_VIS``) CIR time snapshots are available, computes the Power Angular Profile to be sent to the ground node for displaying it in the GUI.</span>
</span><span id="__span-0-3659"><a id="__codelineno-0-3659" name="__codelineno-0-3659"></a>
</span><span id="__span-0-3660"><a id="__codelineno-0-3660" name="__codelineno-0-3660"></a><span class="sd">        When enough (``self.TIME_SNAPS_TO_SAVE``) CIR time snapshots are available, saves the CIRs on disk.</span>
</span><span id="__span-0-3661"><a id="__codelineno-0-3661" name="__codelineno-0-3661"></a>
</span><span id="__span-0-3662"><a id="__codelineno-0-3662" name="__codelineno-0-3662"></a><span class="sd">        Args:</span>
</span><span id="__span-0-3663"><a id="__codelineno-0-3663" name="__codelineno-0-3663"></a><span class="sd">            stop_event (threading.Event): when set, this function does nothing (the thread can be alived but does nothing)</span>
</span><span id="__span-0-3664"><a id="__codelineno-0-3664" name="__codelineno-0-3664"></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-0-3665"><a id="__codelineno-0-3665" name="__codelineno-0-3665"></a>
</span><span id="__span-0-3666"><a id="__codelineno-0-3666" name="__codelineno-0-3666"></a>        <span class="k">while</span> <span class="ow">not</span> <span class="n">stop_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>
</span><span id="__span-0-3667"><a id="__codelineno-0-3667" name="__codelineno-0-3667"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">n_receive_calls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_receive_calls</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="__span-0-3668"><a id="__codelineno-0-3668" name="__codelineno-0-3668"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">radio_control</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;receiveSamples&quot;</span><span class="p">)</span>
</span><span id="__span-0-3669"><a id="__codelineno-0-3669" name="__codelineno-0-3669"></a>            <span class="n">buf</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">()</span>
</span><span id="__span-0-3670"><a id="__codelineno-0-3670" name="__codelineno-0-3670"></a>
</span><span id="__span-0-3671"><a id="__codelineno-0-3671" name="__codelineno-0-3671"></a>            <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
</span><span id="__span-0-3672"><a id="__codelineno-0-3672" name="__codelineno-0-3672"></a>                <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">radio_data</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nbytes</span><span class="p">)</span>
</span><span id="__span-0-3673"><a id="__codelineno-0-3673" name="__codelineno-0-3673"></a>                <span class="n">buf</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="__span-0-3674"><a id="__codelineno-0-3674" name="__codelineno-0-3674"></a>            <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int16</span><span class="p">)</span>
</span><span id="__span-0-3675"><a id="__codelineno-0-3675" name="__codelineno-0-3675"></a>            <span class="n">rxtd</span> <span class="o">=</span> <span class="n">data</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">nread</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">nbeams</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="n">j</span><span class="o">*</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">nread</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">nbeams</span><span class="p">:]</span>
</span><span id="__span-0-3676"><a id="__codelineno-0-3676" name="__codelineno-0-3676"></a>            <span class="n">rxtd</span> <span class="o">=</span> <span class="n">rxtd</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nbeams</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nread</span><span class="p">)</span>
</span><span id="__span-0-3677"><a id="__codelineno-0-3677" name="__codelineno-0-3677"></a>
</span><span id="__span-0-3678"><a id="__codelineno-0-3678" name="__codelineno-0-3678"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hest</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rxtd</span><span class="p">)</span>
</span><span id="__span-0-3679"><a id="__codelineno-0-3679" name="__codelineno-0-3679"></a>
</span><span id="__span-0-3680"><a id="__codelineno-0-3680" name="__codelineno-0-3680"></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hest</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">TIME_SNAPS_TO_VIS</span><span class="p">:</span>
</span><span id="__span-0-3681"><a id="__codelineno-0-3681" name="__codelineno-0-3681"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">data_to_visualize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_operations_rfsoc_rx_ndarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hest</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="__span-0-3682"><a id="__codelineno-0-3682" name="__codelineno-0-3682"></a>
</span><span id="__span-0-3683"><a id="__codelineno-0-3683" name="__codelineno-0-3683"></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hest</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">TIME_SNAPS_TO_VIS</span><span class="p">:</span> <span class="c1"># maximum packet size to send over the tcp connection</span>
</span><span id="__span-0-3684"><a id="__codelineno-0-3684" name="__codelineno-0-3684"></a>                <span class="n">tmp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_operations_rfsoc_rx_ndarray</span><span class="p">(</span><span class="n">rxtd</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-0-3685"><a id="__codelineno-0-3685" name="__codelineno-0-3685"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">data_to_visualize</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">roll</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_to_visualize</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> 
</span><span id="__span-0-3686"><a id="__codelineno-0-3686" name="__codelineno-0-3686"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">data_to_visualize</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">tmp</span> 
</span><span id="__span-0-3687"><a id="__codelineno-0-3687" name="__codelineno-0-3687"></a>
</span><span id="__span-0-3688"><a id="__codelineno-0-3688" name="__codelineno-0-3688"></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hest</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">TIME_SNAPS_TO_SAVE</span><span class="p">:</span>
</span><span id="__span-0-3689"><a id="__codelineno-0-3689" name="__codelineno-0-3689"></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG]: Time between save callbacks: </span><span class="si">{</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">start_time_pap_callback</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-3690"><a id="__codelineno-0-3690" name="__codelineno-0-3690"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">save_hest_buffer</span><span class="p">()</span>      
</span><span id="__span-0-3691"><a id="__codelineno-0-3691" name="__codelineno-0-3691"></a>
</span><span id="__span-0-3692"><a id="__codelineno-0-3692" name="__codelineno-0-3692"></a>    <span class="k">def</span> <span class="nf">maximum_power_direction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">array</span><span class="p">):</span>
</span><span id="__span-0-3693"><a id="__codelineno-0-3693" name="__codelineno-0-3693"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-3694"><a id="__codelineno-0-3694" name="__codelineno-0-3694"></a><span class="sd">        Computes the beamforming angle (azimuth) of maximum power at the receiver.</span>
</span><span id="__span-0-3695"><a id="__codelineno-0-3695" name="__codelineno-0-3695"></a>
</span><span id="__span-0-3696"><a id="__codelineno-0-3696" name="__codelineno-0-3696"></a><span class="sd">        The time under consideration should be short or less than the inverse of the rate of change of the direction of maximum power.</span>
</span><span id="__span-0-3697"><a id="__codelineno-0-3697" name="__codelineno-0-3697"></a>
</span><span id="__span-0-3698"><a id="__codelineno-0-3698" name="__codelineno-0-3698"></a><span class="sd">        The rate of change of the direction of maximum power is not easy to compute or assume, but we can restrict the computation of the direction to a window of a given ms.</span>
</span><span id="__span-0-3699"><a id="__codelineno-0-3699" name="__codelineno-0-3699"></a>
</span><span id="__span-0-3700"><a id="__codelineno-0-3700" name="__codelineno-0-3700"></a><span class="sd">        Args:</span>
</span><span id="__span-0-3701"><a id="__codelineno-0-3701" name="__codelineno-0-3701"></a><span class="sd">            array (numpy.ndarray): this is the array having the IRFs. Its dimensionality is Time x 64 x 2044.</span>
</span><span id="__span-0-3702"><a id="__codelineno-0-3702" name="__codelineno-0-3702"></a>
</span><span id="__span-0-3703"><a id="__codelineno-0-3703" name="__codelineno-0-3703"></a><span class="sd">        Returns:</span>
</span><span id="__span-0-3704"><a id="__codelineno-0-3704" name="__codelineno-0-3704"></a><span class="sd">            angleMaxPower (list): contains the (azimuth) angles for maximum power across all the time snapshots considered. Has 64 entries.</span>
</span><span id="__span-0-3705"><a id="__codelineno-0-3705" name="__codelineno-0-3705"></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-0-3706"><a id="__codelineno-0-3706" name="__codelineno-0-3706"></a>        <span class="n">aux</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">array</span><span class="p">)</span> 
</span><span id="__span-0-3707"><a id="__codelineno-0-3707" name="__codelineno-0-3707"></a>        <span class="n">aux</span> <span class="o">=</span> <span class="n">aux</span> <span class="o">*</span> <span class="n">aux</span> <span class="c1"># faster pow 2</span>
</span><span id="__span-0-3708"><a id="__codelineno-0-3708" name="__codelineno-0-3708"></a>        <span class="n">aux</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">aux</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="__span-0-3709"><a id="__codelineno-0-3709" name="__codelineno-0-3709"></a>
</span><span id="__span-0-3710"><a id="__codelineno-0-3710" name="__codelineno-0-3710"></a>        <span class="c1"># This is an Nbeams array</span>
</span><span id="__span-0-3711"><a id="__codelineno-0-3711" name="__codelineno-0-3711"></a>        <span class="n">idx_max_power</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">aux</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-0-3712"><a id="__codelineno-0-3712" name="__codelineno-0-3712"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">beam_angles</span><span class="p">[</span><span class="n">idx_max_power</span><span class="p">]</span>        
</span><span id="__span-0-3713"><a id="__codelineno-0-3713" name="__codelineno-0-3713"></a>
</span><span id="__span-0-3714"><a id="__codelineno-0-3714" name="__codelineno-0-3714"></a>    <span class="k">def</span> <span class="nf">pipeline_operations_rfsoc_rx_ndarray</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">array</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">each_n_beams</span><span class="o">=</span><span class="mi">4</span><span class="p">):</span>
</span><span id="__span-0-3715"><a id="__codelineno-0-3715" name="__codelineno-0-3715"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-3716"><a id="__codelineno-0-3716" name="__codelineno-0-3716"></a><span class="sd">        Computes the PAP for a single snapshot CIR (64 beams * 1024 delay taps) or the PAPs of multiple snapshots CIR (snaps * 64 beams * 1024 delay taps).</span>
</span><span id="__span-0-3717"><a id="__codelineno-0-3717" name="__codelineno-0-3717"></a>
</span><span id="__span-0-3718"><a id="__codelineno-0-3718" name="__codelineno-0-3718"></a><span class="sd">        Args:</span>
</span><span id="__span-0-3719"><a id="__codelineno-0-3719" name="__codelineno-0-3719"></a><span class="sd">            array (numpy.ndarray): CIRs. If it has 2 dimensions the CIR correspond to a single snapshot, if it has 3 dimensions, the CIR correspond to multiple snapshots.</span>
</span><span id="__span-0-3720"><a id="__codelineno-0-3720" name="__codelineno-0-3720"></a><span class="sd">            axis (int): delay tap axis, either 0, 1 and 2.</span>
</span><span id="__span-0-3721"><a id="__codelineno-0-3721" name="__codelineno-0-3721"></a><span class="sd">            each_n_beams (int, optional): subsample the 64 beams by this value. Defaults to 4.</span>
</span><span id="__span-0-3722"><a id="__codelineno-0-3722" name="__codelineno-0-3722"></a>
</span><span id="__span-0-3723"><a id="__codelineno-0-3723" name="__codelineno-0-3723"></a><span class="sd">        Returns:</span>
</span><span id="__span-0-3724"><a id="__codelineno-0-3724" name="__codelineno-0-3724"></a><span class="sd">            aux (numpy.ndarray): computed PAP &quot;subsampled&quot; version.</span>
</span><span id="__span-0-3725"><a id="__codelineno-0-3725" name="__codelineno-0-3725"></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-0-3726"><a id="__codelineno-0-3726" name="__codelineno-0-3726"></a>
</span><span id="__span-0-3727"><a id="__codelineno-0-3727" name="__codelineno-0-3727"></a>        <span class="k">if</span> <span class="n">axis</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">array</span><span class="o">.</span><span class="n">shape</span><span class="p">):</span>
</span><span id="__span-0-3728"><a id="__codelineno-0-3728" name="__codelineno-0-3728"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG]: Invalid axis over which to add entries. The array has: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">array</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="si">}</span><span class="s2"> dimensions&quot;</span><span class="p">)</span>
</span><span id="__span-0-3729"><a id="__codelineno-0-3729" name="__codelineno-0-3729"></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="__span-0-3730"><a id="__codelineno-0-3730" name="__codelineno-0-3730"></a>
</span><span id="__span-0-3731"><a id="__codelineno-0-3731" name="__codelineno-0-3731"></a>        <span class="n">aux</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">array</span><span class="p">)</span> 
</span><span id="__span-0-3732"><a id="__codelineno-0-3732" name="__codelineno-0-3732"></a>        <span class="n">aux</span> <span class="o">=</span> <span class="n">aux</span> <span class="o">*</span> <span class="n">aux</span> <span class="c1"># faster pow 2</span>
</span><span id="__span-0-3733"><a id="__codelineno-0-3733" name="__codelineno-0-3733"></a>        <span class="n">aux</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">aux</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>
</span><span id="__span-0-3734"><a id="__codelineno-0-3734" name="__codelineno-0-3734"></a>        <span class="k">if</span> <span class="n">axis</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
</span><span id="__span-0-3735"><a id="__codelineno-0-3735" name="__codelineno-0-3735"></a>            <span class="n">aux</span> <span class="o">=</span> <span class="n">aux</span><span class="p">[::</span><span class="n">each_n_beams</span><span class="p">]</span>
</span><span id="__span-0-3736"><a id="__codelineno-0-3736" name="__codelineno-0-3736"></a>        <span class="k">elif</span> <span class="n">axis</span><span class="o">==</span><span class="mi">2</span><span class="p">:</span>
</span><span id="__span-0-3737"><a id="__codelineno-0-3737" name="__codelineno-0-3737"></a>            <span class="n">aux</span> <span class="o">=</span> <span class="n">aux</span><span class="p">[:,</span> <span class="p">::</span><span class="n">each_n_beams</span><span class="p">]</span>
</span><span id="__span-0-3738"><a id="__codelineno-0-3738" name="__codelineno-0-3738"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-3739"><a id="__codelineno-0-3739" name="__codelineno-0-3739"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[ERROR]: Wrong axis over which to do pipeline_operations_rfsoc_rx_ndarray&quot;</span><span class="p">)</span>
</span><span id="__span-0-3740"><a id="__codelineno-0-3740" name="__codelineno-0-3740"></a>        <span class="c1"># Compute 10-time-snaps block mean</span>
</span><span id="__span-0-3741"><a id="__codelineno-0-3741" name="__codelineno-0-3741"></a>        <span class="c1">#self.data_to_visualize = compute_block_mean_2d_array(self.data_to_visualize, 10)</span>
</span><span id="__span-0-3742"><a id="__codelineno-0-3742" name="__codelineno-0-3742"></a>
</span><span id="__span-0-3743"><a id="__codelineno-0-3743" name="__codelineno-0-3743"></a>        <span class="n">aux</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">aux</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
</span><span id="__span-0-3744"><a id="__codelineno-0-3744" name="__codelineno-0-3744"></a>        <span class="k">return</span> <span class="n">aux</span>
</span><span id="__span-0-3745"><a id="__codelineno-0-3745" name="__codelineno-0-3745"></a>
</span><span id="__span-0-3746"><a id="__codelineno-0-3746" name="__codelineno-0-3746"></a>    <span class="k">def</span> <span class="nf">save_hest_buffer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">register_time</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="__span-0-3747"><a id="__codelineno-0-3747" name="__codelineno-0-3747"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-3748"><a id="__codelineno-0-3748" name="__codelineno-0-3748"></a><span class="sd">        Saves the raw (time-snaps, n_beams, n_delay_taps) CIR array.</span>
</span><span id="__span-0-3749"><a id="__codelineno-0-3749" name="__codelineno-0-3749"></a>
</span><span id="__span-0-3750"><a id="__codelineno-0-3750" name="__codelineno-0-3750"></a><span class="sd">        Args:</span>
</span><span id="__span-0-3751"><a id="__codelineno-0-3751" name="__codelineno-0-3751"></a><span class="sd">            register_time (bool, optional): parameter used for debugging purposes. Defaults to True.</span>
</span><span id="__span-0-3752"><a id="__codelineno-0-3752" name="__codelineno-0-3752"></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-0-3753"><a id="__codelineno-0-3753" name="__codelineno-0-3753"></a>
</span><span id="__span-0-3754"><a id="__codelineno-0-3754" name="__codelineno-0-3754"></a>        <span class="n">datestr</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
</span><span id="__span-0-3755"><a id="__codelineno-0-3755" name="__codelineno-0-3755"></a>        <span class="n">datestr</span> <span class="o">=</span> <span class="n">datestr</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">-%H-%M-%S-</span><span class="si">%f</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="__span-0-3756"><a id="__codelineno-0-3756" name="__codelineno-0-3756"></a>
</span><span id="__span-0-3757"><a id="__codelineno-0-3757" name="__codelineno-0-3757"></a>        <span class="c1"># Double check that there is something in the array</span>
</span><span id="__span-0-3758"><a id="__codelineno-0-3758" name="__codelineno-0-3758"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hest</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-0-3759"><a id="__codelineno-0-3759" name="__codelineno-0-3759"></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;../Measurement Files/&#39;</span> <span class="o">+</span> <span class="n">datestr</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename_to_save</span> <span class="o">+</span> <span class="s1">&#39;.npy&#39;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="__span-0-3760"><a id="__codelineno-0-3760" name="__codelineno-0-3760"></a>                <span class="c1">#np.save(f, np.stack(self.hest, axis=0))</span>
</span><span id="__span-0-3761"><a id="__codelineno-0-3761" name="__codelineno-0-3761"></a>                <span class="n">np</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hest</span><span class="p">))</span>
</span><span id="__span-0-3762"><a id="__codelineno-0-3762" name="__codelineno-0-3762"></a>
</span><span id="__span-0-3763"><a id="__codelineno-0-3763" name="__codelineno-0-3763"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG]: Saved file &quot;</span><span class="p">,</span> <span class="n">datestr</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename_to_save</span> <span class="o">+</span> <span class="s1">&#39;.npy&#39;</span><span class="p">)</span>
</span><span id="__span-0-3764"><a id="__codelineno-0-3764" name="__codelineno-0-3764"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG]: Saved file &quot;</span><span class="p">,</span> <span class="n">datestr</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename_to_save</span> <span class="o">+</span> <span class="s1">&#39;-TIMETAGS&#39;</span> <span class="o">+</span> <span class="s1">&#39;.npy&#39;</span><span class="p">)</span>
</span><span id="__span-0-3765"><a id="__codelineno-0-3765" name="__codelineno-0-3765"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hest</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-0-3766"><a id="__codelineno-0-3766" name="__codelineno-0-3766"></a>
</span><span id="__span-0-3767"><a id="__codelineno-0-3767" name="__codelineno-0-3767"></a>        <span class="k">if</span> <span class="n">register_time</span><span class="p">:</span>
</span><span id="__span-0-3768"><a id="__codelineno-0-3768" name="__codelineno-0-3768"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">start_time_pap_callback</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-0-3769"><a id="__codelineno-0-3769" name="__codelineno-0-3769"></a>
</span><span id="__span-0-3770"><a id="__codelineno-0-3770" name="__codelineno-0-3770"></a>    <span class="k">def</span> <span class="nf">start_thread_receive_meas_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg_data</span><span class="p">):</span>
</span><span id="__span-0-3771"><a id="__codelineno-0-3771" name="__codelineno-0-3771"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-3772"><a id="__codelineno-0-3772" name="__codelineno-0-3772"></a><span class="sd">        Creates and starts the rfsoc thread.</span>
</span><span id="__span-0-3773"><a id="__codelineno-0-3773" name="__codelineno-0-3773"></a>
</span><span id="__span-0-3774"><a id="__codelineno-0-3774" name="__codelineno-0-3774"></a><span class="sd">        A thread -instead of a subprocess- is good enough since the computational expense of the task is not donde in the host computer but in the RFSoC. The host just reads the data through Ethernet.</span>
</span><span id="__span-0-3775"><a id="__codelineno-0-3775" name="__codelineno-0-3775"></a>
</span><span id="__span-0-3776"><a id="__codelineno-0-3776" name="__codelineno-0-3776"></a><span class="sd">        A new thread is started each time this function is called. It is required for the developer to call &#39;stop_thread_receive_meas_data&#39; before calling again this function in order to close the actual thread before creating a new one.</span>
</span><span id="__span-0-3777"><a id="__codelineno-0-3777" name="__codelineno-0-3777"></a>
</span><span id="__span-0-3778"><a id="__codelineno-0-3778" name="__codelineno-0-3778"></a><span class="sd">        Args:</span>
</span><span id="__span-0-3779"><a id="__codelineno-0-3779" name="__codelineno-0-3779"></a><span class="sd">            msg_data (dict): dictionary containing the parameters required by ``set_rx_rf`` to set a Sivers EVK configuration. </span>
</span><span id="__span-0-3780"><a id="__codelineno-0-3780" name="__codelineno-0-3780"></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-0-3781"><a id="__codelineno-0-3781" name="__codelineno-0-3781"></a>
</span><span id="__span-0-3782"><a id="__codelineno-0-3782" name="__codelineno-0-3782"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">event_stop_thread_rx_irf</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>                
</span><span id="__span-0-3783"><a id="__codelineno-0-3783" name="__codelineno-0-3783"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">thread_rx_irf</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">receive_signal_async</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">event_stop_thread_rx_irf</span><span class="p">,))</span>
</span><span id="__span-0-3784"><a id="__codelineno-0-3784" name="__codelineno-0-3784"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_rx_rf</span><span class="p">(</span><span class="n">carrier_freq</span><span class="o">=</span><span class="n">msg_data</span><span class="p">[</span><span class="s1">&#39;carrier_freq&#39;</span><span class="p">],</span>
</span><span id="__span-0-3785"><a id="__codelineno-0-3785" name="__codelineno-0-3785"></a>                       <span class="n">rx_gain_ctrl_bb1</span><span class="o">=</span><span class="n">msg_data</span><span class="p">[</span><span class="s1">&#39;rx_gain_ctrl_bb1&#39;</span><span class="p">],</span>
</span><span id="__span-0-3786"><a id="__codelineno-0-3786" name="__codelineno-0-3786"></a>                       <span class="n">rx_gain_ctrl_bb2</span><span class="o">=</span><span class="n">msg_data</span><span class="p">[</span><span class="s1">&#39;rx_gain_ctrl_bb2&#39;</span><span class="p">],</span>
</span><span id="__span-0-3787"><a id="__codelineno-0-3787" name="__codelineno-0-3787"></a>                       <span class="n">rx_gain_ctrl_bb3</span><span class="o">=</span><span class="n">msg_data</span><span class="p">[</span><span class="s1">&#39;rx_gain_ctrl_bb3&#39;</span><span class="p">],</span>
</span><span id="__span-0-3788"><a id="__codelineno-0-3788" name="__codelineno-0-3788"></a>                       <span class="n">rx_gain_ctrl_bfrf</span><span class="o">=</span><span class="n">msg_data</span><span class="p">[</span><span class="s1">&#39;rx_gain_ctrl_bfrf&#39;</span><span class="p">])</span>
</span><span id="__span-0-3789"><a id="__codelineno-0-3789" name="__codelineno-0-3789"></a>        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
</span><span id="__span-0-3790"><a id="__codelineno-0-3790" name="__codelineno-0-3790"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">time_begin_receive_thread</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-0-3791"><a id="__codelineno-0-3791" name="__codelineno-0-3791"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">thread_rx_irf</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="__span-0-3792"><a id="__codelineno-0-3792" name="__codelineno-0-3792"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">start_time_pap_callback</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-0-3793"><a id="__codelineno-0-3793" name="__codelineno-0-3793"></a>
</span><span id="__span-0-3794"><a id="__codelineno-0-3794" name="__codelineno-0-3794"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG]: receive_signal_async thread STARTED&quot;</span><span class="p">)</span>
</span><span id="__span-0-3795"><a id="__codelineno-0-3795" name="__codelineno-0-3795"></a>
</span><span id="__span-0-3796"><a id="__codelineno-0-3796" name="__codelineno-0-3796"></a>    <span class="k">def</span> <span class="nf">stop_thread_receive_meas_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-0-3797"><a id="__codelineno-0-3797" name="__codelineno-0-3797"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-3798"><a id="__codelineno-0-3798" name="__codelineno-0-3798"></a><span class="sd">        Stops the rfsoc thread and saves remaining CIRs.</span>
</span><span id="__span-0-3799"><a id="__codelineno-0-3799" name="__codelineno-0-3799"></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-0-3800"><a id="__codelineno-0-3800" name="__codelineno-0-3800"></a>
</span><span id="__span-0-3801"><a id="__codelineno-0-3801" name="__codelineno-0-3801"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">event_stop_thread_rx_irf</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
</span><span id="__span-0-3802"><a id="__codelineno-0-3802" name="__codelineno-0-3802"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">time_finish_receive_thread</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-0-3803"><a id="__codelineno-0-3803" name="__codelineno-0-3803"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG]: receive_signal_async thread STOPPED&quot;</span><span class="p">)</span>
</span><span id="__span-0-3804"><a id="__codelineno-0-3804" name="__codelineno-0-3804"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG]: Received calls: &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_receive_calls</span><span class="p">)</span>
</span><span id="__span-0-3805"><a id="__codelineno-0-3805" name="__codelineno-0-3805"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG]: Avg. time of execution of &#39;receive_signal&#39; callback is &quot;</span><span class="p">,</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">time_finish_receive_thread</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_begin_receive_thread</span><span class="p">)</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">n_receive_calls</span><span class="p">))</span>
</span><span id="__span-0-3806"><a id="__codelineno-0-3806" name="__codelineno-0-3806"></a>
</span><span id="__span-0-3807"><a id="__codelineno-0-3807" name="__codelineno-0-3807"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">save_hest_buffer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">register_time</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="__span-0-3808"><a id="__codelineno-0-3808" name="__codelineno-0-3808"></a>
</span><span id="__span-0-3809"><a id="__codelineno-0-3809" name="__codelineno-0-3809"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">n_receive_calls</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-0-3810"><a id="__codelineno-0-3810" name="__codelineno-0-3810"></a>
</span><span id="__span-0-3811"><a id="__codelineno-0-3811" name="__codelineno-0-3811"></a>    <span class="k">def</span> <span class="nf">finish_measurement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-0-3812"><a id="__codelineno-0-3812" name="__codelineno-0-3812"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-3813"><a id="__codelineno-0-3813" name="__codelineno-0-3813"></a><span class="sd">        Kills the rfsoc if it is still alive and saves the remaining CIRs.</span>
</span><span id="__span-0-3814"><a id="__codelineno-0-3814" name="__codelineno-0-3814"></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-0-3815"><a id="__codelineno-0-3815" name="__codelineno-0-3815"></a>        <span class="c1"># Check if the thread is finished and if not stop it</span>
</span><span id="__span-0-3816"><a id="__codelineno-0-3816" name="__codelineno-0-3816"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">thread_rx_irf</span><span class="o">.</span><span class="n">is_alive</span><span class="p">():</span>
</span><span id="__span-0-3817"><a id="__codelineno-0-3817" name="__codelineno-0-3817"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">stop_thread_receive_meas_data</span><span class="p">()</span>
</span><span id="__span-0-3818"><a id="__codelineno-0-3818" name="__codelineno-0-3818"></a>
</span><span id="__span-0-3819"><a id="__codelineno-0-3819" name="__codelineno-0-3819"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">save_hest_buffer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">register_time</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h2 id="a2gmeasurements.RFSoCRemoteControlFromHost.__init__" class="doc doc-heading">
          <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">radio_control_port</span><span class="o">=</span><span class="mi">8080</span><span class="p">,</span> <span class="n">radio_data_port</span><span class="o">=</span><span class="mi">8081</span><span class="p">,</span> <span class="n">rfsoc_static_ip_address</span><span class="o">=</span><span class="s1">&#39;10.1.1.40&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;PDAPs&#39;</span><span class="p">,</span> <span class="n">operating_freq</span><span class="o">=</span><span class="mf">57510000000.0</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Creates two sockets: one for control commands and another for transfer data.</p>
<p>Establish the connection between the client and the RFSoC.</p>
<p>Some important attributes of this class are:</p>
<ol>
<li>
<p><code>beam_idx_for_vis</code>: this attribute sets the index of the beams of the measured Channel Impulse Response (CIR) that are sent from the drone node to the ground node to be displayed in the GUI.</p>
</li>
<li>
<p><code>TIME_SNAPS_TO_SAVE</code>: number of CIR snapshots to collect before save them on disk.</p>
</li>
<li>
<p><code>TIME_SNAPS_TO_VIS</code>: number of CIR snapshots to be displayed. This value is set depending on the max bytes that can be send through Ethernet in a single message (i.e. 22 time snaps * 16 beams * 4 bytes-per-PAP-entry = 1408 bytes)</p>
</li>
<li>
<p><code>nbeams</code>: number of beams of the CIR to be retrieved from the server.</p>
</li>
<li>
<p><code>nread</code>: number of delay taps of the CIR to be retrieved from the server.</p>
</li>
<li>
<p><code>nbytes</code>: number of bytes of a full CIR (1 time snapshot, 64 beams, 1024 delay taps)</p>
</li>
<li>
<p><code>beam_angles</code>: list of beam angles used in beamforming. Beam angle at index 0 corresponds to the omnidirectional case.</p>
</li>
</ol>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>radio_control_port</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>port for "control socket". Defaults to 8080.</p>
            </div>
          </td>
          <td>
                <code>8080</code>
          </td>
        </tr>
        <tr>
          <td><code>radio_data_port</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>port for "data socket". Defaults to 8081.</p>
            </div>
          </td>
          <td>
                <code>8081</code>
          </td>
        </tr>
        <tr>
          <td><code>rfsoc_static_ip_address</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>static IP address of the rfsoc ethernet interface. Defaults to '10.1.1.40'.</p>
            </div>
          </td>
          <td>
                <code>&#39;10.1.1.40&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>filename</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>name to be used when saving the CIRs. Defaults to 'PDAPs'.</p>
            </div>
          </td>
          <td>
                <code>&#39;PDAPs&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>operating_freq</code></td>
          <td>
                <code>_type_</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>operating frequency for the antenna array front end. Defaults to 57.51e9.</p>
            </div>
          </td>
          <td>
                <code>57510000000.0</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>a2gmeasurements.py</code></summary>
            <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3482">3482</a></span>
<span class="normal"><a href="#__codelineno-0-3483">3483</a></span>
<span class="normal"><a href="#__codelineno-0-3484">3484</a></span>
<span class="normal"><a href="#__codelineno-0-3485">3485</a></span>
<span class="normal"><a href="#__codelineno-0-3486">3486</a></span>
<span class="normal"><a href="#__codelineno-0-3487">3487</a></span>
<span class="normal"><a href="#__codelineno-0-3488">3488</a></span>
<span class="normal"><a href="#__codelineno-0-3489">3489</a></span>
<span class="normal"><a href="#__codelineno-0-3490">3490</a></span>
<span class="normal"><a href="#__codelineno-0-3491">3491</a></span>
<span class="normal"><a href="#__codelineno-0-3492">3492</a></span>
<span class="normal"><a href="#__codelineno-0-3493">3493</a></span>
<span class="normal"><a href="#__codelineno-0-3494">3494</a></span>
<span class="normal"><a href="#__codelineno-0-3495">3495</a></span>
<span class="normal"><a href="#__codelineno-0-3496">3496</a></span>
<span class="normal"><a href="#__codelineno-0-3497">3497</a></span>
<span class="normal"><a href="#__codelineno-0-3498">3498</a></span>
<span class="normal"><a href="#__codelineno-0-3499">3499</a></span>
<span class="normal"><a href="#__codelineno-0-3500">3500</a></span>
<span class="normal"><a href="#__codelineno-0-3501">3501</a></span>
<span class="normal"><a href="#__codelineno-0-3502">3502</a></span>
<span class="normal"><a href="#__codelineno-0-3503">3503</a></span>
<span class="normal"><a href="#__codelineno-0-3504">3504</a></span>
<span class="normal"><a href="#__codelineno-0-3505">3505</a></span>
<span class="normal"><a href="#__codelineno-0-3506">3506</a></span>
<span class="normal"><a href="#__codelineno-0-3507">3507</a></span>
<span class="normal"><a href="#__codelineno-0-3508">3508</a></span>
<span class="normal"><a href="#__codelineno-0-3509">3509</a></span>
<span class="normal"><a href="#__codelineno-0-3510">3510</a></span>
<span class="normal"><a href="#__codelineno-0-3511">3511</a></span>
<span class="normal"><a href="#__codelineno-0-3512">3512</a></span>
<span class="normal"><a href="#__codelineno-0-3513">3513</a></span>
<span class="normal"><a href="#__codelineno-0-3514">3514</a></span>
<span class="normal"><a href="#__codelineno-0-3515">3515</a></span>
<span class="normal"><a href="#__codelineno-0-3516">3516</a></span>
<span class="normal"><a href="#__codelineno-0-3517">3517</a></span>
<span class="normal"><a href="#__codelineno-0-3518">3518</a></span>
<span class="normal"><a href="#__codelineno-0-3519">3519</a></span>
<span class="normal"><a href="#__codelineno-0-3520">3520</a></span>
<span class="normal"><a href="#__codelineno-0-3521">3521</a></span>
<span class="normal"><a href="#__codelineno-0-3522">3522</a></span>
<span class="normal"><a href="#__codelineno-0-3523">3523</a></span>
<span class="normal"><a href="#__codelineno-0-3524">3524</a></span>
<span class="normal"><a href="#__codelineno-0-3525">3525</a></span>
<span class="normal"><a href="#__codelineno-0-3526">3526</a></span>
<span class="normal"><a href="#__codelineno-0-3527">3527</a></span>
<span class="normal"><a href="#__codelineno-0-3528">3528</a></span>
<span class="normal"><a href="#__codelineno-0-3529">3529</a></span>
<span class="normal"><a href="#__codelineno-0-3530">3530</a></span>
<span class="normal"><a href="#__codelineno-0-3531">3531</a></span>
<span class="normal"><a href="#__codelineno-0-3532">3532</a></span>
<span class="normal"><a href="#__codelineno-0-3533">3533</a></span>
<span class="normal"><a href="#__codelineno-0-3534">3534</a></span>
<span class="normal"><a href="#__codelineno-0-3535">3535</a></span>
<span class="normal"><a href="#__codelineno-0-3536">3536</a></span>
<span class="normal"><a href="#__codelineno-0-3537">3537</a></span>
<span class="normal"><a href="#__codelineno-0-3538">3538</a></span>
<span class="normal"><a href="#__codelineno-0-3539">3539</a></span>
<span class="normal"><a href="#__codelineno-0-3540">3540</a></span>
<span class="normal"><a href="#__codelineno-0-3541">3541</a></span>
<span class="normal"><a href="#__codelineno-0-3542">3542</a></span>
<span class="normal"><a href="#__codelineno-0-3543">3543</a></span>
<span class="normal"><a href="#__codelineno-0-3544">3544</a></span>
<span class="normal"><a href="#__codelineno-0-3545">3545</a></span>
<span class="normal"><a href="#__codelineno-0-3546">3546</a></span>
<span class="normal"><a href="#__codelineno-0-3547">3547</a></span>
<span class="normal"><a href="#__codelineno-0-3548">3548</a></span>
<span class="normal"><a href="#__codelineno-0-3549">3549</a></span>
<span class="normal"><a href="#__codelineno-0-3550">3550</a></span>
<span class="normal"><a href="#__codelineno-0-3551">3551</a></span>
<span class="normal"><a href="#__codelineno-0-3552">3552</a></span>
<span class="normal"><a href="#__codelineno-0-3553">3553</a></span>
<span class="normal"><a href="#__codelineno-0-3554">3554</a></span>
<span class="normal"><a href="#__codelineno-0-3555">3555</a></span>
<span class="normal"><a href="#__codelineno-0-3556">3556</a></span>
<span class="normal"><a href="#__codelineno-0-3557">3557</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-3482"><a id="__codelineno-0-3482" name="__codelineno-0-3482"></a><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">radio_control_port</span><span class="o">=</span><span class="mi">8080</span><span class="p">,</span> <span class="n">radio_data_port</span><span class="o">=</span><span class="mi">8081</span><span class="p">,</span> <span class="n">rfsoc_static_ip_address</span><span class="o">=</span><span class="s1">&#39;10.1.1.40&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;PDAPs&#39;</span><span class="p">,</span> <span class="n">operating_freq</span><span class="o">=</span><span class="mf">57.51e9</span><span class="p">):</span>
</span><span id="__span-0-3483"><a id="__codelineno-0-3483" name="__codelineno-0-3483"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-3484"><a id="__codelineno-0-3484" name="__codelineno-0-3484"></a><span class="sd">    Creates two sockets: one for control commands and another for transfer data.</span>
</span><span id="__span-0-3485"><a id="__codelineno-0-3485" name="__codelineno-0-3485"></a>
</span><span id="__span-0-3486"><a id="__codelineno-0-3486" name="__codelineno-0-3486"></a><span class="sd">    Establish the connection between the client and the RFSoC.</span>
</span><span id="__span-0-3487"><a id="__codelineno-0-3487" name="__codelineno-0-3487"></a>
</span><span id="__span-0-3488"><a id="__codelineno-0-3488" name="__codelineno-0-3488"></a><span class="sd">    Some important attributes of this class are:</span>
</span><span id="__span-0-3489"><a id="__codelineno-0-3489" name="__codelineno-0-3489"></a>
</span><span id="__span-0-3490"><a id="__codelineno-0-3490" name="__codelineno-0-3490"></a><span class="sd">     1. ``beam_idx_for_vis``: this attribute sets the index of the beams of the measured Channel Impulse Response (CIR) that are sent from the drone node to the ground node to be displayed in the GUI.</span>
</span><span id="__span-0-3491"><a id="__codelineno-0-3491" name="__codelineno-0-3491"></a>
</span><span id="__span-0-3492"><a id="__codelineno-0-3492" name="__codelineno-0-3492"></a><span class="sd">     2. ``TIME_SNAPS_TO_SAVE``: number of CIR snapshots to collect before save them on disk.</span>
</span><span id="__span-0-3493"><a id="__codelineno-0-3493" name="__codelineno-0-3493"></a>
</span><span id="__span-0-3494"><a id="__codelineno-0-3494" name="__codelineno-0-3494"></a><span class="sd">     3. ``TIME_SNAPS_TO_VIS``: number of CIR snapshots to be displayed. This value is set depending on the max bytes that can be send through Ethernet in a single message (i.e. 22 time snaps * 16 beams * 4 bytes-per-PAP-entry = 1408 bytes)</span>
</span><span id="__span-0-3495"><a id="__codelineno-0-3495" name="__codelineno-0-3495"></a>
</span><span id="__span-0-3496"><a id="__codelineno-0-3496" name="__codelineno-0-3496"></a><span class="sd">     4. ``nbeams``: number of beams of the CIR to be retrieved from the server.</span>
</span><span id="__span-0-3497"><a id="__codelineno-0-3497" name="__codelineno-0-3497"></a>
</span><span id="__span-0-3498"><a id="__codelineno-0-3498" name="__codelineno-0-3498"></a><span class="sd">     5. ``nread``: number of delay taps of the CIR to be retrieved from the server.</span>
</span><span id="__span-0-3499"><a id="__codelineno-0-3499" name="__codelineno-0-3499"></a>
</span><span id="__span-0-3500"><a id="__codelineno-0-3500" name="__codelineno-0-3500"></a><span class="sd">     6. ``nbytes``: number of bytes of a full CIR (1 time snapshot, 64 beams, 1024 delay taps)</span>
</span><span id="__span-0-3501"><a id="__codelineno-0-3501" name="__codelineno-0-3501"></a>
</span><span id="__span-0-3502"><a id="__codelineno-0-3502" name="__codelineno-0-3502"></a><span class="sd">     7. ``beam_angles``: list of beam angles used in beamforming. Beam angle at index 0 corresponds to the omnidirectional case.</span>
</span><span id="__span-0-3503"><a id="__codelineno-0-3503" name="__codelineno-0-3503"></a>
</span><span id="__span-0-3504"><a id="__codelineno-0-3504" name="__codelineno-0-3504"></a><span class="sd">    Args:</span>
</span><span id="__span-0-3505"><a id="__codelineno-0-3505" name="__codelineno-0-3505"></a><span class="sd">        radio_control_port (int, optional): port for &quot;control socket&quot;. Defaults to 8080.</span>
</span><span id="__span-0-3506"><a id="__codelineno-0-3506" name="__codelineno-0-3506"></a><span class="sd">        radio_data_port (int, optional): port for &quot;data socket&quot;. Defaults to 8081.</span>
</span><span id="__span-0-3507"><a id="__codelineno-0-3507" name="__codelineno-0-3507"></a><span class="sd">        rfsoc_static_ip_address (str, optional): static IP address of the rfsoc ethernet interface. Defaults to &#39;10.1.1.40&#39;.</span>
</span><span id="__span-0-3508"><a id="__codelineno-0-3508" name="__codelineno-0-3508"></a><span class="sd">        filename (str, optional): name to be used when saving the CIRs. Defaults to &#39;PDAPs&#39;.</span>
</span><span id="__span-0-3509"><a id="__codelineno-0-3509" name="__codelineno-0-3509"></a><span class="sd">        operating_freq (_type_, optional): operating frequency for the antenna array front end. Defaults to 57.51e9.</span>
</span><span id="__span-0-3510"><a id="__codelineno-0-3510" name="__codelineno-0-3510"></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-3511"><a id="__codelineno-0-3511" name="__codelineno-0-3511"></a>
</span><span id="__span-0-3512"><a id="__codelineno-0-3512" name="__codelineno-0-3512"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">operating_freq</span> <span class="o">=</span> <span class="n">operating_freq</span>
</span><span id="__span-0-3513"><a id="__codelineno-0-3513" name="__codelineno-0-3513"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">radio_control_port</span> <span class="o">=</span> <span class="n">radio_control_port</span>
</span><span id="__span-0-3514"><a id="__codelineno-0-3514" name="__codelineno-0-3514"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">radio_data_port</span> <span class="o">=</span> <span class="n">radio_data_port</span>
</span><span id="__span-0-3515"><a id="__codelineno-0-3515" name="__codelineno-0-3515"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">filename_to_save</span> <span class="o">=</span> <span class="n">filename</span>
</span><span id="__span-0-3516"><a id="__codelineno-0-3516" name="__codelineno-0-3516"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">hest</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-0-3517"><a id="__codelineno-0-3517" name="__codelineno-0-3517"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">meas_time_tag</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-0-3518"><a id="__codelineno-0-3518" name="__codelineno-0-3518"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">RFSoCSuccessExecutionAns</span> <span class="o">=</span> <span class="s2">&quot;Successully executed&quot;</span>
</span><span id="__span-0-3519"><a id="__codelineno-0-3519" name="__codelineno-0-3519"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">RFSoCSuccessAns</span> <span class="o">=</span> <span class="s2">&quot;Success&quot;</span>
</span><span id="__span-0-3520"><a id="__codelineno-0-3520" name="__codelineno-0-3520"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">n_receive_calls</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-0-3521"><a id="__codelineno-0-3521" name="__codelineno-0-3521"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">time_begin_receive_call</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-0-3522"><a id="__codelineno-0-3522" name="__codelineno-0-3522"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">time_finish_receive_call</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-0-3523"><a id="__codelineno-0-3523" name="__codelineno-0-3523"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">time_begin_receive_thread</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-0-3524"><a id="__codelineno-0-3524" name="__codelineno-0-3524"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">time_finish_receive_thread</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-0-3525"><a id="__codelineno-0-3525" name="__codelineno-0-3525"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">beam_idx_for_vis</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="mi">4</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">16</span><span class="p">)]</span>
</span><span id="__span-0-3526"><a id="__codelineno-0-3526" name="__codelineno-0-3526"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">bytes_per_irf</span> <span class="o">=</span> <span class="mi">64</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">16</span> <span class="c1"># Exactly 1 MB</span>
</span><span id="__span-0-3527"><a id="__codelineno-0-3527" name="__codelineno-0-3527"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">irfs_per_second</span> <span class="o">=</span> <span class="mi">7</span> <span class="c1"># THIS MUST BE FOUND IN BETTER A WAY</span>
</span><span id="__span-0-3528"><a id="__codelineno-0-3528" name="__codelineno-0-3528"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">TIME_SNAPS_TO_SAVE</span> <span class="o">=</span> <span class="mi">220</span>  
</span><span id="__span-0-3529"><a id="__codelineno-0-3529" name="__codelineno-0-3529"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">MAX_PAP_BUF_SIZE_BYTES</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">TIME_SNAPS_TO_SAVE</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">bytes_per_irf</span>
</span><span id="__span-0-3530"><a id="__codelineno-0-3530" name="__codelineno-0-3530"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">TIME_SNAPS_TO_VIS</span> <span class="o">=</span> <span class="mi">22</span>
</span><span id="__span-0-3531"><a id="__codelineno-0-3531" name="__codelineno-0-3531"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">TIME_GET_IRF</span> <span class="o">=</span> <span class="mf">0.14</span>
</span><span id="__span-0-3532"><a id="__codelineno-0-3532" name="__codelineno-0-3532"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">nbeams</span> <span class="o">=</span> <span class="mi">64</span>
</span><span id="__span-0-3533"><a id="__codelineno-0-3533" name="__codelineno-0-3533"></a>    <span class="n">nbytes_per_item</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="__span-0-3534"><a id="__codelineno-0-3534" name="__codelineno-0-3534"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">nread</span> <span class="o">=</span> <span class="mi">1024</span>
</span><span id="__span-0-3535"><a id="__codelineno-0-3535" name="__codelineno-0-3535"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">nbytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nbeams</span> <span class="o">*</span> <span class="n">nbytes_per_item</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">nread</span> <span class="o">*</span> <span class="mi">2</span> <span class="c1"># Beams x SubCarriers(delay taps) x 2Bytes from  INT16 x 2 frpm Real and Imaginary</span>
</span><span id="__span-0-3536"><a id="__codelineno-0-3536" name="__codelineno-0-3536"></a>
</span><span id="__span-0-3537"><a id="__codelineno-0-3537" name="__codelineno-0-3537"></a>    <span class="n">beamforming_angles_file</span> <span class="o">=</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">Users</span><span class="se">\\</span><span class="s2">jvjulian</span><span class="se">\\</span><span class="s2">OneDrive - Teknologian Tutkimuskeskus VTT</span><span class="se">\\</span><span class="s2">Documents</span><span class="se">\\</span><span class="s2">Aerial</span><span class="se">\\</span><span class="s2">Repos</span><span class="se">\\</span><span class="s2">a2gMeasurements</span><span class="se">\\</span><span class="s2">data</span><span class="se">\\</span><span class="s2">rx_sivers_beam_index_mapping.csv&quot;</span>
</span><span id="__span-0-3538"><a id="__codelineno-0-3538" name="__codelineno-0-3538"></a>
</span><span id="__span-0-3539"><a id="__codelineno-0-3539" name="__codelineno-0-3539"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">beam_angles</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">64</span>
</span><span id="__span-0-3540"><a id="__codelineno-0-3540" name="__codelineno-0-3540"></a>
</span><span id="__span-0-3541"><a id="__codelineno-0-3541" name="__codelineno-0-3541"></a>    <span class="c1"># Get the beamforming angles</span>
</span><span id="__span-0-3542"><a id="__codelineno-0-3542" name="__codelineno-0-3542"></a>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">beamforming_angles_file</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="__span-0-3543"><a id="__codelineno-0-3543" name="__codelineno-0-3543"></a>        <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
</span><span id="__span-0-3544"><a id="__codelineno-0-3544" name="__codelineno-0-3544"></a>        <span class="k">for</span> <span class="n">cnt</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">reader</span><span class="p">):</span>
</span><span id="__span-0-3545"><a id="__codelineno-0-3545" name="__codelineno-0-3545"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">beam_angles</span><span class="p">[</span><span class="n">cnt</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="__span-0-3546"><a id="__codelineno-0-3546" name="__codelineno-0-3546"></a>
</span><span id="__span-0-3547"><a id="__codelineno-0-3547" name="__codelineno-0-3547"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">radio_control</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">family</span><span class="o">=</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
</span><span id="__span-0-3548"><a id="__codelineno-0-3548" name="__codelineno-0-3548"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">radio_control</span><span class="o">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">SOL_SOCKET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SO_REUSEADDR</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-0-3549"><a id="__codelineno-0-3549" name="__codelineno-0-3549"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">radio_data</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">family</span><span class="o">=</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
</span><span id="__span-0-3550"><a id="__codelineno-0-3550" name="__codelineno-0-3550"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">radio_data</span><span class="o">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">SOL_SOCKET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SO_REUSEADDR</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-0-3551"><a id="__codelineno-0-3551" name="__codelineno-0-3551"></a>
</span><span id="__span-0-3552"><a id="__codelineno-0-3552" name="__codelineno-0-3552"></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-0-3553"><a id="__codelineno-0-3553" name="__codelineno-0-3553"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">radio_control</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="n">rfsoc_static_ip_address</span><span class="p">,</span> <span class="n">radio_control_port</span><span class="p">))</span>
</span><span id="__span-0-3554"><a id="__codelineno-0-3554" name="__codelineno-0-3554"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">radio_data</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="n">rfsoc_static_ip_address</span><span class="p">,</span> <span class="n">radio_data_port</span><span class="p">))</span>
</span><span id="__span-0-3555"><a id="__codelineno-0-3555" name="__codelineno-0-3555"></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-0-3556"><a id="__codelineno-0-3556" name="__codelineno-0-3556"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG]: Error in rfsoc socket connection: &quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span><span id="__span-0-3557"><a id="__codelineno-0-3557" name="__codelineno-0-3557"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG]: Check RFSoC ETH, and Power it Off and On&quot;</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="a2gmeasurements.RFSoCRemoteControlFromHost.finish_measurement" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">finish_measurement</span><span class="p">()</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Kills the rfsoc if it is still alive and saves the remaining CIRs.</p>

          <details class="quote">
            <summary>Source code in <code>a2gmeasurements.py</code></summary>
            <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3811">3811</a></span>
<span class="normal"><a href="#__codelineno-0-3812">3812</a></span>
<span class="normal"><a href="#__codelineno-0-3813">3813</a></span>
<span class="normal"><a href="#__codelineno-0-3814">3814</a></span>
<span class="normal"><a href="#__codelineno-0-3815">3815</a></span>
<span class="normal"><a href="#__codelineno-0-3816">3816</a></span>
<span class="normal"><a href="#__codelineno-0-3817">3817</a></span>
<span class="normal"><a href="#__codelineno-0-3818">3818</a></span>
<span class="normal"><a href="#__codelineno-0-3819">3819</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-3811"><a id="__codelineno-0-3811" name="__codelineno-0-3811"></a><span class="k">def</span> <span class="nf">finish_measurement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-0-3812"><a id="__codelineno-0-3812" name="__codelineno-0-3812"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-3813"><a id="__codelineno-0-3813" name="__codelineno-0-3813"></a><span class="sd">    Kills the rfsoc if it is still alive and saves the remaining CIRs.</span>
</span><span id="__span-0-3814"><a id="__codelineno-0-3814" name="__codelineno-0-3814"></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-3815"><a id="__codelineno-0-3815" name="__codelineno-0-3815"></a>    <span class="c1"># Check if the thread is finished and if not stop it</span>
</span><span id="__span-0-3816"><a id="__codelineno-0-3816" name="__codelineno-0-3816"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">thread_rx_irf</span><span class="o">.</span><span class="n">is_alive</span><span class="p">():</span>
</span><span id="__span-0-3817"><a id="__codelineno-0-3817" name="__codelineno-0-3817"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop_thread_receive_meas_data</span><span class="p">()</span>
</span><span id="__span-0-3818"><a id="__codelineno-0-3818" name="__codelineno-0-3818"></a>
</span><span id="__span-0-3819"><a id="__codelineno-0-3819" name="__codelineno-0-3819"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">save_hest_buffer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">register_time</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="a2gmeasurements.RFSoCRemoteControlFromHost.maximum_power_direction" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">maximum_power_direction</span><span class="p">(</span><span class="n">array</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Computes the beamforming angle (azimuth) of maximum power at the receiver.</p>
<p>The time under consideration should be short or less than the inverse of the rate of change of the direction of maximum power.</p>
<p>The rate of change of the direction of maximum power is not easy to compute or assume, but we can restrict the computation of the direction to a window of a given ms.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>array</code></td>
          <td>
                <code><span title="numpy.ndarray">ndarray</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>this is the array having the IRFs. Its dimensionality is Time x 64 x 2044.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>angleMaxPower</code></td>          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>contains the (azimuth) angles for maximum power across all the time snapshots considered. Has 64 entries.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>a2gmeasurements.py</code></summary>
            <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3692">3692</a></span>
<span class="normal"><a href="#__codelineno-0-3693">3693</a></span>
<span class="normal"><a href="#__codelineno-0-3694">3694</a></span>
<span class="normal"><a href="#__codelineno-0-3695">3695</a></span>
<span class="normal"><a href="#__codelineno-0-3696">3696</a></span>
<span class="normal"><a href="#__codelineno-0-3697">3697</a></span>
<span class="normal"><a href="#__codelineno-0-3698">3698</a></span>
<span class="normal"><a href="#__codelineno-0-3699">3699</a></span>
<span class="normal"><a href="#__codelineno-0-3700">3700</a></span>
<span class="normal"><a href="#__codelineno-0-3701">3701</a></span>
<span class="normal"><a href="#__codelineno-0-3702">3702</a></span>
<span class="normal"><a href="#__codelineno-0-3703">3703</a></span>
<span class="normal"><a href="#__codelineno-0-3704">3704</a></span>
<span class="normal"><a href="#__codelineno-0-3705">3705</a></span>
<span class="normal"><a href="#__codelineno-0-3706">3706</a></span>
<span class="normal"><a href="#__codelineno-0-3707">3707</a></span>
<span class="normal"><a href="#__codelineno-0-3708">3708</a></span>
<span class="normal"><a href="#__codelineno-0-3709">3709</a></span>
<span class="normal"><a href="#__codelineno-0-3710">3710</a></span>
<span class="normal"><a href="#__codelineno-0-3711">3711</a></span>
<span class="normal"><a href="#__codelineno-0-3712">3712</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-3692"><a id="__codelineno-0-3692" name="__codelineno-0-3692"></a><span class="k">def</span> <span class="nf">maximum_power_direction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">array</span><span class="p">):</span>
</span><span id="__span-0-3693"><a id="__codelineno-0-3693" name="__codelineno-0-3693"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-3694"><a id="__codelineno-0-3694" name="__codelineno-0-3694"></a><span class="sd">    Computes the beamforming angle (azimuth) of maximum power at the receiver.</span>
</span><span id="__span-0-3695"><a id="__codelineno-0-3695" name="__codelineno-0-3695"></a>
</span><span id="__span-0-3696"><a id="__codelineno-0-3696" name="__codelineno-0-3696"></a><span class="sd">    The time under consideration should be short or less than the inverse of the rate of change of the direction of maximum power.</span>
</span><span id="__span-0-3697"><a id="__codelineno-0-3697" name="__codelineno-0-3697"></a>
</span><span id="__span-0-3698"><a id="__codelineno-0-3698" name="__codelineno-0-3698"></a><span class="sd">    The rate of change of the direction of maximum power is not easy to compute or assume, but we can restrict the computation of the direction to a window of a given ms.</span>
</span><span id="__span-0-3699"><a id="__codelineno-0-3699" name="__codelineno-0-3699"></a>
</span><span id="__span-0-3700"><a id="__codelineno-0-3700" name="__codelineno-0-3700"></a><span class="sd">    Args:</span>
</span><span id="__span-0-3701"><a id="__codelineno-0-3701" name="__codelineno-0-3701"></a><span class="sd">        array (numpy.ndarray): this is the array having the IRFs. Its dimensionality is Time x 64 x 2044.</span>
</span><span id="__span-0-3702"><a id="__codelineno-0-3702" name="__codelineno-0-3702"></a>
</span><span id="__span-0-3703"><a id="__codelineno-0-3703" name="__codelineno-0-3703"></a><span class="sd">    Returns:</span>
</span><span id="__span-0-3704"><a id="__codelineno-0-3704" name="__codelineno-0-3704"></a><span class="sd">        angleMaxPower (list): contains the (azimuth) angles for maximum power across all the time snapshots considered. Has 64 entries.</span>
</span><span id="__span-0-3705"><a id="__codelineno-0-3705" name="__codelineno-0-3705"></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-3706"><a id="__codelineno-0-3706" name="__codelineno-0-3706"></a>    <span class="n">aux</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">array</span><span class="p">)</span> 
</span><span id="__span-0-3707"><a id="__codelineno-0-3707" name="__codelineno-0-3707"></a>    <span class="n">aux</span> <span class="o">=</span> <span class="n">aux</span> <span class="o">*</span> <span class="n">aux</span> <span class="c1"># faster pow 2</span>
</span><span id="__span-0-3708"><a id="__codelineno-0-3708" name="__codelineno-0-3708"></a>    <span class="n">aux</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">aux</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="__span-0-3709"><a id="__codelineno-0-3709" name="__codelineno-0-3709"></a>
</span><span id="__span-0-3710"><a id="__codelineno-0-3710" name="__codelineno-0-3710"></a>    <span class="c1"># This is an Nbeams array</span>
</span><span id="__span-0-3711"><a id="__codelineno-0-3711" name="__codelineno-0-3711"></a>    <span class="n">idx_max_power</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">aux</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-0-3712"><a id="__codelineno-0-3712" name="__codelineno-0-3712"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">beam_angles</span><span class="p">[</span><span class="n">idx_max_power</span><span class="p">]</span>        
</span></code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="a2gmeasurements.RFSoCRemoteControlFromHost.pipeline_operations_rfsoc_rx_ndarray" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">pipeline_operations_rfsoc_rx_ndarray</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">each_n_beams</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Computes the PAP for a single snapshot CIR (64 beams * 1024 delay taps) or the PAPs of multiple snapshots CIR (snaps * 64 beams * 1024 delay taps).</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>array</code></td>
          <td>
                <code><span title="numpy.ndarray">ndarray</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>CIRs. If it has 2 dimensions the CIR correspond to a single snapshot, if it has 3 dimensions, the CIR correspond to multiple snapshots.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>axis</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>delay tap axis, either 0, 1 and 2.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>each_n_beams</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>subsample the 64 beams by this value. Defaults to 4.</p>
            </div>
          </td>
          <td>
                <code>4</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>aux</code></td>          <td>
                <code><span title="numpy.ndarray">ndarray</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>computed PAP "subsampled" version.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>a2gmeasurements.py</code></summary>
            <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3714">3714</a></span>
<span class="normal"><a href="#__codelineno-0-3715">3715</a></span>
<span class="normal"><a href="#__codelineno-0-3716">3716</a></span>
<span class="normal"><a href="#__codelineno-0-3717">3717</a></span>
<span class="normal"><a href="#__codelineno-0-3718">3718</a></span>
<span class="normal"><a href="#__codelineno-0-3719">3719</a></span>
<span class="normal"><a href="#__codelineno-0-3720">3720</a></span>
<span class="normal"><a href="#__codelineno-0-3721">3721</a></span>
<span class="normal"><a href="#__codelineno-0-3722">3722</a></span>
<span class="normal"><a href="#__codelineno-0-3723">3723</a></span>
<span class="normal"><a href="#__codelineno-0-3724">3724</a></span>
<span class="normal"><a href="#__codelineno-0-3725">3725</a></span>
<span class="normal"><a href="#__codelineno-0-3726">3726</a></span>
<span class="normal"><a href="#__codelineno-0-3727">3727</a></span>
<span class="normal"><a href="#__codelineno-0-3728">3728</a></span>
<span class="normal"><a href="#__codelineno-0-3729">3729</a></span>
<span class="normal"><a href="#__codelineno-0-3730">3730</a></span>
<span class="normal"><a href="#__codelineno-0-3731">3731</a></span>
<span class="normal"><a href="#__codelineno-0-3732">3732</a></span>
<span class="normal"><a href="#__codelineno-0-3733">3733</a></span>
<span class="normal"><a href="#__codelineno-0-3734">3734</a></span>
<span class="normal"><a href="#__codelineno-0-3735">3735</a></span>
<span class="normal"><a href="#__codelineno-0-3736">3736</a></span>
<span class="normal"><a href="#__codelineno-0-3737">3737</a></span>
<span class="normal"><a href="#__codelineno-0-3738">3738</a></span>
<span class="normal"><a href="#__codelineno-0-3739">3739</a></span>
<span class="normal"><a href="#__codelineno-0-3740">3740</a></span>
<span class="normal"><a href="#__codelineno-0-3741">3741</a></span>
<span class="normal"><a href="#__codelineno-0-3742">3742</a></span>
<span class="normal"><a href="#__codelineno-0-3743">3743</a></span>
<span class="normal"><a href="#__codelineno-0-3744">3744</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-3714"><a id="__codelineno-0-3714" name="__codelineno-0-3714"></a><span class="k">def</span> <span class="nf">pipeline_operations_rfsoc_rx_ndarray</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">array</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">each_n_beams</span><span class="o">=</span><span class="mi">4</span><span class="p">):</span>
</span><span id="__span-0-3715"><a id="__codelineno-0-3715" name="__codelineno-0-3715"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-3716"><a id="__codelineno-0-3716" name="__codelineno-0-3716"></a><span class="sd">    Computes the PAP for a single snapshot CIR (64 beams * 1024 delay taps) or the PAPs of multiple snapshots CIR (snaps * 64 beams * 1024 delay taps).</span>
</span><span id="__span-0-3717"><a id="__codelineno-0-3717" name="__codelineno-0-3717"></a>
</span><span id="__span-0-3718"><a id="__codelineno-0-3718" name="__codelineno-0-3718"></a><span class="sd">    Args:</span>
</span><span id="__span-0-3719"><a id="__codelineno-0-3719" name="__codelineno-0-3719"></a><span class="sd">        array (numpy.ndarray): CIRs. If it has 2 dimensions the CIR correspond to a single snapshot, if it has 3 dimensions, the CIR correspond to multiple snapshots.</span>
</span><span id="__span-0-3720"><a id="__codelineno-0-3720" name="__codelineno-0-3720"></a><span class="sd">        axis (int): delay tap axis, either 0, 1 and 2.</span>
</span><span id="__span-0-3721"><a id="__codelineno-0-3721" name="__codelineno-0-3721"></a><span class="sd">        each_n_beams (int, optional): subsample the 64 beams by this value. Defaults to 4.</span>
</span><span id="__span-0-3722"><a id="__codelineno-0-3722" name="__codelineno-0-3722"></a>
</span><span id="__span-0-3723"><a id="__codelineno-0-3723" name="__codelineno-0-3723"></a><span class="sd">    Returns:</span>
</span><span id="__span-0-3724"><a id="__codelineno-0-3724" name="__codelineno-0-3724"></a><span class="sd">        aux (numpy.ndarray): computed PAP &quot;subsampled&quot; version.</span>
</span><span id="__span-0-3725"><a id="__codelineno-0-3725" name="__codelineno-0-3725"></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-3726"><a id="__codelineno-0-3726" name="__codelineno-0-3726"></a>
</span><span id="__span-0-3727"><a id="__codelineno-0-3727" name="__codelineno-0-3727"></a>    <span class="k">if</span> <span class="n">axis</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">array</span><span class="o">.</span><span class="n">shape</span><span class="p">):</span>
</span><span id="__span-0-3728"><a id="__codelineno-0-3728" name="__codelineno-0-3728"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG]: Invalid axis over which to add entries. The array has: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">array</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="si">}</span><span class="s2"> dimensions&quot;</span><span class="p">)</span>
</span><span id="__span-0-3729"><a id="__codelineno-0-3729" name="__codelineno-0-3729"></a>        <span class="k">return</span> <span class="mi">0</span>
</span><span id="__span-0-3730"><a id="__codelineno-0-3730" name="__codelineno-0-3730"></a>
</span><span id="__span-0-3731"><a id="__codelineno-0-3731" name="__codelineno-0-3731"></a>    <span class="n">aux</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">array</span><span class="p">)</span> 
</span><span id="__span-0-3732"><a id="__codelineno-0-3732" name="__codelineno-0-3732"></a>    <span class="n">aux</span> <span class="o">=</span> <span class="n">aux</span> <span class="o">*</span> <span class="n">aux</span> <span class="c1"># faster pow 2</span>
</span><span id="__span-0-3733"><a id="__codelineno-0-3733" name="__codelineno-0-3733"></a>    <span class="n">aux</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">aux</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>
</span><span id="__span-0-3734"><a id="__codelineno-0-3734" name="__codelineno-0-3734"></a>    <span class="k">if</span> <span class="n">axis</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
</span><span id="__span-0-3735"><a id="__codelineno-0-3735" name="__codelineno-0-3735"></a>        <span class="n">aux</span> <span class="o">=</span> <span class="n">aux</span><span class="p">[::</span><span class="n">each_n_beams</span><span class="p">]</span>
</span><span id="__span-0-3736"><a id="__codelineno-0-3736" name="__codelineno-0-3736"></a>    <span class="k">elif</span> <span class="n">axis</span><span class="o">==</span><span class="mi">2</span><span class="p">:</span>
</span><span id="__span-0-3737"><a id="__codelineno-0-3737" name="__codelineno-0-3737"></a>        <span class="n">aux</span> <span class="o">=</span> <span class="n">aux</span><span class="p">[:,</span> <span class="p">::</span><span class="n">each_n_beams</span><span class="p">]</span>
</span><span id="__span-0-3738"><a id="__codelineno-0-3738" name="__codelineno-0-3738"></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-3739"><a id="__codelineno-0-3739" name="__codelineno-0-3739"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[ERROR]: Wrong axis over which to do pipeline_operations_rfsoc_rx_ndarray&quot;</span><span class="p">)</span>
</span><span id="__span-0-3740"><a id="__codelineno-0-3740" name="__codelineno-0-3740"></a>    <span class="c1"># Compute 10-time-snaps block mean</span>
</span><span id="__span-0-3741"><a id="__codelineno-0-3741" name="__codelineno-0-3741"></a>    <span class="c1">#self.data_to_visualize = compute_block_mean_2d_array(self.data_to_visualize, 10)</span>
</span><span id="__span-0-3742"><a id="__codelineno-0-3742" name="__codelineno-0-3742"></a>
</span><span id="__span-0-3743"><a id="__codelineno-0-3743" name="__codelineno-0-3743"></a>    <span class="n">aux</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">aux</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
</span><span id="__span-0-3744"><a id="__codelineno-0-3744" name="__codelineno-0-3744"></a>    <span class="k">return</span> <span class="n">aux</span>
</span></code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="a2gmeasurements.RFSoCRemoteControlFromHost.receive_signal_async" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">receive_signal_async</span><span class="p">(</span><span class="n">stop_event</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Callback for the thread responsible for retrieving CIRs from RFSoC server (rfsoc thread).</p>
<p>When enough (<code>self.TIME_SNAPS_TO_VIS</code>) CIR time snapshots are available, computes the Power Angular Profile to be sent to the ground node for displaying it in the GUI.</p>
<p>When enough (<code>self.TIME_SNAPS_TO_SAVE</code>) CIR time snapshots are available, saves the CIRs on disk.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>stop_event</code></td>
          <td>
                <code><span title="threading.Event">Event</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>when set, this function does nothing (the thread can be alived but does nothing)</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>a2gmeasurements.py</code></summary>
            <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3654">3654</a></span>
<span class="normal"><a href="#__codelineno-0-3655">3655</a></span>
<span class="normal"><a href="#__codelineno-0-3656">3656</a></span>
<span class="normal"><a href="#__codelineno-0-3657">3657</a></span>
<span class="normal"><a href="#__codelineno-0-3658">3658</a></span>
<span class="normal"><a href="#__codelineno-0-3659">3659</a></span>
<span class="normal"><a href="#__codelineno-0-3660">3660</a></span>
<span class="normal"><a href="#__codelineno-0-3661">3661</a></span>
<span class="normal"><a href="#__codelineno-0-3662">3662</a></span>
<span class="normal"><a href="#__codelineno-0-3663">3663</a></span>
<span class="normal"><a href="#__codelineno-0-3664">3664</a></span>
<span class="normal"><a href="#__codelineno-0-3665">3665</a></span>
<span class="normal"><a href="#__codelineno-0-3666">3666</a></span>
<span class="normal"><a href="#__codelineno-0-3667">3667</a></span>
<span class="normal"><a href="#__codelineno-0-3668">3668</a></span>
<span class="normal"><a href="#__codelineno-0-3669">3669</a></span>
<span class="normal"><a href="#__codelineno-0-3670">3670</a></span>
<span class="normal"><a href="#__codelineno-0-3671">3671</a></span>
<span class="normal"><a href="#__codelineno-0-3672">3672</a></span>
<span class="normal"><a href="#__codelineno-0-3673">3673</a></span>
<span class="normal"><a href="#__codelineno-0-3674">3674</a></span>
<span class="normal"><a href="#__codelineno-0-3675">3675</a></span>
<span class="normal"><a href="#__codelineno-0-3676">3676</a></span>
<span class="normal"><a href="#__codelineno-0-3677">3677</a></span>
<span class="normal"><a href="#__codelineno-0-3678">3678</a></span>
<span class="normal"><a href="#__codelineno-0-3679">3679</a></span>
<span class="normal"><a href="#__codelineno-0-3680">3680</a></span>
<span class="normal"><a href="#__codelineno-0-3681">3681</a></span>
<span class="normal"><a href="#__codelineno-0-3682">3682</a></span>
<span class="normal"><a href="#__codelineno-0-3683">3683</a></span>
<span class="normal"><a href="#__codelineno-0-3684">3684</a></span>
<span class="normal"><a href="#__codelineno-0-3685">3685</a></span>
<span class="normal"><a href="#__codelineno-0-3686">3686</a></span>
<span class="normal"><a href="#__codelineno-0-3687">3687</a></span>
<span class="normal"><a href="#__codelineno-0-3688">3688</a></span>
<span class="normal"><a href="#__codelineno-0-3689">3689</a></span>
<span class="normal"><a href="#__codelineno-0-3690">3690</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-3654"><a id="__codelineno-0-3654" name="__codelineno-0-3654"></a><span class="k">def</span> <span class="nf">receive_signal_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stop_event</span><span class="p">):</span>
</span><span id="__span-0-3655"><a id="__codelineno-0-3655" name="__codelineno-0-3655"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-3656"><a id="__codelineno-0-3656" name="__codelineno-0-3656"></a><span class="sd">    Callback for the thread responsible for retrieving CIRs from RFSoC server (rfsoc thread).</span>
</span><span id="__span-0-3657"><a id="__codelineno-0-3657" name="__codelineno-0-3657"></a>
</span><span id="__span-0-3658"><a id="__codelineno-0-3658" name="__codelineno-0-3658"></a><span class="sd">    When enough (``self.TIME_SNAPS_TO_VIS``) CIR time snapshots are available, computes the Power Angular Profile to be sent to the ground node for displaying it in the GUI.</span>
</span><span id="__span-0-3659"><a id="__codelineno-0-3659" name="__codelineno-0-3659"></a>
</span><span id="__span-0-3660"><a id="__codelineno-0-3660" name="__codelineno-0-3660"></a><span class="sd">    When enough (``self.TIME_SNAPS_TO_SAVE``) CIR time snapshots are available, saves the CIRs on disk.</span>
</span><span id="__span-0-3661"><a id="__codelineno-0-3661" name="__codelineno-0-3661"></a>
</span><span id="__span-0-3662"><a id="__codelineno-0-3662" name="__codelineno-0-3662"></a><span class="sd">    Args:</span>
</span><span id="__span-0-3663"><a id="__codelineno-0-3663" name="__codelineno-0-3663"></a><span class="sd">        stop_event (threading.Event): when set, this function does nothing (the thread can be alived but does nothing)</span>
</span><span id="__span-0-3664"><a id="__codelineno-0-3664" name="__codelineno-0-3664"></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-3665"><a id="__codelineno-0-3665" name="__codelineno-0-3665"></a>
</span><span id="__span-0-3666"><a id="__codelineno-0-3666" name="__codelineno-0-3666"></a>    <span class="k">while</span> <span class="ow">not</span> <span class="n">stop_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>
</span><span id="__span-0-3667"><a id="__codelineno-0-3667" name="__codelineno-0-3667"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">n_receive_calls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_receive_calls</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="__span-0-3668"><a id="__codelineno-0-3668" name="__codelineno-0-3668"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">radio_control</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;receiveSamples&quot;</span><span class="p">)</span>
</span><span id="__span-0-3669"><a id="__codelineno-0-3669" name="__codelineno-0-3669"></a>        <span class="n">buf</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">()</span>
</span><span id="__span-0-3670"><a id="__codelineno-0-3670" name="__codelineno-0-3670"></a>
</span><span id="__span-0-3671"><a id="__codelineno-0-3671" name="__codelineno-0-3671"></a>        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
</span><span id="__span-0-3672"><a id="__codelineno-0-3672" name="__codelineno-0-3672"></a>            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">radio_data</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nbytes</span><span class="p">)</span>
</span><span id="__span-0-3673"><a id="__codelineno-0-3673" name="__codelineno-0-3673"></a>            <span class="n">buf</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="__span-0-3674"><a id="__codelineno-0-3674" name="__codelineno-0-3674"></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int16</span><span class="p">)</span>
</span><span id="__span-0-3675"><a id="__codelineno-0-3675" name="__codelineno-0-3675"></a>        <span class="n">rxtd</span> <span class="o">=</span> <span class="n">data</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">nread</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">nbeams</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="n">j</span><span class="o">*</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">nread</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">nbeams</span><span class="p">:]</span>
</span><span id="__span-0-3676"><a id="__codelineno-0-3676" name="__codelineno-0-3676"></a>        <span class="n">rxtd</span> <span class="o">=</span> <span class="n">rxtd</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nbeams</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nread</span><span class="p">)</span>
</span><span id="__span-0-3677"><a id="__codelineno-0-3677" name="__codelineno-0-3677"></a>
</span><span id="__span-0-3678"><a id="__codelineno-0-3678" name="__codelineno-0-3678"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hest</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rxtd</span><span class="p">)</span>
</span><span id="__span-0-3679"><a id="__codelineno-0-3679" name="__codelineno-0-3679"></a>
</span><span id="__span-0-3680"><a id="__codelineno-0-3680" name="__codelineno-0-3680"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hest</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">TIME_SNAPS_TO_VIS</span><span class="p">:</span>
</span><span id="__span-0-3681"><a id="__codelineno-0-3681" name="__codelineno-0-3681"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">data_to_visualize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_operations_rfsoc_rx_ndarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hest</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="__span-0-3682"><a id="__codelineno-0-3682" name="__codelineno-0-3682"></a>
</span><span id="__span-0-3683"><a id="__codelineno-0-3683" name="__codelineno-0-3683"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hest</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">TIME_SNAPS_TO_VIS</span><span class="p">:</span> <span class="c1"># maximum packet size to send over the tcp connection</span>
</span><span id="__span-0-3684"><a id="__codelineno-0-3684" name="__codelineno-0-3684"></a>            <span class="n">tmp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_operations_rfsoc_rx_ndarray</span><span class="p">(</span><span class="n">rxtd</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-0-3685"><a id="__codelineno-0-3685" name="__codelineno-0-3685"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">data_to_visualize</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">roll</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_to_visualize</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> 
</span><span id="__span-0-3686"><a id="__codelineno-0-3686" name="__codelineno-0-3686"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">data_to_visualize</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">tmp</span> 
</span><span id="__span-0-3687"><a id="__codelineno-0-3687" name="__codelineno-0-3687"></a>
</span><span id="__span-0-3688"><a id="__codelineno-0-3688" name="__codelineno-0-3688"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hest</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">TIME_SNAPS_TO_SAVE</span><span class="p">:</span>
</span><span id="__span-0-3689"><a id="__codelineno-0-3689" name="__codelineno-0-3689"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG]: Time between save callbacks: </span><span class="si">{</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">start_time_pap_callback</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-3690"><a id="__codelineno-0-3690" name="__codelineno-0-3690"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">save_hest_buffer</span><span class="p">()</span>      
</span></code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="a2gmeasurements.RFSoCRemoteControlFromHost.save_hest_buffer" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">save_hest_buffer</span><span class="p">(</span><span class="n">register_time</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Saves the raw (time-snaps, n_beams, n_delay_taps) CIR array.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>register_time</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>parameter used for debugging purposes. Defaults to True.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>a2gmeasurements.py</code></summary>
            <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3746">3746</a></span>
<span class="normal"><a href="#__codelineno-0-3747">3747</a></span>
<span class="normal"><a href="#__codelineno-0-3748">3748</a></span>
<span class="normal"><a href="#__codelineno-0-3749">3749</a></span>
<span class="normal"><a href="#__codelineno-0-3750">3750</a></span>
<span class="normal"><a href="#__codelineno-0-3751">3751</a></span>
<span class="normal"><a href="#__codelineno-0-3752">3752</a></span>
<span class="normal"><a href="#__codelineno-0-3753">3753</a></span>
<span class="normal"><a href="#__codelineno-0-3754">3754</a></span>
<span class="normal"><a href="#__codelineno-0-3755">3755</a></span>
<span class="normal"><a href="#__codelineno-0-3756">3756</a></span>
<span class="normal"><a href="#__codelineno-0-3757">3757</a></span>
<span class="normal"><a href="#__codelineno-0-3758">3758</a></span>
<span class="normal"><a href="#__codelineno-0-3759">3759</a></span>
<span class="normal"><a href="#__codelineno-0-3760">3760</a></span>
<span class="normal"><a href="#__codelineno-0-3761">3761</a></span>
<span class="normal"><a href="#__codelineno-0-3762">3762</a></span>
<span class="normal"><a href="#__codelineno-0-3763">3763</a></span>
<span class="normal"><a href="#__codelineno-0-3764">3764</a></span>
<span class="normal"><a href="#__codelineno-0-3765">3765</a></span>
<span class="normal"><a href="#__codelineno-0-3766">3766</a></span>
<span class="normal"><a href="#__codelineno-0-3767">3767</a></span>
<span class="normal"><a href="#__codelineno-0-3768">3768</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-3746"><a id="__codelineno-0-3746" name="__codelineno-0-3746"></a><span class="k">def</span> <span class="nf">save_hest_buffer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">register_time</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="__span-0-3747"><a id="__codelineno-0-3747" name="__codelineno-0-3747"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-3748"><a id="__codelineno-0-3748" name="__codelineno-0-3748"></a><span class="sd">    Saves the raw (time-snaps, n_beams, n_delay_taps) CIR array.</span>
</span><span id="__span-0-3749"><a id="__codelineno-0-3749" name="__codelineno-0-3749"></a>
</span><span id="__span-0-3750"><a id="__codelineno-0-3750" name="__codelineno-0-3750"></a><span class="sd">    Args:</span>
</span><span id="__span-0-3751"><a id="__codelineno-0-3751" name="__codelineno-0-3751"></a><span class="sd">        register_time (bool, optional): parameter used for debugging purposes. Defaults to True.</span>
</span><span id="__span-0-3752"><a id="__codelineno-0-3752" name="__codelineno-0-3752"></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-3753"><a id="__codelineno-0-3753" name="__codelineno-0-3753"></a>
</span><span id="__span-0-3754"><a id="__codelineno-0-3754" name="__codelineno-0-3754"></a>    <span class="n">datestr</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
</span><span id="__span-0-3755"><a id="__codelineno-0-3755" name="__codelineno-0-3755"></a>    <span class="n">datestr</span> <span class="o">=</span> <span class="n">datestr</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">-%H-%M-%S-</span><span class="si">%f</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="__span-0-3756"><a id="__codelineno-0-3756" name="__codelineno-0-3756"></a>
</span><span id="__span-0-3757"><a id="__codelineno-0-3757" name="__codelineno-0-3757"></a>    <span class="c1"># Double check that there is something in the array</span>
</span><span id="__span-0-3758"><a id="__codelineno-0-3758" name="__codelineno-0-3758"></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hest</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-0-3759"><a id="__codelineno-0-3759" name="__codelineno-0-3759"></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;../Measurement Files/&#39;</span> <span class="o">+</span> <span class="n">datestr</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename_to_save</span> <span class="o">+</span> <span class="s1">&#39;.npy&#39;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="__span-0-3760"><a id="__codelineno-0-3760" name="__codelineno-0-3760"></a>            <span class="c1">#np.save(f, np.stack(self.hest, axis=0))</span>
</span><span id="__span-0-3761"><a id="__codelineno-0-3761" name="__codelineno-0-3761"></a>            <span class="n">np</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hest</span><span class="p">))</span>
</span><span id="__span-0-3762"><a id="__codelineno-0-3762" name="__codelineno-0-3762"></a>
</span><span id="__span-0-3763"><a id="__codelineno-0-3763" name="__codelineno-0-3763"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG]: Saved file &quot;</span><span class="p">,</span> <span class="n">datestr</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename_to_save</span> <span class="o">+</span> <span class="s1">&#39;.npy&#39;</span><span class="p">)</span>
</span><span id="__span-0-3764"><a id="__codelineno-0-3764" name="__codelineno-0-3764"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG]: Saved file &quot;</span><span class="p">,</span> <span class="n">datestr</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename_to_save</span> <span class="o">+</span> <span class="s1">&#39;-TIMETAGS&#39;</span> <span class="o">+</span> <span class="s1">&#39;.npy&#39;</span><span class="p">)</span>
</span><span id="__span-0-3765"><a id="__codelineno-0-3765" name="__codelineno-0-3765"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hest</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-0-3766"><a id="__codelineno-0-3766" name="__codelineno-0-3766"></a>
</span><span id="__span-0-3767"><a id="__codelineno-0-3767" name="__codelineno-0-3767"></a>    <span class="k">if</span> <span class="n">register_time</span><span class="p">:</span>
</span><span id="__span-0-3768"><a id="__codelineno-0-3768" name="__codelineno-0-3768"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">start_time_pap_callback</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span></code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="a2gmeasurements.RFSoCRemoteControlFromHost.send_cmd" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">send_cmd</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">cmd_arg</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Sends a command to the RFSoC server. </p>
<p>These commands control the Sivers EVK mode, carrier frequncy, tx gain and rx gain.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>cmd</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>available commands are: <code>setModeSivers</code>, <code>setCarrierFrequencySivers</code>, <code>setGainTxSivers</code>, <code>setGainRxSivers</code>.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>cmd_arg</code></td>
          <td>
                <code>str | float | dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>supported parameters for 'setModeSivers' are 'RXen_0_TXen1', 'RXen1_TXen0', 'RXen0_TXen0'; supported parameters for 'setCarrierFrequencySivers' are float number, i.e.: 57.51e9; supported parameters for 'setGainTxSivers' are dict with this structure {'tx_bb_gain': 0x00, 'tx_bb_phase': 0x00, 'tx_bb_iq_gain': 0x00, 'tx_bfrf_gain': 0x00}; supported parameters for 'setGainRxSivers' are dict with this structure {'rx_gain_ctrl_bb1':0x00, 'rx_gain_ctrl_bb2':0x00, 'rx_gain_ctrl_bb3':0x00, 'rx_gain_ctrl_bfrf':0x00}. Defaults to None.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>a2gmeasurements.py</code></summary>
            <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3559">3559</a></span>
<span class="normal"><a href="#__codelineno-0-3560">3560</a></span>
<span class="normal"><a href="#__codelineno-0-3561">3561</a></span>
<span class="normal"><a href="#__codelineno-0-3562">3562</a></span>
<span class="normal"><a href="#__codelineno-0-3563">3563</a></span>
<span class="normal"><a href="#__codelineno-0-3564">3564</a></span>
<span class="normal"><a href="#__codelineno-0-3565">3565</a></span>
<span class="normal"><a href="#__codelineno-0-3566">3566</a></span>
<span class="normal"><a href="#__codelineno-0-3567">3567</a></span>
<span class="normal"><a href="#__codelineno-0-3568">3568</a></span>
<span class="normal"><a href="#__codelineno-0-3569">3569</a></span>
<span class="normal"><a href="#__codelineno-0-3570">3570</a></span>
<span class="normal"><a href="#__codelineno-0-3571">3571</a></span>
<span class="normal"><a href="#__codelineno-0-3572">3572</a></span>
<span class="normal"><a href="#__codelineno-0-3573">3573</a></span>
<span class="normal"><a href="#__codelineno-0-3574">3574</a></span>
<span class="normal"><a href="#__codelineno-0-3575">3575</a></span>
<span class="normal"><a href="#__codelineno-0-3576">3576</a></span>
<span class="normal"><a href="#__codelineno-0-3577">3577</a></span>
<span class="normal"><a href="#__codelineno-0-3578">3578</a></span>
<span class="normal"><a href="#__codelineno-0-3579">3579</a></span>
<span class="normal"><a href="#__codelineno-0-3580">3580</a></span>
<span class="normal"><a href="#__codelineno-0-3581">3581</a></span>
<span class="normal"><a href="#__codelineno-0-3582">3582</a></span>
<span class="normal"><a href="#__codelineno-0-3583">3583</a></span>
<span class="normal"><a href="#__codelineno-0-3584">3584</a></span>
<span class="normal"><a href="#__codelineno-0-3585">3585</a></span>
<span class="normal"><a href="#__codelineno-0-3586">3586</a></span>
<span class="normal"><a href="#__codelineno-0-3587">3587</a></span>
<span class="normal"><a href="#__codelineno-0-3588">3588</a></span>
<span class="normal"><a href="#__codelineno-0-3589">3589</a></span>
<span class="normal"><a href="#__codelineno-0-3590">3590</a></span>
<span class="normal"><a href="#__codelineno-0-3591">3591</a></span>
<span class="normal"><a href="#__codelineno-0-3592">3592</a></span>
<span class="normal"><a href="#__codelineno-0-3593">3593</a></span>
<span class="normal"><a href="#__codelineno-0-3594">3594</a></span>
<span class="normal"><a href="#__codelineno-0-3595">3595</a></span>
<span class="normal"><a href="#__codelineno-0-3596">3596</a></span>
<span class="normal"><a href="#__codelineno-0-3597">3597</a></span>
<span class="normal"><a href="#__codelineno-0-3598">3598</a></span>
<span class="normal"><a href="#__codelineno-0-3599">3599</a></span>
<span class="normal"><a href="#__codelineno-0-3600">3600</a></span>
<span class="normal"><a href="#__codelineno-0-3601">3601</a></span>
<span class="normal"><a href="#__codelineno-0-3602">3602</a></span>
<span class="normal"><a href="#__codelineno-0-3603">3603</a></span>
<span class="normal"><a href="#__codelineno-0-3604">3604</a></span>
<span class="normal"><a href="#__codelineno-0-3605">3605</a></span>
<span class="normal"><a href="#__codelineno-0-3606">3606</a></span>
<span class="normal"><a href="#__codelineno-0-3607">3607</a></span>
<span class="normal"><a href="#__codelineno-0-3608">3608</a></span>
<span class="normal"><a href="#__codelineno-0-3609">3609</a></span>
<span class="normal"><a href="#__codelineno-0-3610">3610</a></span>
<span class="normal"><a href="#__codelineno-0-3611">3611</a></span>
<span class="normal"><a href="#__codelineno-0-3612">3612</a></span>
<span class="normal"><a href="#__codelineno-0-3613">3613</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-3559"><a id="__codelineno-0-3559" name="__codelineno-0-3559"></a><span class="k">def</span> <span class="nf">send_cmd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmd</span><span class="p">,</span> <span class="n">cmd_arg</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="__span-0-3560"><a id="__codelineno-0-3560" name="__codelineno-0-3560"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-3561"><a id="__codelineno-0-3561" name="__codelineno-0-3561"></a><span class="sd">    Sends a command to the RFSoC server. </span>
</span><span id="__span-0-3562"><a id="__codelineno-0-3562" name="__codelineno-0-3562"></a>
</span><span id="__span-0-3563"><a id="__codelineno-0-3563" name="__codelineno-0-3563"></a><span class="sd">    These commands control the Sivers EVK mode, carrier frequncy, tx gain and rx gain.</span>
</span><span id="__span-0-3564"><a id="__codelineno-0-3564" name="__codelineno-0-3564"></a>
</span><span id="__span-0-3565"><a id="__codelineno-0-3565" name="__codelineno-0-3565"></a><span class="sd">    Args:</span>
</span><span id="__span-0-3566"><a id="__codelineno-0-3566" name="__codelineno-0-3566"></a><span class="sd">        cmd (str): available commands are: ``setModeSivers``, ``setCarrierFrequencySivers``, ``setGainTxSivers``, ``setGainRxSivers``.</span>
</span><span id="__span-0-3567"><a id="__codelineno-0-3567" name="__codelineno-0-3567"></a><span class="sd">        cmd_arg (str | float | dict, optional): supported parameters for &#39;setModeSivers&#39; are &#39;RXen_0_TXen1&#39;, &#39;RXen1_TXen0&#39;, &#39;RXen0_TXen0&#39;; supported parameters for &#39;setCarrierFrequencySivers&#39; are float number, i.e.: 57.51e9; supported parameters for &#39;setGainTxSivers&#39; are dict with this structure {&#39;tx_bb_gain&#39;: 0x00, &#39;tx_bb_phase&#39;: 0x00, &#39;tx_bb_iq_gain&#39;: 0x00, &#39;tx_bfrf_gain&#39;: 0x00}; supported parameters for &#39;setGainRxSivers&#39; are dict with this structure {&#39;rx_gain_ctrl_bb1&#39;:0x00, &#39;rx_gain_ctrl_bb2&#39;:0x00, &#39;rx_gain_ctrl_bb3&#39;:0x00, &#39;rx_gain_ctrl_bfrf&#39;:0x00}. Defaults to None.</span>
</span><span id="__span-0-3568"><a id="__codelineno-0-3568" name="__codelineno-0-3568"></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-3569"><a id="__codelineno-0-3569" name="__codelineno-0-3569"></a>
</span><span id="__span-0-3570"><a id="__codelineno-0-3570" name="__codelineno-0-3570"></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-0-3571"><a id="__codelineno-0-3571" name="__codelineno-0-3571"></a>        <span class="k">if</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s1">&#39;setModeSivers&#39;</span><span class="p">:</span>
</span><span id="__span-0-3572"><a id="__codelineno-0-3572" name="__codelineno-0-3572"></a>            <span class="k">if</span> <span class="n">cmd_arg</span> <span class="o">==</span> <span class="s1">&#39;RXen0_TXen1&#39;</span> <span class="ow">or</span> <span class="n">cmd_arg</span> <span class="o">==</span> <span class="s1">&#39;RXen1_TXen0&#39;</span> <span class="ow">or</span> <span class="n">cmd_arg</span> <span class="o">==</span> <span class="s1">&#39;RXen0_TXen0&#39;</span><span class="p">:</span>
</span><span id="__span-0-3573"><a id="__codelineno-0-3573" name="__codelineno-0-3573"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">radio_control</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;setModeSiver &quot;</span><span class="o">+</span><span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">cmd_arg</span><span class="p">)))</span>
</span><span id="__span-0-3574"><a id="__codelineno-0-3574" name="__codelineno-0-3574"></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-3575"><a id="__codelineno-0-3575" name="__codelineno-0-3575"></a>                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG]: Unknown Sivers mode&quot;</span><span class="p">)</span>
</span><span id="__span-0-3576"><a id="__codelineno-0-3576" name="__codelineno-0-3576"></a>        <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s1">&#39;setCarrierFrequencySivers&#39;</span><span class="p">:</span>
</span><span id="__span-0-3577"><a id="__codelineno-0-3577" name="__codelineno-0-3577"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">radio_control</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;setCarrierFrequency &quot;</span><span class="o">+</span><span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">cmd_arg</span><span class="p">)))</span>
</span><span id="__span-0-3578"><a id="__codelineno-0-3578" name="__codelineno-0-3578"></a>        <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s1">&#39;setGainTxSivers&#39;</span><span class="p">:</span>
</span><span id="__span-0-3579"><a id="__codelineno-0-3579" name="__codelineno-0-3579"></a>            <span class="n">tx_bb_gain</span> <span class="o">=</span> <span class="n">cmd_arg</span><span class="p">[</span><span class="s1">&#39;tx_bb_gain&#39;</span><span class="p">]</span>
</span><span id="__span-0-3580"><a id="__codelineno-0-3580" name="__codelineno-0-3580"></a>            <span class="n">tx_bb_phase</span> <span class="o">=</span> <span class="n">cmd_arg</span><span class="p">[</span><span class="s1">&#39;tx_bb_phase&#39;</span><span class="p">]</span>
</span><span id="__span-0-3581"><a id="__codelineno-0-3581" name="__codelineno-0-3581"></a>            <span class="n">tx_bb_iq_gain</span> <span class="o">=</span> <span class="n">cmd_arg</span><span class="p">[</span><span class="s1">&#39;tx_bb_iq_gain&#39;</span><span class="p">]</span>
</span><span id="__span-0-3582"><a id="__codelineno-0-3582" name="__codelineno-0-3582"></a>            <span class="n">tx_bfrf_gain</span> <span class="o">=</span> <span class="n">cmd_arg</span><span class="p">[</span><span class="s1">&#39;tx_bfrf_gain&#39;</span><span class="p">]</span>
</span><span id="__span-0-3583"><a id="__codelineno-0-3583" name="__codelineno-0-3583"></a>
</span><span id="__span-0-3584"><a id="__codelineno-0-3584" name="__codelineno-0-3584"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">radio_control</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;setGainTX &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">tx_bb_gain</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">)</span> \
</span><span id="__span-0-3585"><a id="__codelineno-0-3585" name="__codelineno-0-3585"></a>                                                        <span class="o">+</span> <span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">tx_bb_phase</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">)</span> \
</span><span id="__span-0-3586"><a id="__codelineno-0-3586" name="__codelineno-0-3586"></a>                                                        <span class="o">+</span> <span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">tx_bb_iq_gain</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">)</span> \
</span><span id="__span-0-3587"><a id="__codelineno-0-3587" name="__codelineno-0-3587"></a>                                                        <span class="o">+</span> <span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">tx_bfrf_gain</span><span class="p">))))</span>
</span><span id="__span-0-3588"><a id="__codelineno-0-3588" name="__codelineno-0-3588"></a>        <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s1">&#39;setGainRxSivers&#39;</span><span class="p">:</span>
</span><span id="__span-0-3589"><a id="__codelineno-0-3589" name="__codelineno-0-3589"></a>            <span class="n">rx_gain_ctrl_bb1</span> <span class="o">=</span> <span class="n">cmd_arg</span><span class="p">[</span><span class="s1">&#39;rx_gain_ctrl_bb1&#39;</span><span class="p">]</span>
</span><span id="__span-0-3590"><a id="__codelineno-0-3590" name="__codelineno-0-3590"></a>            <span class="n">rx_gain_ctrl_bb2</span> <span class="o">=</span> <span class="n">cmd_arg</span><span class="p">[</span><span class="s1">&#39;rx_gain_ctrl_bb2&#39;</span><span class="p">]</span>
</span><span id="__span-0-3591"><a id="__codelineno-0-3591" name="__codelineno-0-3591"></a>            <span class="n">rx_gain_ctrl_bb3</span> <span class="o">=</span> <span class="n">cmd_arg</span><span class="p">[</span><span class="s1">&#39;rx_gain_ctrl_bb3&#39;</span><span class="p">]</span>
</span><span id="__span-0-3592"><a id="__codelineno-0-3592" name="__codelineno-0-3592"></a>            <span class="n">rx_gain_ctrl_bfrf</span> <span class="o">=</span> <span class="n">cmd_arg</span><span class="p">[</span><span class="s1">&#39;rx_gain_ctrl_bfrf&#39;</span><span class="p">]</span>
</span><span id="__span-0-3593"><a id="__codelineno-0-3593" name="__codelineno-0-3593"></a>
</span><span id="__span-0-3594"><a id="__codelineno-0-3594" name="__codelineno-0-3594"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">radio_control</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;setGainRX &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">rx_gain_ctrl_bb1</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">)</span> \
</span><span id="__span-0-3595"><a id="__codelineno-0-3595" name="__codelineno-0-3595"></a>                                                        <span class="o">+</span> <span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">rx_gain_ctrl_bb2</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">)</span> \
</span><span id="__span-0-3596"><a id="__codelineno-0-3596" name="__codelineno-0-3596"></a>                                                        <span class="o">+</span> <span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">rx_gain_ctrl_bb3</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">)</span> \
</span><span id="__span-0-3597"><a id="__codelineno-0-3597" name="__codelineno-0-3597"></a>                                                        <span class="o">+</span> <span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">rx_gain_ctrl_bfrf</span><span class="p">))))</span>
</span><span id="__span-0-3598"><a id="__codelineno-0-3598" name="__codelineno-0-3598"></a>        <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s1">&#39;transmitSamples&#39;</span><span class="p">:</span>
</span><span id="__span-0-3599"><a id="__codelineno-0-3599" name="__codelineno-0-3599"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">radio_control</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;transmitSamples&quot;</span><span class="p">)</span>
</span><span id="__span-0-3600"><a id="__codelineno-0-3600" name="__codelineno-0-3600"></a>        <span class="k">else</span><span class="p">:</span> 
</span><span id="__span-0-3601"><a id="__codelineno-0-3601" name="__codelineno-0-3601"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG]: Unknown command to send to RFSoC&quot;</span><span class="p">)</span>
</span><span id="__span-0-3602"><a id="__codelineno-0-3602" name="__codelineno-0-3602"></a>            <span class="k">return</span>
</span><span id="__span-0-3603"><a id="__codelineno-0-3603" name="__codelineno-0-3603"></a>    <span class="k">except</span> <span class="ne">IOError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-0-3604"><a id="__codelineno-0-3604" name="__codelineno-0-3604"></a>        <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">errno</span> <span class="o">==</span> <span class="n">errno</span><span class="o">.</span><span class="n">EPIPE</span><span class="p">:</span>
</span><span id="__span-0-3605"><a id="__codelineno-0-3605" name="__codelineno-0-3605"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[ERROR]: RFSoC to Host connection has problems: &quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span><span id="__span-0-3606"><a id="__codelineno-0-3606" name="__codelineno-0-3606"></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-3607"><a id="__codelineno-0-3607" name="__codelineno-0-3607"></a>        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">radio_control</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
</span><span id="__span-0-3608"><a id="__codelineno-0-3608" name="__codelineno-0-3608"></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
</span><span id="__span-0-3609"><a id="__codelineno-0-3609" name="__codelineno-0-3609"></a>
</span><span id="__span-0-3610"><a id="__codelineno-0-3610" name="__codelineno-0-3610"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">RFSoCSuccessExecutionAns</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">RFSoCSuccessAns</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
</span><span id="__span-0-3611"><a id="__codelineno-0-3611" name="__codelineno-0-3611"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG]: Command &quot;</span><span class="p">,</span> <span class="n">cmd</span><span class="p">,</span> <span class="s2">&quot; executed succesfully on Sivers or RFSoC&quot;</span><span class="p">)</span>
</span><span id="__span-0-3612"><a id="__codelineno-0-3612" name="__codelineno-0-3612"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-3613"><a id="__codelineno-0-3613" name="__codelineno-0-3613"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG]: Command &quot;</span><span class="p">,</span> <span class="n">cmd</span><span class="p">,</span> <span class="s2">&quot; was not successfully executed on Sivers or RFSoC. The following error appears: &quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="a2gmeasurements.RFSoCRemoteControlFromHost.set_rx_rf" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">set_rx_rf</span><span class="p">(</span><span class="n">rx_gain_ctrl_bb1</span><span class="o">=</span><span class="mi">119</span><span class="p">,</span> <span class="n">rx_gain_ctrl_bb2</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">rx_gain_ctrl_bb3</span><span class="o">=</span><span class="mi">153</span><span class="p">,</span> <span class="n">rx_gain_ctrl_bfrf</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">carrier_freq</span><span class="o">=</span><span class="mf">57510000000.0</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Sets rx gains and frequency of operation. Wrapper function of <code>send_cmd</code>.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>rx_gain_ctrl_bb1</code></td>
          <td>
                <code>hexadecimal</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>sets the first rx gain for the I,Q according to: I[0:3]:[0,1,3,7,F]:-6:0 dB, 4 steps; Q[0:3]:[0,1,3,7,F]:-6:0 dB, 4 steps. Defaults to 0x77.</p>
            </div>
          </td>
          <td>
                <code>119</code>
          </td>
        </tr>
        <tr>
          <td><code>rx_gain_ctrl_bb2</code></td>
          <td>
                <code>hexadecimal</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>sets the second rx gain for the I,Q according to: I[0:3]:[0,1,3,7,F]:-6:0 dB, 4 steps; Q[0:3]:[0,1,3,7,F]:-6:0 dB, 4 steps. Defaults to 0x00.</p>
            </div>
          </td>
          <td>
                <code>0</code>
          </td>
        </tr>
        <tr>
          <td><code>rx_gain_ctrl_bb3</code></td>
          <td>
                <code>hexadecimal</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>sets the third rx gain for the I,Q according to: I[0:3]:[0,1,3,7,F]:-6:0 dB, 4 steps; Q[0:3]:[0,1,3,7,F]:-6:0 dB, 4 steps. Defaults to 0x99.</p>
            </div>
          </td>
          <td>
                <code>153</code>
          </td>
        </tr>
        <tr>
          <td><code>rx_gain_ctrl_bfrf</code></td>
          <td>
                <code>_type_</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>sets gain after the mixer according to; [0:3,RF gain]: 0-15 dB, 16 steps; [4:7, BF gain]: 0-15 dB, 16 steps. Defaults to 0xFF.</p>
            </div>
          </td>
          <td>
                <code>255</code>
          </td>
        </tr>
        <tr>
          <td><code>carrier_freq</code></td>
          <td>
                <code>_type_</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>carrier frequency from the available frequency range for the Sivers EVK 06002/3 (in this case: 57-71 GHz). Defaults to 57.51e9.</p>
            </div>
          </td>
          <td>
                <code>57510000000.0</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>a2gmeasurements.py</code></summary>
            <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3636">3636</a></span>
<span class="normal"><a href="#__codelineno-0-3637">3637</a></span>
<span class="normal"><a href="#__codelineno-0-3638">3638</a></span>
<span class="normal"><a href="#__codelineno-0-3639">3639</a></span>
<span class="normal"><a href="#__codelineno-0-3640">3640</a></span>
<span class="normal"><a href="#__codelineno-0-3641">3641</a></span>
<span class="normal"><a href="#__codelineno-0-3642">3642</a></span>
<span class="normal"><a href="#__codelineno-0-3643">3643</a></span>
<span class="normal"><a href="#__codelineno-0-3644">3644</a></span>
<span class="normal"><a href="#__codelineno-0-3645">3645</a></span>
<span class="normal"><a href="#__codelineno-0-3646">3646</a></span>
<span class="normal"><a href="#__codelineno-0-3647">3647</a></span>
<span class="normal"><a href="#__codelineno-0-3648">3648</a></span>
<span class="normal"><a href="#__codelineno-0-3649">3649</a></span>
<span class="normal"><a href="#__codelineno-0-3650">3650</a></span>
<span class="normal"><a href="#__codelineno-0-3651">3651</a></span>
<span class="normal"><a href="#__codelineno-0-3652">3652</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-3636"><a id="__codelineno-0-3636" name="__codelineno-0-3636"></a><span class="k">def</span> <span class="nf">set_rx_rf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rx_gain_ctrl_bb1</span><span class="o">=</span><span class="mh">0x77</span><span class="p">,</span> <span class="n">rx_gain_ctrl_bb2</span><span class="o">=</span><span class="mh">0x00</span><span class="p">,</span> <span class="n">rx_gain_ctrl_bb3</span><span class="o">=</span><span class="mh">0x99</span><span class="p">,</span> <span class="n">rx_gain_ctrl_bfrf</span><span class="o">=</span><span class="mh">0xFF</span><span class="p">,</span> <span class="n">carrier_freq</span><span class="o">=</span><span class="mf">57.51e9</span><span class="p">):</span>
</span><span id="__span-0-3637"><a id="__codelineno-0-3637" name="__codelineno-0-3637"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-3638"><a id="__codelineno-0-3638" name="__codelineno-0-3638"></a><span class="sd">    Sets rx gains and frequency of operation. Wrapper function of ``send_cmd``.</span>
</span><span id="__span-0-3639"><a id="__codelineno-0-3639" name="__codelineno-0-3639"></a>
</span><span id="__span-0-3640"><a id="__codelineno-0-3640" name="__codelineno-0-3640"></a><span class="sd">    Args:</span>
</span><span id="__span-0-3641"><a id="__codelineno-0-3641" name="__codelineno-0-3641"></a><span class="sd">        rx_gain_ctrl_bb1 (hexadecimal, optional): sets the first rx gain for the I,Q according to: I[0:3]:[0,1,3,7,F]:-6:0 dB, 4 steps; Q[0:3]:[0,1,3,7,F]:-6:0 dB, 4 steps. Defaults to 0x77.</span>
</span><span id="__span-0-3642"><a id="__codelineno-0-3642" name="__codelineno-0-3642"></a><span class="sd">        rx_gain_ctrl_bb2 (hexadecimal, optional): sets the second rx gain for the I,Q according to: I[0:3]:[0,1,3,7,F]:-6:0 dB, 4 steps; Q[0:3]:[0,1,3,7,F]:-6:0 dB, 4 steps. Defaults to 0x00.</span>
</span><span id="__span-0-3643"><a id="__codelineno-0-3643" name="__codelineno-0-3643"></a><span class="sd">        rx_gain_ctrl_bb3 (hexadecimal, optional): sets the third rx gain for the I,Q according to: I[0:3]:[0,1,3,7,F]:-6:0 dB, 4 steps; Q[0:3]:[0,1,3,7,F]:-6:0 dB, 4 steps. Defaults to 0x99.</span>
</span><span id="__span-0-3644"><a id="__codelineno-0-3644" name="__codelineno-0-3644"></a><span class="sd">        rx_gain_ctrl_bfrf (_type_, optional): sets gain after the mixer according to; [0:3,RF gain]: 0-15 dB, 16 steps; [4:7, BF gain]: 0-15 dB, 16 steps. Defaults to 0xFF.</span>
</span><span id="__span-0-3645"><a id="__codelineno-0-3645" name="__codelineno-0-3645"></a><span class="sd">        carrier_freq (_type_, optional): carrier frequency from the available frequency range for the Sivers EVK 06002/3 (in this case: 57-71 GHz). Defaults to 57.51e9.</span>
</span><span id="__span-0-3646"><a id="__codelineno-0-3646" name="__codelineno-0-3646"></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-3647"><a id="__codelineno-0-3647" name="__codelineno-0-3647"></a>
</span><span id="__span-0-3648"><a id="__codelineno-0-3648" name="__codelineno-0-3648"></a>    <span class="n">dict_rx_gains</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;rx_gain_ctrl_bb1&#39;</span><span class="p">:</span><span class="n">rx_gain_ctrl_bb1</span><span class="p">,</span> <span class="s1">&#39;rx_gain_ctrl_bb2&#39;</span><span class="p">:</span><span class="n">rx_gain_ctrl_bb2</span><span class="p">,</span> <span class="s1">&#39;rx_gain_ctrl_bb3&#39;</span><span class="p">:</span><span class="n">rx_gain_ctrl_bb3</span><span class="p">,</span> <span class="s1">&#39;rx_gain_ctrl_bfrf&#39;</span><span class="p">:</span><span class="n">rx_gain_ctrl_bfrf</span><span class="p">}</span>
</span><span id="__span-0-3649"><a id="__codelineno-0-3649" name="__codelineno-0-3649"></a>
</span><span id="__span-0-3650"><a id="__codelineno-0-3650" name="__codelineno-0-3650"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">send_cmd</span><span class="p">(</span><span class="s1">&#39;setModeSivers&#39;</span><span class="p">,</span> <span class="n">cmd_arg</span><span class="o">=</span><span class="s1">&#39;RXen1_TXen0&#39;</span><span class="p">)</span>
</span><span id="__span-0-3651"><a id="__codelineno-0-3651" name="__codelineno-0-3651"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">send_cmd</span><span class="p">(</span><span class="s1">&#39;setCarrierFrequencySivers&#39;</span><span class="p">,</span> <span class="n">cmd_arg</span><span class="o">=</span><span class="n">carrier_freq</span><span class="p">)</span>
</span><span id="__span-0-3652"><a id="__codelineno-0-3652" name="__codelineno-0-3652"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">send_cmd</span><span class="p">(</span><span class="s1">&#39;setGainRxSivers&#39;</span><span class="p">,</span> <span class="n">cmd_arg</span><span class="o">=</span><span class="n">dict_rx_gains</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="a2gmeasurements.RFSoCRemoteControlFromHost.start_thread_receive_meas_data" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">start_thread_receive_meas_data</span><span class="p">(</span><span class="n">msg_data</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Creates and starts the rfsoc thread.</p>
<p>A thread -instead of a subprocess- is good enough since the computational expense of the task is not donde in the host computer but in the RFSoC. The host just reads the data through Ethernet.</p>
<p>A new thread is started each time this function is called. It is required for the developer to call 'stop_thread_receive_meas_data' before calling again this function in order to close the actual thread before creating a new one.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>msg_data</code></td>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>dictionary containing the parameters required by <code>set_rx_rf</code> to set a Sivers EVK configuration.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>a2gmeasurements.py</code></summary>
            <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3770">3770</a></span>
<span class="normal"><a href="#__codelineno-0-3771">3771</a></span>
<span class="normal"><a href="#__codelineno-0-3772">3772</a></span>
<span class="normal"><a href="#__codelineno-0-3773">3773</a></span>
<span class="normal"><a href="#__codelineno-0-3774">3774</a></span>
<span class="normal"><a href="#__codelineno-0-3775">3775</a></span>
<span class="normal"><a href="#__codelineno-0-3776">3776</a></span>
<span class="normal"><a href="#__codelineno-0-3777">3777</a></span>
<span class="normal"><a href="#__codelineno-0-3778">3778</a></span>
<span class="normal"><a href="#__codelineno-0-3779">3779</a></span>
<span class="normal"><a href="#__codelineno-0-3780">3780</a></span>
<span class="normal"><a href="#__codelineno-0-3781">3781</a></span>
<span class="normal"><a href="#__codelineno-0-3782">3782</a></span>
<span class="normal"><a href="#__codelineno-0-3783">3783</a></span>
<span class="normal"><a href="#__codelineno-0-3784">3784</a></span>
<span class="normal"><a href="#__codelineno-0-3785">3785</a></span>
<span class="normal"><a href="#__codelineno-0-3786">3786</a></span>
<span class="normal"><a href="#__codelineno-0-3787">3787</a></span>
<span class="normal"><a href="#__codelineno-0-3788">3788</a></span>
<span class="normal"><a href="#__codelineno-0-3789">3789</a></span>
<span class="normal"><a href="#__codelineno-0-3790">3790</a></span>
<span class="normal"><a href="#__codelineno-0-3791">3791</a></span>
<span class="normal"><a href="#__codelineno-0-3792">3792</a></span>
<span class="normal"><a href="#__codelineno-0-3793">3793</a></span>
<span class="normal"><a href="#__codelineno-0-3794">3794</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-3770"><a id="__codelineno-0-3770" name="__codelineno-0-3770"></a><span class="k">def</span> <span class="nf">start_thread_receive_meas_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg_data</span><span class="p">):</span>
</span><span id="__span-0-3771"><a id="__codelineno-0-3771" name="__codelineno-0-3771"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-3772"><a id="__codelineno-0-3772" name="__codelineno-0-3772"></a><span class="sd">    Creates and starts the rfsoc thread.</span>
</span><span id="__span-0-3773"><a id="__codelineno-0-3773" name="__codelineno-0-3773"></a>
</span><span id="__span-0-3774"><a id="__codelineno-0-3774" name="__codelineno-0-3774"></a><span class="sd">    A thread -instead of a subprocess- is good enough since the computational expense of the task is not donde in the host computer but in the RFSoC. The host just reads the data through Ethernet.</span>
</span><span id="__span-0-3775"><a id="__codelineno-0-3775" name="__codelineno-0-3775"></a>
</span><span id="__span-0-3776"><a id="__codelineno-0-3776" name="__codelineno-0-3776"></a><span class="sd">    A new thread is started each time this function is called. It is required for the developer to call &#39;stop_thread_receive_meas_data&#39; before calling again this function in order to close the actual thread before creating a new one.</span>
</span><span id="__span-0-3777"><a id="__codelineno-0-3777" name="__codelineno-0-3777"></a>
</span><span id="__span-0-3778"><a id="__codelineno-0-3778" name="__codelineno-0-3778"></a><span class="sd">    Args:</span>
</span><span id="__span-0-3779"><a id="__codelineno-0-3779" name="__codelineno-0-3779"></a><span class="sd">        msg_data (dict): dictionary containing the parameters required by ``set_rx_rf`` to set a Sivers EVK configuration. </span>
</span><span id="__span-0-3780"><a id="__codelineno-0-3780" name="__codelineno-0-3780"></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-3781"><a id="__codelineno-0-3781" name="__codelineno-0-3781"></a>
</span><span id="__span-0-3782"><a id="__codelineno-0-3782" name="__codelineno-0-3782"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">event_stop_thread_rx_irf</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>                
</span><span id="__span-0-3783"><a id="__codelineno-0-3783" name="__codelineno-0-3783"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">thread_rx_irf</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">receive_signal_async</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">event_stop_thread_rx_irf</span><span class="p">,))</span>
</span><span id="__span-0-3784"><a id="__codelineno-0-3784" name="__codelineno-0-3784"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">set_rx_rf</span><span class="p">(</span><span class="n">carrier_freq</span><span class="o">=</span><span class="n">msg_data</span><span class="p">[</span><span class="s1">&#39;carrier_freq&#39;</span><span class="p">],</span>
</span><span id="__span-0-3785"><a id="__codelineno-0-3785" name="__codelineno-0-3785"></a>                   <span class="n">rx_gain_ctrl_bb1</span><span class="o">=</span><span class="n">msg_data</span><span class="p">[</span><span class="s1">&#39;rx_gain_ctrl_bb1&#39;</span><span class="p">],</span>
</span><span id="__span-0-3786"><a id="__codelineno-0-3786" name="__codelineno-0-3786"></a>                   <span class="n">rx_gain_ctrl_bb2</span><span class="o">=</span><span class="n">msg_data</span><span class="p">[</span><span class="s1">&#39;rx_gain_ctrl_bb2&#39;</span><span class="p">],</span>
</span><span id="__span-0-3787"><a id="__codelineno-0-3787" name="__codelineno-0-3787"></a>                   <span class="n">rx_gain_ctrl_bb3</span><span class="o">=</span><span class="n">msg_data</span><span class="p">[</span><span class="s1">&#39;rx_gain_ctrl_bb3&#39;</span><span class="p">],</span>
</span><span id="__span-0-3788"><a id="__codelineno-0-3788" name="__codelineno-0-3788"></a>                   <span class="n">rx_gain_ctrl_bfrf</span><span class="o">=</span><span class="n">msg_data</span><span class="p">[</span><span class="s1">&#39;rx_gain_ctrl_bfrf&#39;</span><span class="p">])</span>
</span><span id="__span-0-3789"><a id="__codelineno-0-3789" name="__codelineno-0-3789"></a>    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
</span><span id="__span-0-3790"><a id="__codelineno-0-3790" name="__codelineno-0-3790"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">time_begin_receive_thread</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-0-3791"><a id="__codelineno-0-3791" name="__codelineno-0-3791"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">thread_rx_irf</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="__span-0-3792"><a id="__codelineno-0-3792" name="__codelineno-0-3792"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">start_time_pap_callback</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-0-3793"><a id="__codelineno-0-3793" name="__codelineno-0-3793"></a>
</span><span id="__span-0-3794"><a id="__codelineno-0-3794" name="__codelineno-0-3794"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG]: receive_signal_async thread STARTED&quot;</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="a2gmeasurements.RFSoCRemoteControlFromHost.stop_thread_receive_meas_data" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">stop_thread_receive_meas_data</span><span class="p">()</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Stops the rfsoc thread and saves remaining CIRs.</p>

          <details class="quote">
            <summary>Source code in <code>a2gmeasurements.py</code></summary>
            <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3796">3796</a></span>
<span class="normal"><a href="#__codelineno-0-3797">3797</a></span>
<span class="normal"><a href="#__codelineno-0-3798">3798</a></span>
<span class="normal"><a href="#__codelineno-0-3799">3799</a></span>
<span class="normal"><a href="#__codelineno-0-3800">3800</a></span>
<span class="normal"><a href="#__codelineno-0-3801">3801</a></span>
<span class="normal"><a href="#__codelineno-0-3802">3802</a></span>
<span class="normal"><a href="#__codelineno-0-3803">3803</a></span>
<span class="normal"><a href="#__codelineno-0-3804">3804</a></span>
<span class="normal"><a href="#__codelineno-0-3805">3805</a></span>
<span class="normal"><a href="#__codelineno-0-3806">3806</a></span>
<span class="normal"><a href="#__codelineno-0-3807">3807</a></span>
<span class="normal"><a href="#__codelineno-0-3808">3808</a></span>
<span class="normal"><a href="#__codelineno-0-3809">3809</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-3796"><a id="__codelineno-0-3796" name="__codelineno-0-3796"></a><span class="k">def</span> <span class="nf">stop_thread_receive_meas_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-0-3797"><a id="__codelineno-0-3797" name="__codelineno-0-3797"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-3798"><a id="__codelineno-0-3798" name="__codelineno-0-3798"></a><span class="sd">    Stops the rfsoc thread and saves remaining CIRs.</span>
</span><span id="__span-0-3799"><a id="__codelineno-0-3799" name="__codelineno-0-3799"></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-3800"><a id="__codelineno-0-3800" name="__codelineno-0-3800"></a>
</span><span id="__span-0-3801"><a id="__codelineno-0-3801" name="__codelineno-0-3801"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">event_stop_thread_rx_irf</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
</span><span id="__span-0-3802"><a id="__codelineno-0-3802" name="__codelineno-0-3802"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">time_finish_receive_thread</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="__span-0-3803"><a id="__codelineno-0-3803" name="__codelineno-0-3803"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG]: receive_signal_async thread STOPPED&quot;</span><span class="p">)</span>
</span><span id="__span-0-3804"><a id="__codelineno-0-3804" name="__codelineno-0-3804"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG]: Received calls: &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_receive_calls</span><span class="p">)</span>
</span><span id="__span-0-3805"><a id="__codelineno-0-3805" name="__codelineno-0-3805"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[DEBUG]: Avg. time of execution of &#39;receive_signal&#39; callback is &quot;</span><span class="p">,</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">time_finish_receive_thread</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_begin_receive_thread</span><span class="p">)</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">n_receive_calls</span><span class="p">))</span>
</span><span id="__span-0-3806"><a id="__codelineno-0-3806" name="__codelineno-0-3806"></a>
</span><span id="__span-0-3807"><a id="__codelineno-0-3807" name="__codelineno-0-3807"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">save_hest_buffer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">register_time</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="__span-0-3808"><a id="__codelineno-0-3808" name="__codelineno-0-3808"></a>
</span><span id="__span-0-3809"><a id="__codelineno-0-3809" name="__codelineno-0-3809"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">n_receive_calls</span> <span class="o">=</span> <span class="mi">0</span>
</span></code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="a2gmeasurements.RFSoCRemoteControlFromHost.transmit_signal" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">transmit_signal</span><span class="p">(</span><span class="n">tx_bb_gain</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">tx_bb_phase</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">tx_bb_iq_gain</span><span class="o">=</span><span class="mi">119</span><span class="p">,</span> <span class="n">tx_bfrf_gain</span><span class="o">=</span><span class="mi">64</span><span class="p">,</span> <span class="n">carrier_freq</span><span class="o">=</span><span class="mf">57510000000.0</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Sets Tx gains and frequency of operation. Wrapper function of <code>send_cmd</code>.</p>
<p>More about TX gains is found in the Sivers EVK manual/reference guides.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>tx_bb_gain</code></td>
          <td>
                <code>hexadecimal</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>sets baseband gain according to: 0x00  = 0 dB, 0x01  = 3.5 dB, 0x02  = 3.5 dB, 0x03  = 6 dB (when sivers register tx_ctrl bit 3 (BB Ibias set) = 1). Defaults to 0x3.</p>
            </div>
          </td>
          <td>
                <code>3</code>
          </td>
        </tr>
        <tr>
          <td><code>tx_bb_phase</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em>. Defaults to 0.</p>
            </div>
          </td>
          <td>
                <code>0</code>
          </td>
        </tr>
        <tr>
          <td><code>tx_bb_iq_gain</code></td>
          <td>
                <code>hexadecimal</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>sets baseband I, Q gain according to: [0:3, I gain]: 0-6 dB, 16 steps; [4:7, Q gain]: 0-6 dB, 16 steps. Defaults to 0x77.</p>
            </div>
          </td>
          <td>
                <code>119</code>
          </td>
        </tr>
        <tr>
          <td><code>tx_bfrf_gain</code></td>
          <td>
                <code>hexadecimal</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>sets gain after RF mixer according to: [0:3, RF gain]: 0-15 dB, 16 steps; [4:7, BF gain]: 0-15 dB, 16 steps. Defaults to 0x40.</p>
            </div>
          </td>
          <td>
                <code>64</code>
          </td>
        </tr>
        <tr>
          <td><code>carrier_freq</code></td>
          <td>
                <code>_type_</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>carrier frequency from the available frequency range for the Sivers EVK 06002/3 (in this case: 57-71 GHz). Defaults to 57.51e9.</p>
            </div>
          </td>
          <td>
                <code>57510000000.0</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>a2gmeasurements.py</code></summary>
            <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3615">3615</a></span>
<span class="normal"><a href="#__codelineno-0-3616">3616</a></span>
<span class="normal"><a href="#__codelineno-0-3617">3617</a></span>
<span class="normal"><a href="#__codelineno-0-3618">3618</a></span>
<span class="normal"><a href="#__codelineno-0-3619">3619</a></span>
<span class="normal"><a href="#__codelineno-0-3620">3620</a></span>
<span class="normal"><a href="#__codelineno-0-3621">3621</a></span>
<span class="normal"><a href="#__codelineno-0-3622">3622</a></span>
<span class="normal"><a href="#__codelineno-0-3623">3623</a></span>
<span class="normal"><a href="#__codelineno-0-3624">3624</a></span>
<span class="normal"><a href="#__codelineno-0-3625">3625</a></span>
<span class="normal"><a href="#__codelineno-0-3626">3626</a></span>
<span class="normal"><a href="#__codelineno-0-3627">3627</a></span>
<span class="normal"><a href="#__codelineno-0-3628">3628</a></span>
<span class="normal"><a href="#__codelineno-0-3629">3629</a></span>
<span class="normal"><a href="#__codelineno-0-3630">3630</a></span>
<span class="normal"><a href="#__codelineno-0-3631">3631</a></span>
<span class="normal"><a href="#__codelineno-0-3632">3632</a></span>
<span class="normal"><a href="#__codelineno-0-3633">3633</a></span>
<span class="normal"><a href="#__codelineno-0-3634">3634</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-3615"><a id="__codelineno-0-3615" name="__codelineno-0-3615"></a><span class="k">def</span> <span class="nf">transmit_signal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tx_bb_gain</span><span class="o">=</span><span class="mh">0x3</span><span class="p">,</span> <span class="n">tx_bb_phase</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">tx_bb_iq_gain</span><span class="o">=</span><span class="mh">0x77</span><span class="p">,</span> <span class="n">tx_bfrf_gain</span><span class="o">=</span><span class="mh">0x40</span><span class="p">,</span> <span class="n">carrier_freq</span><span class="o">=</span><span class="mf">57.51e9</span><span class="p">):</span>
</span><span id="__span-0-3616"><a id="__codelineno-0-3616" name="__codelineno-0-3616"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-3617"><a id="__codelineno-0-3617" name="__codelineno-0-3617"></a><span class="sd">    Sets Tx gains and frequency of operation. Wrapper function of ``send_cmd``.</span>
</span><span id="__span-0-3618"><a id="__codelineno-0-3618" name="__codelineno-0-3618"></a>
</span><span id="__span-0-3619"><a id="__codelineno-0-3619" name="__codelineno-0-3619"></a><span class="sd">    More about TX gains is found in the Sivers EVK manual/reference guides.</span>
</span><span id="__span-0-3620"><a id="__codelineno-0-3620" name="__codelineno-0-3620"></a>
</span><span id="__span-0-3621"><a id="__codelineno-0-3621" name="__codelineno-0-3621"></a><span class="sd">    Args:</span>
</span><span id="__span-0-3622"><a id="__codelineno-0-3622" name="__codelineno-0-3622"></a><span class="sd">        tx_bb_gain (hexadecimal, optional): sets baseband gain according to: 0x00  = 0 dB, 0x01  = 3.5 dB, 0x02  = 3.5 dB, 0x03  = 6 dB (when sivers register tx_ctrl bit 3 (BB Ibias set) = 1). Defaults to 0x3.</span>
</span><span id="__span-0-3623"><a id="__codelineno-0-3623" name="__codelineno-0-3623"></a><span class="sd">        tx_bb_phase (int, optional): _description_. Defaults to 0.</span>
</span><span id="__span-0-3624"><a id="__codelineno-0-3624" name="__codelineno-0-3624"></a><span class="sd">        tx_bb_iq_gain (hexadecimal, optional): sets baseband I, Q gain according to: [0:3, I gain]: 0-6 dB, 16 steps; [4:7, Q gain]: 0-6 dB, 16 steps. Defaults to 0x77.</span>
</span><span id="__span-0-3625"><a id="__codelineno-0-3625" name="__codelineno-0-3625"></a><span class="sd">        tx_bfrf_gain (hexadecimal, optional): sets gain after RF mixer according to: [0:3, RF gain]: 0-15 dB, 16 steps; [4:7, BF gain]: 0-15 dB, 16 steps. Defaults to 0x40.</span>
</span><span id="__span-0-3626"><a id="__codelineno-0-3626" name="__codelineno-0-3626"></a><span class="sd">        carrier_freq (_type_, optional): carrier frequency from the available frequency range for the Sivers EVK 06002/3 (in this case: 57-71 GHz). Defaults to 57.51e9.</span>
</span><span id="__span-0-3627"><a id="__codelineno-0-3627" name="__codelineno-0-3627"></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-3628"><a id="__codelineno-0-3628" name="__codelineno-0-3628"></a>
</span><span id="__span-0-3629"><a id="__codelineno-0-3629" name="__codelineno-0-3629"></a>    <span class="n">dict_tx_gains</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;tx_bb_gain&#39;</span><span class="p">:</span> <span class="n">tx_bb_gain</span><span class="p">,</span> <span class="s1">&#39;tx_bb_phase&#39;</span><span class="p">:</span> <span class="n">tx_bb_phase</span><span class="p">,</span> <span class="s1">&#39;tx_bb_iq_gain&#39;</span><span class="p">:</span> <span class="n">tx_bb_iq_gain</span><span class="p">,</span> <span class="s1">&#39;tx_bfrf_gain&#39;</span><span class="p">:</span> <span class="n">tx_bfrf_gain</span><span class="p">}</span>
</span><span id="__span-0-3630"><a id="__codelineno-0-3630" name="__codelineno-0-3630"></a>
</span><span id="__span-0-3631"><a id="__codelineno-0-3631" name="__codelineno-0-3631"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">send_cmd</span><span class="p">(</span><span class="s1">&#39;transmitSamples&#39;</span><span class="p">)</span>
</span><span id="__span-0-3632"><a id="__codelineno-0-3632" name="__codelineno-0-3632"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">send_cmd</span><span class="p">(</span><span class="s1">&#39;setModeSivers&#39;</span><span class="p">,</span> <span class="n">cmd_arg</span><span class="o">=</span><span class="s1">&#39;RXen0_TXen1&#39;</span><span class="p">)</span>
</span><span id="__span-0-3633"><a id="__codelineno-0-3633" name="__codelineno-0-3633"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">send_cmd</span><span class="p">(</span><span class="s1">&#39;setCarrierFrequencySivers&#39;</span><span class="p">,</span> <span class="n">cmd_arg</span><span class="o">=</span><span class="n">carrier_freq</span><span class="p">)</span>
</span><span id="__span-0-3634"><a id="__codelineno-0-3634" name="__codelineno-0-3634"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">send_cmd</span><span class="p">(</span><span class="s1">&#39;setGainTxSivers&#39;</span><span class="p">,</span> <span class="n">cmd_arg</span><span class="o">=</span><span class="n">dict_tx_gains</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>


</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.path", "content.footnote.tooltips", "content.code.copy", "content.code.select", "content.code.annotate"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.8fd75fb4.min.js"></script>
      
        <script src="../javascripts/katex.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/contrib/auto-render.min.js"></script>
      
    
  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>